{"version":3,"file":"maplibre-gl-terradraw.umd.js","sources":["../node_modules/.pnpm/terra-draw@1.15.0/node_modules/terra-draw/dist/terra-draw.modern.js","../node_modules/.pnpm/terra-draw-maplibre-gl-adapter@1.1.2_maplibre-gl@5.7.3_terra-draw@1.15.0/node_modules/terra-draw-maplibre-gl-adapter/dist/terra-draw-maplibre-gl-adapter.modern.js","../src/lib/constants/AvailableModes.ts","../src/lib/constants/defaultControlOptions.ts","../src/lib/constants/defaultMeasureControlOptions.ts","../src/lib/constants/defaultValhallaControlOptions.ts","../src/lib/constants/getDefaultModeOptions.ts","../node_modules/.pnpm/@turf+helpers@7.2.0/node_modules/@turf/helpers/dist/esm/index.js","../node_modules/.pnpm/@turf+meta@7.2.0/node_modules/@turf/meta/dist/esm/index.js","../node_modules/.pnpm/@turf+area@7.2.0/node_modules/@turf/area/dist/esm/index.js","../src/lib/helpers/convertAreaUnit.ts","../src/lib/helpers/calcArea.ts","../node_modules/.pnpm/@turf+invariant@7.2.0/node_modules/@turf/invariant/dist/esm/index.js","../node_modules/.pnpm/@turf+distance@7.2.0/node_modules/@turf/distance/dist/esm/index.js","../src/lib/helpers/convertDistance.ts","../src/lib/helpers/calcDistance.ts","../src/lib/helpers/capitalize.ts","../src/lib/helpers/cleanMaplibreStyle.ts","../src/lib/helpers/debounce.ts","../src/lib/helpers/memoryCache.ts","../src/lib/helpers/modalDialog.ts","../src/lib/helpers/queryElevationByPoint.ts","../node_modules/.pnpm/@watergis+terrain-rgb@2.1.1/node_modules/@watergis/terrain-rgb/dist/terrain-rgb.es.js","../src/lib/helpers/queryElevationFromRasterDEM.ts","../src/lib/helpers/roundFeatureCoordinates.ts","../src/lib/helpers/valhallaIsochrone.ts","../src/lib/helpers/valhallaRouting.ts","../src/lib/controls/MaplibreTerradrawControl.ts","../node_modules/.pnpm/@turf+centroid@7.2.0/node_modules/@turf/centroid/dist/esm/index.js","../src/lib/controls/MaplibreMeasureControl.ts","../src/lib/controls/MaplibreValhallaControl.ts"],"sourcesContent":["function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)({}).hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},t.apply(null,arguments)}var e;!function(t){t.Commit=\"commit\",t.Provisional=\"provisional\",t.Finish=\"finish\"}(e||(e={}));const i={SELECTED:\"selected\",MID_POINT:\"midPoint\",SELECTION_POINT_FEATURE_ID:\"selectionPointFeatureId\",SELECTION_POINT:\"selectionPoint\"},o={MODE:\"mode\",CURRENTLY_DRAWING:\"currentlyDrawing\",EDITED:\"edited\",CLOSING_POINT:\"closingPoint\",SNAPPING_POINT:\"snappingPoint\",COORDINATE_POINT:\"coordinatePoint\",COORDINATE_POINT_FEATURE_ID:\"coordinatePointFeatureId\",COORDINATE_POINT_IDS:\"coordinatePointIds\",PROVISIONAL_COORDINATE_COUNT:\"provisionalCoordinateCount\",COMMITTED_COORDINATE_COUNT:\"committedCoordinateCount\"},s=10;function n(t){return Boolean(t&&\"object\"==typeof t&&null!==t&&!Array.isArray(t))}function r(t){return Boolean(t&&\"object\"==typeof t&&\"properties\"in t&&\"object\"==typeof t.properties&&null!==t.properties&&\"mode\"in t.properties)}function a(t){return!!function(t){return\"number\"==typeof t&&!isNaN(new Date(t).valueOf())}(t)}const d=\"Feature is not a Polygon\",h=\"Feature mode property does not match the mode being added to\";var l;!function(t){t.Drawing=\"drawing\",t.Select=\"select\",t.Static=\"static\",t.Render=\"render\"}(l||(l={}));const c={rightClick:!0,contextMenu:!1,leftClick:!0,onDragStart:!0,onDrag:!0,onDragEnd:!0};class u{get state(){return this._state}set state(t){throw new Error(\"Please use the modes lifecycle methods\")}get styles(){return this._styles}set styles(t){if(\"object\"!=typeof t)throw new Error(\"Styling must be an object\");this.onStyleChange&&this.onStyleChange([],\"styling\"),this._styles=t}registerBehaviors(t){}constructor(t,e=!1){this._state=\"unregistered\",this._styles={},this.pointerEvents=c,this.behaviors=[],this.validate=void 0,this.pointerDistance=40,this.coordinatePrecision=void 0,this.onStyleChange=void 0,this.store=void 0,this.projection=\"web-mercator\",this.setDoubleClickToZoom=void 0,this.unproject=void 0,this.project=void 0,this.setCursor=void 0,this.type=l.Drawing,this.mode=\"base\",e||this.updateOptions(t)}updateOptions(e){null!=e&&e.styles&&(this.styles=t({},this._styles,e.styles)),null!=e&&e.pointerDistance&&(this.pointerDistance=e.pointerDistance),null!=e&&e.validation&&(this.validate=e&&e.validation),null!=e&&e.projection&&(this.projection=e.projection),void 0!==(null==e?void 0:e.pointerEvents)&&(this.pointerEvents=e.pointerEvents)}allowPointerEvent(t,e){return\"boolean\"==typeof t?t:\"function\"!=typeof t||t(e)}setDrawing(){if(\"started\"!==this._state)throw new Error(\"Mode must be unregistered or stopped to start\");this._state=\"drawing\"}setStarted(){if(\"stopped\"!==this._state&&\"registered\"!==this._state&&\"drawing\"!==this._state&&\"selecting\"!==this._state)throw new Error(\"Mode must be unregistered or stopped to start\");this._state=\"started\",this.setDoubleClickToZoom(!1)}setStopped(){if(\"started\"!==this._state)throw new Error(\"Mode must be started to be stopped\");this._state=\"stopped\",this.setDoubleClickToZoom(!0)}register(t){if(\"unregistered\"!==this._state)throw new Error(\"Can not register unless mode is unregistered\");this._state=\"registered\",this.store=t.store,this.store.registerOnChange(t.onChange),this.setDoubleClickToZoom=t.setDoubleClickToZoom,this.project=t.project,this.unproject=t.unproject,this.onSelect=t.onSelect,this.onDeselect=t.onDeselect,this.setCursor=t.setCursor,this.onStyleChange=t.onChange,this.onFinish=t.onFinish,this.coordinatePrecision=t.coordinatePrecision,this.registerBehaviors({mode:t.mode,store:this.store,project:this.project,unproject:this.unproject,pointerDistance:this.pointerDistance,coordinatePrecision:t.coordinatePrecision,projection:this.projection})}validateFeature(t){return this.performFeatureValidation(t)}afterFeatureAdded(t){}afterFeatureUpdated(t){}performFeatureValidation(t){if(\"unregistered\"===this._state)throw new Error(\"Mode must be registered\");const i=function(t,e){let i;if(n(t))if(null==t.id)i=\"Feature has no id\";else if(\"string\"!=typeof t.id&&\"number\"!=typeof t.id)i=\"Feature must be string or number as per GeoJSON spec\";else if(e(t.id))if(n(t.geometry))if(n(t.properties))if(\"string\"==typeof t.geometry.type&&[\"Polygon\",\"LineString\",\"Point\"].includes(t.geometry.type))if(Array.isArray(t.geometry.coordinates)){if(!t.properties.mode||\"string\"!=typeof t.properties.mode)return{valid:!1,reason:\"Feature does not have a valid mode property\"}}else i=\"Feature coordinates is not an array\";else i=\"Feature is not Point, LineString or Polygon\";else i=\"Feature has no properties\";else i=\"Feature has no geometry\";else i=\"Feature must match the id strategy (default is UUID4)\";else i=\"Feature is not object\";return i?{valid:!1,reason:i}:{valid:!0}}(t,this.store.idStrategy.isValidId);if(this.validate){const o=this.validate(t,{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e.Provisional});return{valid:i.valid&&o.valid,reason:o.reason}}return{valid:i.valid,reason:i.reason}}validateModeFeature(t,e){const i=this.performFeatureValidation(t);return i.valid?t.properties.mode!==this.mode?{valid:!1,reason:h}:e(t):{valid:!1,reason:i.reason}}onFinish(t,e){}onDeselect(t){}onSelect(t){}onKeyDown(t){}onKeyUp(t){}onMouseMove(t){}onClick(t){}onDragStart(t,e){}onDrag(t,e){}onDragEnd(t,e){}getHexColorStylingValue(t,e,i){return this.getStylingValue(t,e,i)}getNumericStylingValue(t,e,i){return this.getStylingValue(t,e,i)}getStylingValue(t,e,i){return void 0===t?e:\"function\"==typeof t?t(i):t}}class p extends u{constructor(...t){super(...t),this.type=l.Select}}function g(t,e){const i=t=>t*Math.PI/180,o=i(t[1]),s=i(t[0]),n=i(e[1]),r=n-o,a=i(e[0])-s,d=Math.sin(r/2)*Math.sin(r/2)+Math.cos(o)*Math.cos(n)*Math.sin(a/2)*Math.sin(a/2);return 2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))*6371e3/1e3}const y=6371008.8;function f(t){return t%360*Math.PI/180}function m(t){return t/6371.0088}function v(t){return t%(2*Math.PI)*180/Math.PI}function C(t,e=9){const i=Math.pow(10,e);return Math.round(t*i)/i}const P=57.29577951308232,I=.017453292519943295,x=6378137,E=(t,e)=>({x:0===t?0:t*I*x,y:0===e?0:Math.log(Math.tan(Math.PI/4+e*I/2))*x}),S=(t,e)=>({lng:0===t?0:P*(t/x),lat:0===e?0:(2*Math.atan(Math.exp(e/x))-Math.PI/2)*P});function M(t,e,i){const o=f(t[0]),s=f(t[1]),n=f(i),r=m(e),a=Math.asin(Math.sin(s)*Math.cos(r)+Math.cos(s)*Math.sin(r)*Math.cos(n));return[v(o+Math.atan2(Math.sin(n)*Math.sin(r)*Math.cos(s),Math.cos(r)-Math.sin(s)*Math.sin(a))),v(a)]}function F(t){const{center:e,radiusKilometers:i,coordinatePrecision:o}=t,s=t.steps?t.steps:64,n=[];for(let t=0;t<s;t++){const r=M(e,i,-360*t/s);n.push([C(r[0],o),C(r[1],o)])}return n.push(n[0]),{type:\"Feature\",geometry:{type:\"Polygon\",coordinates:[n]},properties:{}}}function D(t){let e;if(\"Polygon\"===t.geometry.type)e=t.geometry.coordinates;else{if(\"LineString\"!==t.geometry.type)throw new Error(\"Self intersects only accepts Polygons and LineStrings\");e=[t.geometry.coordinates]}const i=[];for(let t=0;t<e.length;t++)for(let i=0;i<e[t].length-1;i++)for(let o=0;o<e.length;o++)for(let n=0;n<e[o].length-1;n++)s(t,i,o,n);return i.length>0;function o(t){return t<0||t>1}function s(t,s,n,r){const a=e[t][s],d=e[t][s+1],h=e[n][r],l=e[n][r+1],c=function(t,e,i,o){if(w(t,i)||w(t,o)||w(e,i)||w(o,i))return null;const s=t[0],n=t[1],r=e[0],a=e[1],d=i[0],h=i[1],l=o[0],c=o[1],u=(s-r)*(h-c)-(n-a)*(d-l);return 0===u?null:[((s*a-n*r)*(d-l)-(s-r)*(d*c-h*l))/u,((s*a-n*r)*(h-c)-(n-a)*(d*c-h*l))/u]}(a,d,h,l);if(null===c)return;let u,p;u=d[0]!==a[0]?(c[0]-a[0])/(d[0]-a[0]):(c[1]-a[1])/(d[1]-a[1]),p=l[0]!==h[0]?(c[0]-h[0])/(l[0]-h[0]):(c[1]-h[1])/(l[1]-h[1]),o(u)||o(p)||(c.toString(),i.push(c))}}function w(t,e){return t[0]===e[0]&&t[1]===e[1]}function O(t,e){return b(t[0])<=e&&b(t[1])<=e}function _(t){return 2===t.length&&\"number\"==typeof t[0]&&\"number\"==typeof t[1]&&Infinity!==t[0]&&Infinity!==t[1]&&(i=t[0])>=-180&&i<=180&&(e=t[1])>=-90&&e<=90;var e,i}function b(t){let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}const k=\"Feature has holes\",N=\"Feature has less than 4 coordinates\",T=\"Feature has invalid coordinates\",j=\"Feature coordinates are not closed\";function W(t,e){if(\"Polygon\"!==t.geometry.type)return{valid:!1,reason:\"Feature is not a Polygon\"};if(1!==t.geometry.coordinates.length)return{valid:!1,reason:k};if(t.geometry.coordinates[0].length<4)return{valid:!1,reason:N};for(let i=0;i<t.geometry.coordinates[0].length;i++){if(!_(t.geometry.coordinates[0][i]))return{valid:!1,reason:T};if(!O(t.geometry.coordinates[0][i],e))return{valid:!1,reason:\"Feature has coordinates with excessive precision\"}}return(i=t.geometry.coordinates[0][0])[0]!==(o=t.geometry.coordinates[0][t.geometry.coordinates[0].length-1])[0]||i[1]!==o[1]?{valid:!1,reason:j}:{valid:!0};var i,o}function B(t,e){const i=W(t,e);return i.valid?D(t)?{valid:!1,reason:\"Feature intersects itself\"}:{valid:!0}:i}const G={cancel:\"Escape\",finish:\"Enter\"},R={start:\"crosshair\"};class L extends u{constructor(t){super(t,!0),this.mode=\"circle\",this.center=void 0,this.clickCount=0,this.currentCircleId=void 0,this.keyEvents=G,this.cursors=R,this.startingRadiusKilometers=1e-5,this.cursorMovedAfterInitialCursorDown=!1,this.updateOptions(t)}updateOptions(e){super.updateOptions(e),null!=e&&e.cursors&&(this.cursors=t({},this.cursors,e.cursors)),null===(null==e?void 0:e.keyEvents)?this.keyEvents={cancel:null,finish:null}:null!=e&&e.keyEvents&&(this.keyEvents=t({},this.keyEvents,e.keyEvents)),null!=e&&e.startingRadiusKilometers&&(this.startingRadiusKilometers=e.startingRadiusKilometers)}close(){if(void 0===this.currentCircleId)return;this.store.updateProperty([{id:this.currentCircleId,property:o.CURRENTLY_DRAWING,value:void 0}]);const t=this.currentCircleId;if(this.validate&&t){const i=this.store.getGeometryCopy(t);if(!this.validate({type:\"Feature\",id:t,geometry:i,properties:{}},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e.Finish}).valid)return}this.cursorMovedAfterInitialCursorDown=!1,this.center=void 0,this.currentCircleId=void 0,this.clickCount=0,\"drawing\"===this.state&&this.setStarted(),this.onFinish(t,{mode:this.mode,action:\"draw\"})}start(){this.setStarted(),this.setCursor(this.cursors.start)}stop(){this.cleanUp(),this.setStopped(),this.setCursor(\"unset\")}onClick(t){if(\"right\"===t.button&&this.allowPointerEvent(this.pointerEvents.rightClick,t)||\"left\"===t.button&&this.allowPointerEvent(this.pointerEvents.leftClick,t)||t.isContextMenu&&this.allowPointerEvent(this.pointerEvents.contextMenu,t))if(0===this.clickCount){this.center=[t.lng,t.lat];const e=F({center:this.center,radiusKilometers:this.startingRadiusKilometers,coordinatePrecision:this.coordinatePrecision}),[i]=this.store.create([{geometry:e.geometry,properties:{mode:this.mode,radiusKilometers:this.startingRadiusKilometers,[o.CURRENTLY_DRAWING]:!0}}]);this.currentCircleId=i,this.clickCount++,this.cursorMovedAfterInitialCursorDown=!1,this.setDrawing()}else 1===this.clickCount&&this.center&&void 0!==this.currentCircleId&&this.cursorMovedAfterInitialCursorDown&&this.updateCircle(t),this.close()}onMouseMove(t){this.cursorMovedAfterInitialCursorDown=!0,this.updateCircle(t)}onKeyDown(){}onKeyUp(t){t.key===this.keyEvents.cancel?this.cleanUp():t.key===this.keyEvents.finish&&this.close()}onDragStart(){}onDrag(){}onDragEnd(){}cleanUp(){const t=this.currentCircleId;this.center=void 0,this.currentCircleId=void 0,this.clickCount=0,\"drawing\"===this.state&&this.setStarted();try{void 0!==t&&this.store.delete([t])}catch(t){}}styleFeature(e){const i=t({},{polygonFillColor:\"#3f97e0\",polygonOutlineColor:\"#3f97e0\",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:\"#3f97e0\",pointOutlineColor:\"#ffffff\",pointOutlineWidth:0,pointWidth:6,lineStringColor:\"#3f97e0\",lineStringWidth:4,zIndex:0});return\"Feature\"===e.type&&\"Polygon\"===e.geometry.type&&e.properties.mode===this.mode?(i.polygonFillColor=this.getHexColorStylingValue(this.styles.fillColor,i.polygonFillColor,e),i.polygonOutlineColor=this.getHexColorStylingValue(this.styles.outlineColor,i.polygonOutlineColor,e),i.polygonOutlineWidth=this.getNumericStylingValue(this.styles.outlineWidth,i.polygonOutlineWidth,e),i.polygonFillOpacity=this.getNumericStylingValue(this.styles.fillOpacity,i.polygonFillOpacity,e),i.zIndex=s,i):i}validateFeature(t){return this.validateModeFeature(t,t=>B(t,this.coordinatePrecision))}updateCircle(t){if(1===this.clickCount&&this.center&&this.currentCircleId){const i=g(this.center,[t.lng,t.lat]);let o;if(\"web-mercator\"===this.projection){const e=function(t,e){const i=1e3*g(t,e);if(0===i)return 1;const{x:o,y:s}=E(t[0],t[1]),{x:n,y:r}=E(e[0],e[1]);return Math.sqrt(Math.pow(n-o,2)+Math.pow(r-s,2))/i}(this.center,[t.lng,t.lat]);o=function(t){const{center:e,radiusKilometers:i,coordinatePrecision:o}=t,s=t.steps?t.steps:64,n=1e3*i,[r,a]=e,{x:d,y:h}=E(r,a),l=[];for(let t=0;t<s;t++){const e=360*t/s*Math.PI/180,i=n*Math.cos(e),r=n*Math.sin(e),[a,c]=[d+i,h+r],{lng:u,lat:p}=S(a,c);l.push([C(u,o),C(p,o)])}return l.push(l[0]),{type:\"Feature\",geometry:{type:\"Polygon\",coordinates:[l]},properties:{}}}({center:this.center,radiusKilometers:i*e,coordinatePrecision:this.coordinatePrecision})}else{if(\"globe\"!==this.projection)throw new Error(\"Invalid projection\");o=F({center:this.center,radiusKilometers:i,coordinatePrecision:this.coordinatePrecision})}if(this.validate&&!this.validate({type:\"Feature\",id:this.currentCircleId,geometry:o.geometry,properties:{radiusKilometers:i}},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e.Provisional}).valid)return;this.store.updateGeometry([{id:this.currentCircleId,geometry:o.geometry}]),this.store.updateProperty([{id:this.currentCircleId,property:\"radiusKilometers\",value:i}])}}afterFeatureUpdated(t){this.currentCircleId===t.id&&(this.cursorMovedAfterInitialCursorDown=!1,this.center=void 0,this.currentCircleId=void 0,this.clickCount=0,\"drawing\"===this.state&&this.setStarted())}}const U=(t,e)=>{const{x:i,y:o}=t,{x:s,y:n}=e,r=s-i,a=n-o;return Math.sqrt(a*a+r*r)};function A(t){const e=function(t){const e=t.coordinates[0];let i=0;for(let t=0;t<e.length-1;t++){const[o,s]=e[t],[n,r]=e[t+1];i+=(n-o)*(r+s)}return i<0}(t);if(!e)return{type:\"Polygon\",coordinates:[t.coordinates[0].reverse()]}}const V={cancel:\"Escape\",finish:\"Enter\"},Y={start:\"crosshair\",close:\"pointer\"};class K extends u{constructor(t){super(t,!0),this.mode=\"freehand\",this.startingClick=!1,this.currentId=void 0,this.closingPointId=void 0,this.minDistance=20,this.keyEvents=V,this.cursors=Y,this.preventPointsNearClose=!0,this.autoClose=!1,this.autoCloseTimeout=500,this.hasLeftStartingPoint=!1,this.preventNewFeature=!1,this.updateOptions(t)}updateOptions(e){super.updateOptions(e),null!=e&&e.minDistance&&(this.minDistance=e.minDistance),void 0!==(null==e?void 0:e.preventPointsNearClose)&&(this.preventPointsNearClose=e.preventPointsNearClose),void 0!==(null==e?void 0:e.autoClose)&&(this.autoClose=e.autoClose),null!=e&&e.autoCloseTimeout&&(this.autoCloseTimeout=e.autoCloseTimeout),null===(null==e?void 0:e.keyEvents)?this.keyEvents={cancel:null,finish:null}:null!=e&&e.keyEvents&&(this.keyEvents=t({},this.keyEvents,e.keyEvents)),null!=e&&e.cursors&&(this.cursors=t({},this.cursors,e.cursors))}close(){if(void 0===this.currentId)return;if(this.currentId){const t=A(this.store.getGeometryCopy(this.currentId));t&&this.store.updateGeometry([{id:this.currentId,geometry:t}]),this.store.updateProperty([{id:this.currentId,property:o.CURRENTLY_DRAWING,value:void 0}])}const t=this.currentId;if(this.validate&&t){const i=this.store.getGeometryCopy(t);if(!this.validate({type:\"Feature\",id:t,geometry:i,properties:{}},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e.Finish}).valid)return}this.closingPointId&&this.store.delete([this.closingPointId]),this.startingClick=!1,this.currentId=void 0,this.closingPointId=void 0,this.hasLeftStartingPoint=!1,\"drawing\"===this.state&&this.setStarted(),this.onFinish(t,{mode:this.mode,action:\"draw\"})}start(){this.setStarted(),this.setCursor(this.cursors.start)}stop(){this.cleanUp(),this.setStopped(),this.setCursor(\"unset\")}onMouseMove(t){if(void 0===this.currentId||!1===this.startingClick)return void this.setCursor(this.cursors.start);const i=this.store.getGeometryCopy(this.currentId),o=i.coordinates[0].length-2,[s,n]=i.coordinates[0][o],{x:r,y:a}=this.project(s,n),d=U({x:r,y:a},{x:t.containerX,y:t.containerY}),[h,l]=i.coordinates[0][0],{x:c,y:u}=this.project(h,l);if(U({x:c,y:u},{x:t.containerX,y:t.containerY})<this.pointerDistance){if(this.autoClose&&this.hasLeftStartingPoint&&(this.preventNewFeature=!0,setTimeout(()=>{this.preventNewFeature=!1},this.autoCloseTimeout),this.close()),this.setCursor(this.cursors.close),this.preventPointsNearClose)return}else this.hasLeftStartingPoint=!0,this.setCursor(this.cursors.start);if(d<this.minDistance)return;i.coordinates[0].pop();const p={type:\"Polygon\",coordinates:[[...i.coordinates[0],[t.lng,t.lat],i.coordinates[0][0]]]};this.validate&&!this.validate({type:\"Feature\",id:this.currentId,geometry:p,properties:{}},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e.Provisional}).valid||this.store.updateGeometry([{id:this.currentId,geometry:p}])}onClick(t){if(\"right\"===t.button&&this.allowPointerEvent(this.pointerEvents.rightClick,t)||\"left\"===t.button&&this.allowPointerEvent(this.pointerEvents.leftClick,t)||t.isContextMenu&&this.allowPointerEvent(this.pointerEvents.contextMenu,t)){if(this.preventNewFeature)return;if(!1===this.startingClick){const[e,i]=this.store.create([{geometry:{type:\"Polygon\",coordinates:[[[t.lng,t.lat],[t.lng,t.lat],[t.lng,t.lat],[t.lng,t.lat]]]},properties:{mode:this.mode,[o.CURRENTLY_DRAWING]:!0}},{geometry:{type:\"Point\",coordinates:[t.lng,t.lat]},properties:{mode:this.mode,[o.CLOSING_POINT]:!0}}]);return this.currentId=e,this.closingPointId=i,this.startingClick=!0,void(\"drawing\"!==this.state&&this.setDrawing())}this.close()}}onKeyDown(){}onKeyUp(t){t.key===this.keyEvents.cancel?this.cleanUp():t.key===this.keyEvents.finish&&!0===this.startingClick&&this.close()}onDragStart(){}onDrag(){}onDragEnd(){}cleanUp(){const t=this.currentId,e=this.closingPointId;this.closingPointId=void 0,this.currentId=void 0,this.startingClick=!1,\"drawing\"===this.state&&this.setStarted();try{void 0!==t&&this.store.delete([t]),void 0!==e&&this.store.delete([e])}catch(t){}}styleFeature(e){const i=t({},{polygonFillColor:\"#3f97e0\",polygonOutlineColor:\"#3f97e0\",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:\"#3f97e0\",pointOutlineColor:\"#ffffff\",pointOutlineWidth:0,pointWidth:6,lineStringColor:\"#3f97e0\",lineStringWidth:4,zIndex:0});return\"Feature\"===e.type&&\"Polygon\"===e.geometry.type&&e.properties.mode===this.mode?(i.polygonFillColor=this.getHexColorStylingValue(this.styles.fillColor,i.polygonFillColor,e),i.polygonOutlineColor=this.getHexColorStylingValue(this.styles.outlineColor,i.polygonOutlineColor,e),i.polygonOutlineWidth=this.getNumericStylingValue(this.styles.outlineWidth,i.polygonOutlineWidth,e),i.polygonFillOpacity=this.getNumericStylingValue(this.styles.fillOpacity,i.polygonFillOpacity,e),i.zIndex=s,i):\"Feature\"===e.type&&\"Point\"===e.geometry.type&&e.properties.mode===this.mode?(i.pointWidth=this.getNumericStylingValue(this.styles.closingPointWidth,i.pointWidth,e),i.pointColor=this.getHexColorStylingValue(this.styles.closingPointColor,i.pointColor,e),i.pointOutlineColor=this.getHexColorStylingValue(this.styles.closingPointOutlineColor,i.pointOutlineColor,e),i.pointOutlineWidth=this.getNumericStylingValue(this.styles.closingPointOutlineWidth,2,e),i.zIndex=50,i):i}validateFeature(t){return this.validateModeFeature(t,t=>W(t,this.coordinatePrecision))}afterFeatureUpdated(t){this.currentId===t.id&&(this.closingPointId&&this.store.delete([this.closingPointId]),this.startingClick=!1,this.currentId=void 0,this.closingPointId=void 0,this.hasLeftStartingPoint=!1)}}class z{constructor({store:t,mode:e,project:i,unproject:o,pointerDistance:s,coordinatePrecision:n,projection:r}){this.store=void 0,this.mode=void 0,this.project=void 0,this.unproject=void 0,this.pointerDistance=void 0,this.coordinatePrecision=void 0,this.projection=void 0,this.store=t,this.mode=e,this.project=i,this.unproject=o,this.pointerDistance=s,this.coordinatePrecision=n,this.projection=r}}function X({unproject:t,point:e,pointerDistance:i}){const o=i/2,{x:s,y:n}=e;return{type:\"Feature\",properties:{},geometry:{type:\"Polygon\",coordinates:[[t(s-o,n-o),t(s+o,n-o),t(s+o,n+o),t(s-o,n+o),t(s-o,n-o)].map(t=>[t.lng,t.lat])]}}}class H extends z{constructor(t){super(t)}create(t){const{containerX:e,containerY:i}=t;return X({unproject:this.unproject,point:{x:e,y:i},pointerDistance:this.pointerDistance})}}class $ extends z{constructor(t){super(t)}measure(t,e){const{x:i,y:o}=this.project(e[0],e[1]);return U({x:i,y:o},{x:t.containerX,y:t.containerY})}}class q extends z{constructor(t,e,i){super(t),this.config=void 0,this.pixelDistance=void 0,this.clickBoundingBox=void 0,this.getSnappableCoordinateFirstClick=t=>this.getSnappable(t,t=>Boolean(t.properties&&t.properties.mode===this.mode)).coordinate,this.getSnappableCoordinate=(t,e)=>this.getSnappable(t,t=>Boolean(t.properties&&t.properties.mode===this.mode&&t.id!==e)).coordinate,this.config=t,this.pixelDistance=e,this.clickBoundingBox=i}getSnappable(t,e){const i=this.clickBoundingBox.create(t),o=this.store.search(i,e),s={featureId:void 0,featureCoordinateIndex:void 0,coordinate:void 0,minDist:Infinity};return o.forEach(e=>{let i;if(\"Polygon\"===e.geometry.type)i=e.geometry.coordinates[0];else{if(\"LineString\"!==e.geometry.type)return;i=e.geometry.coordinates}i.forEach((i,o)=>{const n=this.pixelDistance.measure(t,i);n<s.minDist&&n<this.pointerDistance&&(s.coordinate=i,s.minDist=n,s.featureId=e.id,s.featureCoordinateIndex=o)})}),s}}function Z(t,e,i){const o=f(t[0]),s=f(t[1]),n=f(i),r=m(e),a=Math.asin(Math.sin(s)*Math.cos(r)+Math.cos(s)*Math.sin(r)*Math.cos(n));return[v(o+Math.atan2(Math.sin(n)*Math.sin(r)*Math.cos(s),Math.cos(r)-Math.sin(s)*Math.sin(a))),v(a)]}function J({x:t,y:e},i,o){const s=f(o);return{x:t+i*Math.cos(s),y:e+i*Math.sin(s)}}function Q(t,e){const i=f(t[0]),o=f(e[0]),s=f(t[1]),n=f(e[1]),r=Math.sin(o-i)*Math.cos(n),a=Math.cos(s)*Math.sin(n)-Math.sin(s)*Math.cos(n)*Math.cos(o-i);return v(Math.atan2(r,a))}function tt({x:t,y:e},{x:i,y:o}){const s=i-t,n=o-e;if(0===s&&0===n)return 0;let r=Math.atan2(n,s);return r*=180/Math.PI,r>180?r-=360:r<-180&&(r+=360),r}function et(t){return(t+360)%360}function it(t,e,i){const o=[],s=t.length;let n,r,a,d=0;for(let s=0;s<t.length&&!(e>=d&&s===t.length-1);s++){if(d>e&&0===o.length){if(n=e-d,!n)return o.push(t[s]),o;r=Q(t[s],t[s-1])-180,a=Z(t[s],n,r),o.push(a)}if(d>=i)return n=i-d,n?(r=Q(t[s],t[s-1])-180,a=Z(t[s],n,r),o.push(a),o):(o.push(t[s]),o);if(d>=e&&o.push(t[s]),s===t.length-1)return o;d+=g(t[s],t[s+1])}if(d<e&&t.length===s)throw new Error(\"Start position is beyond line\");const h=t[t.length-1];return[h,h]}function ot(t){return t*(Math.PI/180)}function st(t){return t*(180/Math.PI)}class nt extends z{constructor(t){super(t),this.config=void 0,this.config=t}generateInsertionCoordinates(t,e,i){const o=[t,e];let s=0;for(let t=0;t<o.length-1;t++)s+=g(o[0],o[1]);if(s<=i)return o;let n=s/i-1;Number.isInteger(n)||(n=Math.floor(n)+1);const r=[];for(let t=0;t<n;t++){const e=it(o,i*t,i*(t+1));r.push(e)}const a=[];for(let t=0;t<r.length;t++)a.push(r[t][1]);return this.limitCoordinates(a)}generateInsertionGeodesicCoordinates(t,e,i){const o=g(t,e),s=function(t,e,i){const o=[],s=ot(t[1]),n=ot(t[0]),r=ot(e[1]),a=ot(e[0]);i+=1;const d=2*Math.asin(Math.sqrt(Math.sin((r-s)/2)**2+Math.cos(s)*Math.cos(r)*Math.sin((a-n)/2)**2));if(0===d||isNaN(d))return o;for(let t=0;t<=i;t++){const e=t/i,h=Math.sin((1-e)*d)/Math.sin(d),l=Math.sin(e*d)/Math.sin(d),c=h*Math.cos(s)*Math.cos(n)+l*Math.cos(r)*Math.cos(a),u=h*Math.cos(s)*Math.sin(n)+l*Math.cos(r)*Math.sin(a),p=h*Math.sin(s)+l*Math.sin(r);if(isNaN(c)||isNaN(u)||isNaN(p))continue;const g=Math.atan2(p,Math.sqrt(c**2+u**2)),y=Math.atan2(u,c);isNaN(g)||isNaN(y)||o.push([st(y),st(g)])}return o.slice(1,-1)}(t,e,Math.floor(o/i));return this.limitCoordinates(s)}limitCoordinates(t){return t.map(t=>[C(t[0],this.config.coordinatePrecision),C(t[1],this.config.coordinatePrecision)])}}function rt(t,e){return t[0]===e[0]&&t[1]===e[1]}function at(t,e){if(\"LineString\"!==t.geometry.type)return{valid:!1,reason:\"Feature is not a LineString\"};if(t.geometry.coordinates.length<2)return{valid:!1,reason:\"Feature has less than 2 coordinates\"};for(let i=0;i<t.geometry.coordinates.length;i++){if(!_(t.geometry.coordinates[i]))return{valid:!1,reason:\"Feature has invalid coordinates\"};if(!O(t.geometry.coordinates[i],e))return{valid:!1,reason:\"Feature has coordinates with excessive precision\"}}return{valid:!0}}function dt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2))}function ht(t,e){const i=function(t,e){const[i,o,s]=t,[n,r,a]=e;return i*n+o*r+s*a}(t,e)/(dt(t)*dt(e));return Math.acos(Math.min(Math.max(i,-1),1))}function lt(t){const e=f(t[1]),i=f(t[0]);return[Math.cos(e)*Math.cos(i),Math.cos(e)*Math.sin(i),Math.sin(e)]}function ct(t){const[e,i,o]=t,s=v(Math.asin(o));return[v(Math.atan2(i,e)),s]}function ut(t,e,i){const o=lt(t),s=lt(e),n=lt(i),[r,a,d]=n,[h,l,c]=function(t,e){const[i,o,s]=t,[n,r,a]=e;return[o*a-s*r,s*n-i*a,i*r-o*n]}(o,s),u=l*d-c*a,p=c*r-h*d,y=h*a-l*r,f=y*l-p*c,m=u*c-y*h,v=p*h-u*l,C=1/Math.sqrt(Math.pow(f,2)+Math.pow(m,2)+Math.pow(v,2)),P=[f*C,m*C,v*C],I=[-1*f*C,-1*m*C,-1*v*C],x=ht(o,s),E=ht(o,P),S=ht(s,P),M=ht(o,I),F=ht(s,I);let D;return D=E<M&&E<F||S<M&&S<F?P:I,ht(o,D)>x||ht(s,D)>x?g(ct(D),ct(o))<=g(ct(D),ct(s))?[ct(o),!0,!1]:[ct(s),!1,!0]:[ct(D),!1,!1]}function pt(t,e,i){const o=e.x-t.x,s=e.y-t.y,n=Math.max(0,Math.min(1,((i.x-t.x)*o+(i.y-t.y)*s)/(o*o+s*s)));return{x:t.x+n*o,y:t.y+n*s}}class gt extends z{constructor(t,e,i){super(t),this.config=void 0,this.pixelDistance=void 0,this.clickBoundingBox=void 0,this.getSnappableCoordinateFirstClick=t=>{const e=this.getSnappable(t,t=>Boolean(t.properties&&t.properties.mode===this.mode));return e.coordinate?[C(e.coordinate[0],this.config.coordinatePrecision),C(e.coordinate[1],this.config.coordinatePrecision)]:void 0},this.getSnappableCoordinate=(t,e)=>{const i=this.getSnappable(t,t=>Boolean(t.properties&&t.properties.mode===this.mode&&t.id!==e));return i.coordinate?[C(i.coordinate[0],this.config.coordinatePrecision),C(i.coordinate[1],this.config.coordinatePrecision)]:void 0},this.config=t,this.pixelDistance=e,this.clickBoundingBox=i}getSnappable(t,e){const i=this.clickBoundingBox.create(t),o=this.store.search(i,e),s={featureId:void 0,featureCoordinateIndex:void 0,coordinate:void 0,minDistance:Infinity};return o.forEach(e=>{let i;if(\"Polygon\"===e.geometry.type)i=e.geometry.coordinates[0];else{if(\"LineString\"!==e.geometry.type)return;i=e.geometry.coordinates}const o=[];for(let t=0;t<i.length-1;t++)o.push([i[t],i[t+1]]);let n;const r=[t.lng,t.lat];if(\"web-mercator\"===this.config.projection?n=function(t,e){let i=[Infinity,Infinity],o=Infinity,s=0;for(let n of e){const r=n[0],a=n[1];let d,h=Infinity;const l=E(r[0],r[1]),c=E(a[0],a[1]),u=E(t[0],t[1]);if(r[0]===t[0]&&r[1]===t[1])d=r;else if(a[0]===t[0]&&a[1]===t[1])d=a;else{const{x:t,y:e}=pt(l,c,u),{lng:i,lat:o}=S(t,e);d=[i,o]}d&&(h=U(u,E(d[0],d[1])),h<o&&(i=d,o=h,s=e.indexOf(n)))}return Infinity===o?void 0:{coordinate:i,lineIndex:s,distance:o}}(r,o):\"globe\"===this.config.projection&&(n=function(t,e){let i=[Infinity,Infinity],o=Infinity,s=0;for(let n of e){const r=n[0],a=n[1];let d,h=Infinity;r[0]===t[0]&&r[1]===t[1]?d=r:a[0]===t[0]&&a[1]===t[1]?d=a:[d]=ut(r,a,t),d&&(h=g(t,d),h<o&&(i=d,o=h,s=e.indexOf(n)))}return Infinity===o?void 0:{coordinate:i,distance:o,lineIndex:s}}(r,o)),!n)return;const a=this.pixelDistance.measure(t,n.coordinate);a<s.minDistance&&a<this.pointerDistance&&(s.featureId=e.id,s.coordinate=[C(n.coordinate[0],this.config.coordinatePrecision),C(n.coordinate[1],this.config.coordinatePrecision)],s.featureCoordinateIndex=n.lineIndex,s.minDistance=a)}),s}}const yt={cancel:\"Escape\",finish:\"Enter\"},ft={start:\"crosshair\",close:\"pointer\",dragStart:\"grabbing\",dragEnd:\"crosshair\"};class mt extends u{constructor(t){super(t,!0),this.mode=\"linestring\",this.currentCoordinate=0,this.currentId=void 0,this.closingPointId=void 0,this.keyEvents=yt,this.snapping=void 0,this.cursors=ft,this.mouseMove=!1,this.insertCoordinates=void 0,this.lastCommittedCoordinates=void 0,this.snappedPointId=void 0,this.lastMouseMoveEvent=void 0,this.editable=!1,this.editedFeatureId=void 0,this.editedFeatureCoordinateIndex=void 0,this.editedSnapType=void 0,this.editedInsertIndex=void 0,this.editedPointId=void 0,this.coordinateSnapping=void 0,this.insertPoint=void 0,this.lineSnapping=void 0,this.pixelDistance=void 0,this.clickBoundingBox=void 0,this.updateOptions(t)}updateOptions(e){super.updateOptions(e),null!=e&&e.cursors&&(this.cursors=t({},this.cursors,e.cursors)),null!=e&&e.snapping&&(this.snapping=e.snapping),null===(null==e?void 0:e.keyEvents)?this.keyEvents={cancel:null,finish:null}:null!=e&&e.keyEvents&&(this.keyEvents=t({},this.keyEvents,e.keyEvents)),null!=e&&e.insertCoordinates&&(this.insertCoordinates=e.insertCoordinates),e&&e.editable&&(this.editable=e.editable)}updateSnappedCoordinate(t){const e=this.snapCoordinate(t);if(e){if(this.snappedPointId)this.store.updateGeometry([{id:this.snappedPointId,geometry:{type:\"Point\",coordinates:e}}]);else{const[t]=this.store.create([{geometry:{type:\"Point\",coordinates:e},properties:{mode:this.mode,[o.SNAPPING_POINT]:!0}}]);this.snappedPointId=t}t.lng=e[0],t.lat=e[1]}else this.snappedPointId&&(this.store.delete([this.snappedPointId]),this.snappedPointId=void 0);return e}close(){if(void 0===this.currentId)return;const t=this.store.getGeometryCopy(this.currentId);t.coordinates.pop(),this.updateGeometries([...t.coordinates],void 0,e.Commit),this.store.updateProperty([{id:this.currentId,property:o.CURRENTLY_DRAWING,value:void 0}]);const i=this.currentId;this.closingPointId&&this.store.delete([this.closingPointId]),this.snappedPointId&&this.store.delete([this.snappedPointId]),this.currentCoordinate=0,this.currentId=void 0,this.closingPointId=void 0,this.snappedPointId=void 0,this.lastCommittedCoordinates=void 0,\"drawing\"===this.state&&this.setStarted(),this.onFinish(i,{mode:this.mode,action:\"draw\"})}updateGeometries(t,e,i){if(!this.currentId)return;const o={type:\"LineString\",coordinates:t};if(this.validate&&!this.validate({type:\"Feature\",geometry:o},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:i}).valid)return;const s=[{id:this.currentId,geometry:o}];this.closingPointId&&e&&s.push({id:this.closingPointId,geometry:{type:\"Point\",coordinates:e}}),\"commit\"===i&&(this.lastCommittedCoordinates=o.coordinates),this.store.updateGeometry(s)}generateInsertCoordinates(t,e){if(!this.insertCoordinates||!this.lastCommittedCoordinates)throw new Error(\"Not able to insert coordinates\");if(\"amount\"!==this.insertCoordinates.strategy)throw new Error(\"Strategy does not exist\");const i=g(t,e)/(this.insertCoordinates.value+1);let o=[];return\"globe\"===this.projection?o=this.insertPoint.generateInsertionGeodesicCoordinates(t,e,i):\"web-mercator\"===this.projection&&(o=this.insertPoint.generateInsertionCoordinates(t,e,i)),o}createLine(t){const[e]=this.store.create([{geometry:{type:\"LineString\",coordinates:[t,t]},properties:{mode:this.mode,[o.CURRENTLY_DRAWING]:!0}}]);this.lastCommittedCoordinates=[t,t],this.currentId=e,this.currentCoordinate++,this.setDrawing()}firstUpdateToLine(t){if(!this.currentId)return;const i=this.store.getGeometryCopy(this.currentId).coordinates,[s]=this.store.create([{geometry:{type:\"Point\",coordinates:[...t]},properties:{mode:this.mode,[o.CLOSING_POINT]:!0}}]);this.closingPointId=s,this.setCursor(this.cursors.close);const n=[...i,t];this.updateGeometries(n,void 0,e.Commit),this.currentCoordinate++}updateToLine(t,i){if(!this.currentId)return;const o=this.store.getGeometryCopy(this.currentId).coordinates,[s,n]=this.lastCommittedCoordinates?this.lastCommittedCoordinates[this.lastCommittedCoordinates.length-1]:o[o.length-2],{x:r,y:a}=this.project(s,n);if(U({x:r,y:a},{x:i.x,y:i.y})<this.pointerDistance)return void this.close();this.setCursor(this.cursors.close);const d=[...o,t];this.updateGeometries(d,o[o.length-1],e.Commit),this.currentCoordinate++}registerBehaviors(t){this.coordinateSnapping=new q(t,new $(t),new H(t)),this.insertPoint=new nt(t),this.clickBoundingBox=new H(t),this.pixelDistance=new $(t),this.lineSnapping=new gt(t,this.pixelDistance,this.clickBoundingBox),this.coordinateSnapping=new q(t,this.pixelDistance,this.clickBoundingBox)}start(){this.setStarted(),this.setCursor(this.cursors.start)}stop(){this.cleanUp(),this.setStopped(),this.setCursor(\"unset\")}onMouseMove(t){this.mouseMove=!0,this.setCursor(this.cursors.start),this.lastMouseMoveEvent=t;const i=this.updateSnappedCoordinate(t)||[t.lng,t.lat];if(void 0===this.currentId||0===this.currentCoordinate)return;const o=this.store.getGeometryCopy(this.currentId).coordinates;if(o.pop(),this.closingPointId){const[e,i]=o[o.length-1],{x:s,y:n}=this.project(e,i);U({x:s,y:n},{x:t.containerX,y:t.containerY})<this.pointerDistance&&this.setCursor(this.cursors.close)}let s=[...o,i];if(this.insertCoordinates&&this.currentId&&this.lastCommittedCoordinates){const t=this.lastCommittedCoordinates[this.lastCommittedCoordinates.length-1],e=i;if(!rt(t,e)){const o=this.generateInsertCoordinates(t,e);s=[...this.lastCommittedCoordinates.slice(0,-1),...o,i]}}this.updateGeometries(s,void 0,e.Provisional)}onRightClick(t){if(!this.editable||\"started\"!==this.state)return;const{featureId:i,featureCoordinateIndex:o}=this.coordinateSnapping.getSnappable(t,t=>this.lineStringFilter(t));if(!i||void 0===o)return;const s=this.store.getGeometryCopy(i);let n;if(\"LineString\"===s.type&&(n=s.coordinates,!(n.length<=2))){if(n.splice(o,1),this.validate&&!this.validate({id:i,type:\"Feature\",geometry:s,properties:{}},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e.Commit}).valid)return;this.snappedPointId&&(this.store.delete([this.snappedPointId]),this.snappedPointId=void 0),this.store.updateGeometry([{id:i,geometry:s}]),this.onFinish(i,{mode:this.mode,action:\"edit\"})}}onLeftClick(t){this.snappedPointId&&(this.store.delete([this.snappedPointId]),this.snappedPointId=void 0);const e=this.snapCoordinate(t)||[t.lng,t.lat];0===this.currentCoordinate?this.createLine(e):1===this.currentCoordinate&&this.currentId?this.firstUpdateToLine(e):this.currentId&&this.updateToLine(e,{x:t.containerX,y:t.containerY})}onClick(t){(\"right\"===t.button&&this.allowPointerEvent(this.pointerEvents.rightClick,t)||\"left\"===t.button&&this.allowPointerEvent(this.pointerEvents.leftClick,t)||t.isContextMenu&&this.allowPointerEvent(this.pointerEvents.contextMenu,t))&&(this.currentCoordinate>0&&!this.mouseMove&&this.onMouseMove(t),this.mouseMove=!1,\"right\"===t.button?this.onRightClick(t):\"left\"===t.button&&this.onLeftClick(t))}onKeyDown(){}onKeyUp(t){t.key===this.keyEvents.cancel&&this.cleanUp(),t.key===this.keyEvents.finish&&this.close()}onDragStart(t,e){if(!this.allowPointerEvent(this.pointerEvents.onDragStart,t))return;if(!this.editable)return;let i;if(\"started\"===this.state){const e=this.lineSnapping.getSnappable(t,t=>this.lineStringFilter(t));e.coordinate&&(this.editedSnapType=\"line\",this.editedFeatureCoordinateIndex=e.featureCoordinateIndex,this.editedFeatureId=e.featureId,i=e.coordinate);const o=this.coordinateSnapping.getSnappable(t,t=>this.lineStringFilter(t));o.coordinate&&(this.editedSnapType=\"coordinate\",this.editedFeatureCoordinateIndex=o.featureCoordinateIndex,this.editedFeatureId=o.featureId,i=o.coordinate)}if(this.editedFeatureId&&i){if(!this.editedPointId){const[t]=this.store.create([{geometry:{type:\"Point\",coordinates:i},properties:{mode:this.mode,[o.EDITED]:!0}}]);this.editedPointId=t}this.setCursor(this.cursors.dragStart),e(!1)}}onDrag(t,i){if(!this.allowPointerEvent(this.pointerEvents.onDrag,t))return;if(void 0===this.editedFeatureId||void 0===this.editedFeatureCoordinateIndex)return;const s=this.store.getGeometryCopy(this.editedFeatureId);\"coordinate\"===this.editedSnapType||\"line\"===this.editedSnapType&&void 0!==this.editedInsertIndex?s.coordinates[this.editedFeatureCoordinateIndex]=[t.lng,t.lat]:\"line\"===this.editedSnapType&&void 0===this.editedInsertIndex&&(this.editedInsertIndex=this.editedFeatureCoordinateIndex+1,s.coordinates.splice(this.editedInsertIndex,0,[t.lng,t.lat]),this.editedFeatureCoordinateIndex++);const n={type:\"LineString\",coordinates:s.coordinates};this.validate&&!this.validate({type:\"Feature\",geometry:n,properties:this.store.getPropertiesCopy(this.editedFeatureId)},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e.Provisional}).valid||(this.snapping&&this.snappedPointId&&(this.store.delete([this.snappedPointId]),this.snappedPointId=void 0),this.store.updateGeometry([{id:this.editedFeatureId,geometry:n}]),this.editedPointId&&this.store.updateGeometry([{id:this.editedPointId,geometry:{type:\"Point\",coordinates:[t.lng,t.lat]}}]),this.store.updateProperty([{id:this.editedFeatureId,property:o.EDITED,value:!0}]))}onDragEnd(t,e){this.allowPointerEvent(this.pointerEvents.onDragEnd,t)&&void 0!==this.editedFeatureId&&(this.setCursor(this.cursors.dragEnd),this.editedPointId&&(this.store.delete([this.editedPointId]),this.editedPointId=void 0),this.store.updateProperty([{id:this.editedFeatureId,property:o.EDITED,value:!1}]),this.onFinish(this.editedFeatureId,{mode:this.mode,action:\"edit\"}),this.editedFeatureId=void 0,this.editedFeatureCoordinateIndex=void 0,this.editedInsertIndex=void 0,this.editedSnapType=void 0,e(!0))}cleanUp(){const t=this.currentId,e=this.closingPointId,i=this.snappedPointId;this.closingPointId=void 0,this.snappedPointId=void 0,this.currentId=void 0,this.currentCoordinate=0,\"drawing\"===this.state&&this.setStarted();try{void 0!==t&&this.store.delete([t]),void 0!==i&&this.store.delete([i]),void 0!==e&&this.store.delete([e])}catch(t){}}styleFeature(e){const i=t({},{polygonFillColor:\"#3f97e0\",polygonOutlineColor:\"#3f97e0\",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:\"#3f97e0\",pointOutlineColor:\"#ffffff\",pointOutlineWidth:0,pointWidth:6,lineStringColor:\"#3f97e0\",lineStringWidth:4,zIndex:0});if(\"Feature\"===e.type&&\"LineString\"===e.geometry.type&&e.properties.mode===this.mode)return i.lineStringColor=this.getHexColorStylingValue(this.styles.lineStringColor,i.lineStringColor,e),i.lineStringWidth=this.getNumericStylingValue(this.styles.lineStringWidth,i.lineStringWidth,e),i.zIndex=s,i;if(\"Feature\"===e.type&&\"Point\"===e.geometry.type&&e.properties.mode===this.mode){const t=e.properties[o.CLOSING_POINT];return i.pointColor=this.getHexColorStylingValue(t?this.styles.closingPointColor:this.styles.snappingPointColor,i.pointColor,e),i.pointWidth=this.getNumericStylingValue(t?this.styles.closingPointWidth:this.styles.snappingPointWidth,i.pointWidth,e),i.pointOutlineColor=this.getHexColorStylingValue(t?this.styles.closingPointOutlineColor:this.styles.snappingPointOutlineColor,\"#ffffff\",e),i.pointOutlineWidth=this.getNumericStylingValue(t?this.styles.closingPointOutlineWidth:this.styles.snappingPointOutlineWidth,2,e),i.zIndex=50,i}return i}validateFeature(t){return this.validateModeFeature(t,t=>at(t,this.coordinatePrecision))}lineStringFilter(t){return Boolean(\"LineString\"===t.geometry.type&&t.properties&&t.properties.mode===this.mode)}snapCoordinate(t){var e,i,o;let s;if(null!=(e=this.snapping)&&e.toLine){let e;e=this.currentId?this.lineSnapping.getSnappableCoordinate(t,this.currentId):this.lineSnapping.getSnappableCoordinateFirstClick(t),e&&(s=e)}return null!=(i=this.snapping)&&i.toCoordinate&&(s=this.currentId?this.coordinateSnapping.getSnappableCoordinate(t,this.currentId):this.coordinateSnapping.getSnappableCoordinateFirstClick(t)),null!=(o=this.snapping)&&o.toCustom&&(s=this.snapping.toCustom(t,{currentCoordinate:this.currentCoordinate,currentId:this.currentId,getCurrentGeometrySnapshot:this.currentId?()=>this.store.getGeometryCopy(this.currentId):()=>null,project:this.project,unproject:this.unproject})),s}afterFeatureUpdated(t){this.editedFeatureId===t.id&&this.editedPointId&&(this.store.delete([this.editedPointId]),this.editedPointId=void 0,this.editedFeatureId=void 0,this.editedFeatureCoordinateIndex=void 0,this.editedSnapType=void 0),this.snappedPointId&&this.lastMouseMoveEvent&&this.updateSnappedCoordinate(this.lastMouseMoveEvent),this.currentId===t.id&&(this.closingPointId&&(this.store.delete([this.closingPointId]),this.closingPointId=void 0),this.currentCoordinate=0,this.currentId=void 0,\"drawing\"===this.state&&this.setStarted())}}const vt=\"Feature is not a Point\",Ct=\"Feature has invalid coordinates\",Pt=\"Feature has coordinates with excessive precision\";function It(t,e){return\"Point\"!==t.geometry.type?{valid:!1,reason:vt}:_(t.geometry.coordinates)?O(t.geometry.coordinates,e)?{valid:!0}:{valid:!1,reason:Pt}:{valid:!1,reason:Ct}}const xt={create:\"crosshair\",dragStart:\"grabbing\",dragEnd:\"crosshair\"};class Et extends u{constructor(t){super(t,!0),this.mode=\"point\",this.cursors=xt,this.editable=!1,this.editedFeatureId=void 0,this.pixelDistance=void 0,this.clickBoundingBox=void 0,this.updateOptions(t)}updateOptions(e){super.updateOptions(e),null!=e&&e.cursors&&(this.cursors=t({},this.cursors,e.cursors)),null!=e&&e.editable&&(this.editable=e.editable)}start(){this.setStarted(),this.setCursor(this.cursors.create)}stop(){this.cleanUp(),this.setStopped(),this.setCursor(\"unset\")}onClick(t){\"right\"===t.button&&this.allowPointerEvent(this.pointerEvents.rightClick,t)||t.isContextMenu&&this.allowPointerEvent(this.pointerEvents.contextMenu,t)?this.onRightClick(t):\"left\"===t.button&&this.allowPointerEvent(this.pointerEvents.leftClick,t)&&this.onLeftClick(t)}onMouseMove(){}onKeyDown(){}onKeyUp(){}cleanUp(){this.editedFeatureId=void 0}onDragStart(t,e){if(this.allowPointerEvent(this.pointerEvents.onDragStart,t)){if(this.editable){const e=this.getNearestPointFeature(t);this.editedFeatureId=null==e?void 0:e.id}this.editedFeatureId&&(this.setCursor(this.cursors.dragStart),e(!1))}}onDrag(t,i){this.allowPointerEvent(this.pointerEvents.onDrag,t)&&void 0!==this.editedFeatureId&&(this.validate&&!this.validate({type:\"Feature\",geometry:{type:\"Point\",coordinates:[t.lng,t.lat]},properties:this.store.getPropertiesCopy(this.editedFeatureId)},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e.Finish}).valid||(this.store.updateGeometry([{id:this.editedFeatureId,geometry:{type:\"Point\",coordinates:[t.lng,t.lat]}}]),this.store.updateProperty([{id:this.editedFeatureId,property:o.EDITED,value:!0}])))}onDragEnd(t,e){this.allowPointerEvent(this.pointerEvents.onDragEnd,t)&&void 0!==this.editedFeatureId&&(this.onFinish(this.editedFeatureId,{mode:this.mode,action:\"edit\"}),this.setCursor(this.cursors.dragEnd),this.store.updateProperty([{id:this.editedFeatureId,property:o.EDITED,value:!1}]),this.editedFeatureId=void 0,e(!0))}registerBehaviors(t){this.pixelDistance=new $(t),this.clickBoundingBox=new H(t)}styleFeature(e){const i=t({},{polygonFillColor:\"#3f97e0\",polygonOutlineColor:\"#3f97e0\",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:\"#3f97e0\",pointOutlineColor:\"#ffffff\",pointOutlineWidth:0,pointWidth:6,lineStringColor:\"#3f97e0\",lineStringWidth:4,zIndex:0});if(\"Feature\"===e.type&&\"Point\"===e.geometry.type&&e.properties.mode===this.mode){const t=Boolean(e.id&&this.editedFeatureId===e.id);i.pointWidth=this.getNumericStylingValue(t?this.styles.editedPointWidth:this.styles.pointWidth,i.pointWidth,e),i.pointColor=this.getHexColorStylingValue(t?this.styles.editedPointColor:this.styles.pointColor,i.pointColor,e),i.pointOutlineColor=this.getHexColorStylingValue(t?this.styles.editedPointOutlineColor:this.styles.pointOutlineColor,i.pointOutlineColor,e),i.pointOutlineWidth=this.getNumericStylingValue(t?this.styles.editedPointOutlineWidth:this.styles.pointOutlineWidth,2,e),i.zIndex=30}return i}validateFeature(t){return this.validateModeFeature(t,t=>It(t,this.coordinatePrecision))}onLeftClick(t){const i={type:\"Point\",coordinates:[t.lng,t.lat]},o={mode:this.mode};if(this.validate&&!this.validate({type:\"Feature\",geometry:i,properties:o},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e.Finish}).valid)return;const[s]=this.store.create([{geometry:i,properties:o}]);this.onFinish(s,{mode:this.mode,action:\"draw\"})}onRightClick(t){if(!this.editable)return;const e=this.getNearestPointFeature(t);e&&this.store.delete([e.id])}getNearestPointFeature(t){const e=this.clickBoundingBox.create(t),i=this.store.search(e);let o,s=Infinity;for(let e=0;e<i.length;e++){const n=i[e];if(\"Point\"!==n.geometry.type||n.properties.mode!==this.mode)continue;const r=this.pixelDistance.measure(t,n.geometry.coordinates);r>s||r>this.pointerDistance||(s=r,o=n)}return o}afterFeatureUpdated(t){this.editedFeatureId===t.id&&(this.editedFeatureId=void 0,this.setCursor(this.cursors.create))}}class St extends z{constructor(t,e){super(t),this.config=void 0,this.pixelDistance=void 0,this._startEndPoints=[],this.config=t,this.pixelDistance=e}get ids(){return this._startEndPoints.concat()}set ids(t){}create(t,e){if(this.ids.length)throw new Error(\"Opening and closing points already created\");if(t.length<=3)throw new Error(\"Requires at least 4 coordinates\");this._startEndPoints=this.store.create([{geometry:{type:\"Point\",coordinates:t[0]},properties:{mode:e,[o.CLOSING_POINT]:!0}},{geometry:{type:\"Point\",coordinates:t[t.length-2]},properties:{mode:e,[o.CLOSING_POINT]:!0}}])}delete(){this.ids.length&&(this.store.delete(this.ids),this._startEndPoints=[])}update(t){if(2!==this.ids.length)throw new Error(\"No closing points to update\");this.store.updateGeometry([{id:this.ids[0],geometry:{type:\"Point\",coordinates:t[0]}},{id:this.ids[1],geometry:{type:\"Point\",coordinates:t[t.length-3]}}])}isClosingPoint(t){const e=this.store.getGeometryCopy(this.ids[0]),i=this.store.getGeometryCopy(this.ids[1]),o=this.pixelDistance.measure(t,e.coordinates),s=this.pixelDistance.measure(t,i.coordinates);return{isClosing:o<this.pointerDistance,isPreviousClosing:s<this.pointerDistance}}}class Mt extends z{constructor(t){super(t)}createOrUpdate(t){const e=this.store.getGeometryCopy(t),i=this.store.getPropertiesCopy(t);let o;if(\"Polygon\"===e.type)o=e.coordinates[0].slice(0,-1);else{if(\"LineString\"!==e.type)return;o=e.coordinates}const s=this.store.getPropertiesCopy(t),n=s.coordinatePointIds;if(n)if(n&&n.every(t=>this.store.has(t))){const e=s.coordinatePointIds,n=e.map(t=>this.store.getGeometryCopy(t).coordinates);if(e.length!==o.length){this.deleteCoordinatePoints(e);const s=this.createPoints(o,i.mode,t);this.setFeatureCoordinatePoints(t,s)}else o.forEach((t,i)=>{t[0]===n[i][0]&&t[1]===n[i][1]||this.store.updateGeometry([{id:e[i],geometry:{type:\"Point\",coordinates:t}}])})}else{const e=n.filter(t=>this.store.has(t));e.length&&this.deleteCoordinatePoints(e);const s=this.createPoints(o,i.mode,t);this.setFeatureCoordinatePoints(t,s)}else{const e=this.createPoints(o,i.mode,t);this.setFeatureCoordinatePoints(t,e)}}deletePointsByFeatureIds(t){for(const e of t)this.deleteIfPresent(e)}getUpdated(e,i){const o=this.store.getPropertiesCopy(e);if(o.coordinatePointIds)return o.coordinatePointIds.map((e,o)=>({id:e,geometry:t({},this.store.getGeometryCopy(e),{coordinates:i[o]})}))}createPoints(t,e,i){return this.store.create(t.map((t,s)=>({geometry:{type:\"Point\",coordinates:t},properties:{mode:e,[o.COORDINATE_POINT]:!0,[o.COORDINATE_POINT_FEATURE_ID]:i,index:s}})))}setFeatureCoordinatePoints(t,e){this.store.updateProperty([{id:t,property:o.COORDINATE_POINT_IDS,value:e}])}deleteCoordinatePoints(t){const e=t.filter(t=>this.store.has(t));this.store.delete(e)}deleteIfPresent(t){const e=this.store.getPropertiesCopy(t).coordinatePointIds;e&&(this.deleteCoordinatePoints(e),this.setFeatureCoordinatePoints(t,null))}}const Ft={cancel:\"Escape\",finish:\"Enter\"},Dt={start:\"crosshair\",close:\"pointer\",dragStart:\"grabbing\",dragEnd:\"crosshair\"};class wt extends u{constructor(t){super(t,!0),this.mode=\"polygon\",this.currentCoordinate=0,this.currentId=void 0,this.keyEvents=Ft,this.cursors=Dt,this.mouseMove=!1,this.showCoordinatePoints=!1,this.lastMouseMoveEvent=void 0,this.snapping=void 0,this.snappedPointId=void 0,this.editable=!1,this.editedFeatureId=void 0,this.editedFeatureCoordinateIndex=void 0,this.editedSnapType=void 0,this.editedInsertIndex=void 0,this.editedPointId=void 0,this.coordinatePoints=void 0,this.lineSnapping=void 0,this.coordinateSnapping=void 0,this.pixelDistance=void 0,this.closingPoints=void 0,this.clickBoundingBox=void 0,this.updateOptions(t)}updateOptions(e){if(super.updateOptions(e),null!=e&&e.cursors&&(this.cursors=t({},this.cursors,e.cursors)),null===(null==e?void 0:e.keyEvents)?this.keyEvents={cancel:null,finish:null}:null!=e&&e.keyEvents&&(this.keyEvents=t({},this.keyEvents,e.keyEvents)),null!=e&&e.snapping&&(this.snapping=e.snapping),void 0!==(null==e?void 0:e.editable)&&(this.editable=e.editable),void 0!==(null==e?void 0:e.pointerEvents)&&(this.pointerEvents=e.pointerEvents),void 0!==(null==e?void 0:e.showCoordinatePoints))if(this.showCoordinatePoints=e.showCoordinatePoints,this.coordinatePoints&&!0===e.showCoordinatePoints)this.store.copyAllWhere(t=>t.mode===this.mode).map(t=>t.id).forEach(t=>{this.coordinatePoints.createOrUpdate(t)});else if(this.coordinatePoints&&!1===this.showCoordinatePoints){const t=this.store.copyAllWhere(t=>t.mode===this.mode&&Boolean(t[o.COORDINATE_POINT_IDS]));this.coordinatePoints.deletePointsByFeatureIds(t.map(t=>t.id))}}close(){if(void 0===this.currentId)return;const t=this.store.getGeometryCopy(this.currentId).coordinates[0];if(t.length<5)return;if(!this.updatePolygonGeometry([...t.slice(0,-2),t[0]],e.Finish))return;const i=this.currentId;if(this.currentId){const t=A(this.store.getGeometryCopy(this.currentId));t&&(this.store.updateGeometry([{id:this.currentId,geometry:t}]),this.showCoordinatePoints&&this.coordinatePoints.createOrUpdate(this.currentId)),this.store.updateProperty([{id:this.currentId,property:o.CURRENTLY_DRAWING,value:void 0},{id:this.currentId,property:o.COMMITTED_COORDINATE_COUNT,value:void 0},{id:this.currentId,property:o.PROVISIONAL_COORDINATE_COUNT,value:void 0}])}this.snappedPointId&&this.store.delete([this.snappedPointId]),this.currentCoordinate=0,this.currentId=void 0,this.snappedPointId=void 0,this.closingPoints.delete(),\"drawing\"===this.state&&this.setStarted(),this.onFinish(i,{mode:this.mode,action:\"draw\"})}registerBehaviors(t){this.clickBoundingBox=new H(t),this.pixelDistance=new $(t),this.lineSnapping=new gt(t,this.pixelDistance,this.clickBoundingBox),this.coordinateSnapping=new q(t,this.pixelDistance,this.clickBoundingBox),this.closingPoints=new St(t,this.pixelDistance),this.coordinatePoints=new Mt(t)}start(){this.setStarted(),this.setCursor(this.cursors.start)}stop(){this.cleanUp(),this.setStopped(),this.setCursor(\"unset\")}updateSnappedCoordinate(t){const e=this.snapCoordinate(t);if(e){if(this.snappedPointId)this.store.updateGeometry([{id:this.snappedPointId,geometry:{type:\"Point\",coordinates:e}}]);else{const[t]=this.store.create([{geometry:{type:\"Point\",coordinates:e},properties:{mode:this.mode,[o.SNAPPING_POINT]:!0}}]);this.snappedPointId=t}t.lng=e[0],t.lat=e[1]}else this.snappedPointId&&(this.store.delete([this.snappedPointId]),this.snappedPointId=void 0)}onMouseMove(t){if(this.mouseMove=!0,this.setCursor(this.cursors.start),this.lastMouseMoveEvent=t,this.updateSnappedCoordinate(t),void 0===this.currentId||0===this.currentCoordinate)return;const i=this.store.getGeometryCopy(this.currentId).coordinates[0];let s;if(1===this.currentCoordinate){const e=1/Math.pow(10,this.coordinatePrecision-1),o=Math.max(1e-6,e);s=[i[0],[t.lng,t.lat],[t.lng,t.lat-o],i[0]]}else if(2===this.currentCoordinate)s=[i[0],i[1],[t.lng,t.lat],i[0]];else{const{isClosing:e,isPreviousClosing:o}=this.closingPoints.isClosingPoint(t);o||e?(this.snappedPointId&&(this.store.delete([this.snappedPointId]),this.snappedPointId=void 0),this.setCursor(this.cursors.close),s=[...i.slice(0,-2),i[0],i[0]]):s=[...i.slice(0,-2),[t.lng,t.lat],i[0]]}this.store.updateProperty([{id:this.currentId,property:o.PROVISIONAL_COORDINATE_COUNT,value:this.currentCoordinate+1}]),this.updatePolygonGeometry(s,e.Provisional)}updatePolygonGeometry(t,e){if(!this.currentId)return!1;const i={type:\"Polygon\",coordinates:[t]};return!(this.validate&&!this.validate({type:\"Feature\",geometry:i},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e}).valid||(this.store.updateGeometry([{id:this.currentId,geometry:i}]),this.showCoordinatePoints&&this.coordinatePoints.createOrUpdate(this.currentId),0))}snapCoordinate(t){var e,i,o;let s;if(null!=(e=this.snapping)&&e.toLine){let e;e=this.currentId?this.lineSnapping.getSnappableCoordinate(t,this.currentId):this.lineSnapping.getSnappableCoordinateFirstClick(t),e&&(s=e)}if(null!=(i=this.snapping)&&i.toCoordinate){let e;e=this.currentId?this.coordinateSnapping.getSnappableCoordinate(t,this.currentId):this.coordinateSnapping.getSnappableCoordinateFirstClick(t),e&&(s=e)}return null!=(o=this.snapping)&&o.toCustom&&(s=this.snapping.toCustom(t,{currentCoordinate:this.currentCoordinate,currentId:this.currentId,getCurrentGeometrySnapshot:this.currentId?()=>this.store.getGeometryCopy(this.currentId):()=>null,project:this.project,unproject:this.unproject})),s}polygonFilter(t){return Boolean(\"Polygon\"===t.geometry.type&&t.properties&&t.properties.mode===this.mode)}onRightClick(t){if(!this.editable||\"started\"!==this.state)return;const{featureId:i,featureCoordinateIndex:o}=this.coordinateSnapping.getSnappable(t,t=>this.polygonFilter(t));if(!i||void 0===o)return;const s=this.store.getGeometryCopy(i);let n;\"Polygon\"===s.type&&(n=s.coordinates[0],n.length<=4||(\"Polygon\"!==s.type||0!==o&&o!==n.length-1?n.splice(o,1):(n.shift(),n.pop(),n.push([n[0][0],n[0][1]])),(!this.validate||this.validate({id:i,type:\"Feature\",geometry:s,properties:{}},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e.Commit}).valid)&&(this.snappedPointId&&(this.store.delete([this.snappedPointId]),this.snappedPointId=void 0),this.store.updateGeometry([{id:i,geometry:s}]),this.showCoordinatePoints&&this.coordinatePoints.createOrUpdate(i),this.onFinish(i,{mode:this.mode,action:\"edit\"}))))}onLeftClick(t){if(this.snappedPointId&&(this.store.delete([this.snappedPointId]),this.snappedPointId=void 0),0===this.currentCoordinate){const e=this.snapCoordinate(t);e&&(t.lng=e[0],t.lat=e[1]);const[i]=this.store.create([{geometry:{type:\"Polygon\",coordinates:[[[t.lng,t.lat],[t.lng,t.lat],[t.lng,t.lat],[t.lng,t.lat]]]},properties:{mode:this.mode,[o.CURRENTLY_DRAWING]:!0,[o.COMMITTED_COORDINATE_COUNT]:this.currentCoordinate+1,[o.PROVISIONAL_COORDINATE_COUNT]:this.currentCoordinate+1}}]);this.currentId=i,this.currentCoordinate++,this.showCoordinatePoints&&this.coordinatePoints.createOrUpdate(i),this.setDrawing()}else if(1===this.currentCoordinate&&this.currentId){const i=this.snapCoordinate(t);i&&(t.lng=i[0],t.lat=i[1]);const s=this.store.getGeometryCopy(this.currentId);if(rt([t.lng,t.lat],s.coordinates[0][0]))return;if(!this.updatePolygonGeometry([s.coordinates[0][0],[t.lng,t.lat],[t.lng,t.lat],s.coordinates[0][0]],e.Commit))return;this.store.updateProperty([{id:this.currentId,property:o.COMMITTED_COORDINATE_COUNT,value:this.currentCoordinate+1}]),this.currentCoordinate++}else if(2===this.currentCoordinate&&this.currentId){const i=this.snapCoordinate(t);i&&(t.lng=i[0],t.lat=i[1]);const s=this.store.getGeometryCopy(this.currentId).coordinates[0];if(rt([t.lng,t.lat],s[1]))return;if(!this.updatePolygonGeometry([s[0],s[1],[t.lng,t.lat],[t.lng,t.lat],s[0]],e.Commit))return;2===this.currentCoordinate&&this.closingPoints.create(s,\"polygon\"),this.store.updateProperty([{id:this.currentId,property:o.COMMITTED_COORDINATE_COUNT,value:this.currentCoordinate+1}]),this.currentCoordinate++}else if(this.currentId){const i=this.store.getGeometryCopy(this.currentId).coordinates[0],{isClosing:s,isPreviousClosing:n}=this.closingPoints.isClosingPoint(t);if(n||s)this.close();else{const s=this.snapCoordinate(t);if(s&&(t.lng=s[0],t.lat=s[1]),rt([t.lng,t.lat],i[this.currentCoordinate-1]))return;const n=function(t=[[[0,0],[0,1],[1,1],[1,0],[0,0]]]){return{type:\"Feature\",geometry:{type:\"Polygon\",coordinates:t},properties:{}}}([[...i.slice(0,-1),[t.lng,t.lat],i[0]]]);if(!this.updatePolygonGeometry(n.geometry.coordinates[0],e.Commit))return;this.store.updateProperty([{id:this.currentId,property:o.COMMITTED_COORDINATE_COUNT,value:this.currentCoordinate+1}]),this.currentCoordinate++,this.closingPoints.ids.length&&this.closingPoints.update(n.geometry.coordinates[0])}}}onClick(t){this.currentCoordinate>0&&!this.mouseMove&&this.onMouseMove(t),this.mouseMove=!1,\"right\"===t.button&&this.allowPointerEvent(this.pointerEvents.rightClick,t)||t.isContextMenu&&this.allowPointerEvent(this.pointerEvents.contextMenu,t)?this.onRightClick(t):\"left\"===t.button&&this.allowPointerEvent(this.pointerEvents.leftClick,t)&&this.onLeftClick(t)}onKeyUp(t){t.key===this.keyEvents.cancel?this.cleanUp():t.key===this.keyEvents.finish&&this.close()}onKeyDown(){}onDragStart(t,e){if(!this.allowPointerEvent(this.pointerEvents.onDragStart,t))return;if(!this.editable)return;let i;if(\"started\"===this.state){const e=this.lineSnapping.getSnappable(t,t=>this.polygonFilter(t));e.coordinate&&(this.editedSnapType=\"line\",this.editedFeatureCoordinateIndex=e.featureCoordinateIndex,this.editedFeatureId=e.featureId,i=e.coordinate);const o=this.coordinateSnapping.getSnappable(t,t=>this.polygonFilter(t));o.coordinate&&(this.editedSnapType=\"coordinate\",this.editedFeatureCoordinateIndex=o.featureCoordinateIndex,this.editedFeatureId=o.featureId,i=o.coordinate)}if(this.editedFeatureId&&i){if(!this.editedPointId){const[t]=this.store.create([{geometry:{type:\"Point\",coordinates:i},properties:{mode:this.mode,[o.EDITED]:!0}}]);this.editedPointId=t}this.setCursor(this.cursors.dragStart),e(!1)}}onDrag(t,i){if(!this.allowPointerEvent(this.pointerEvents.onDrag,t))return;if(void 0===this.editedFeatureId||void 0===this.editedFeatureCoordinateIndex)return;const s=this.store.getGeometryCopy(this.editedFeatureId),n=s.coordinates[0];\"coordinate\"===this.editedSnapType||\"line\"===this.editedSnapType&&void 0!==this.editedInsertIndex?0===this.editedFeatureCoordinateIndex||this.editedFeatureCoordinateIndex===s.coordinates[0].length-1?(n[0]=[t.lng,t.lat],n[n.length-1]=[t.lng,t.lat]):n[this.editedFeatureCoordinateIndex]=[t.lng,t.lat]:\"line\"===this.editedSnapType&&void 0===this.editedInsertIndex&&(this.editedInsertIndex=this.editedFeatureCoordinateIndex+1,s.coordinates[0].splice(this.editedInsertIndex,0,[t.lng,t.lat]),this.editedFeatureCoordinateIndex++);const r={type:\"Polygon\",coordinates:s.coordinates};this.validate&&!this.validate({type:\"Feature\",geometry:r,properties:this.store.getPropertiesCopy(this.editedFeatureId)},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e.Provisional}).valid||(this.snapping&&this.snappedPointId&&(this.store.delete([this.snappedPointId]),this.snappedPointId=void 0),this.store.updateGeometry([{id:this.editedFeatureId,geometry:r}]),this.showCoordinatePoints&&this.coordinatePoints.createOrUpdate(this.editedFeatureId),this.editedPointId&&this.store.updateGeometry([{id:this.editedPointId,geometry:{type:\"Point\",coordinates:[t.lng,t.lat]}}]),this.store.updateProperty([{id:this.editedFeatureId,property:o.EDITED,value:!0}]))}onDragEnd(t,e){this.allowPointerEvent(this.pointerEvents.onDragEnd,t)&&void 0!==this.editedFeatureId&&(this.setCursor(this.cursors.dragEnd),this.editedPointId&&(this.store.delete([this.editedPointId]),this.editedPointId=void 0),this.store.updateProperty([{id:this.editedFeatureId,property:o.EDITED,value:!1}]),this.onFinish(this.editedFeatureId,{mode:this.mode,action:\"edit\"}),this.editedFeatureId=void 0,this.editedFeatureCoordinateIndex=void 0,this.editedInsertIndex=void 0,this.editedSnapType=void 0,e(!0))}cleanUp(){const t=this.currentId,e=this.snappedPointId,i=this.editedPointId;this.currentId=void 0,this.snappedPointId=void 0,this.editedPointId=void 0,this.editedFeatureId=void 0,this.editedFeatureCoordinateIndex=void 0,this.editedInsertIndex=void 0,this.editedSnapType=void 0,this.currentCoordinate=0,\"drawing\"===this.state&&this.setStarted();try{t&&this.coordinatePoints.deletePointsByFeatureIds([t]),void 0!==t&&this.store.delete([t]),void 0!==i&&this.store.delete([i]),void 0!==e&&this.store.delete([e]),this.closingPoints.ids.length&&this.closingPoints.delete()}catch(t){}}styleFeature(e){const i=t({},{polygonFillColor:\"#3f97e0\",polygonOutlineColor:\"#3f97e0\",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:\"#3f97e0\",pointOutlineColor:\"#ffffff\",pointOutlineWidth:0,pointWidth:6,lineStringColor:\"#3f97e0\",lineStringWidth:4,zIndex:0});if(e.properties.mode===this.mode){if(\"Polygon\"===e.geometry.type)return i.polygonFillColor=this.getHexColorStylingValue(this.styles.fillColor,i.polygonFillColor,e),i.polygonOutlineColor=this.getHexColorStylingValue(this.styles.outlineColor,i.polygonOutlineColor,e),i.polygonOutlineWidth=this.getNumericStylingValue(this.styles.outlineWidth,i.polygonOutlineWidth,e),i.polygonFillOpacity=this.getNumericStylingValue(this.styles.fillOpacity,i.polygonFillOpacity,e),i.zIndex=s,i;if(\"Point\"===e.geometry.type){const t=e.properties[o.EDITED],s=e.properties[o.COORDINATE_POINT],n=t?\"editedPoint\":e.properties[o.CLOSING_POINT]?\"closingPoint\":e.properties[o.SNAPPING_POINT]?\"snappingPoint\":s?\"coordinatePoint\":void 0;if(!n)return i;const r={editedPoint:{width:this.styles.editedPointOutlineWidth,color:this.styles.editedPointColor,outlineColor:this.styles.editedPointOutlineColor,outlineWidth:this.styles.editedPointOutlineWidth},closingPoint:{width:this.styles.closingPointWidth,color:this.styles.closingPointColor,outlineColor:this.styles.closingPointOutlineColor,outlineWidth:this.styles.closingPointOutlineWidth},snappingPoint:{width:this.styles.snappingPointWidth,color:this.styles.snappingPointColor,outlineColor:this.styles.snappingPointOutlineColor,outlineWidth:this.styles.snappingPointOutlineWidth},coordinatePoint:{width:this.styles.coordinatePointWidth,color:this.styles.coordinatePointColor,outlineColor:this.styles.coordinatePointOutlineColor,outlineWidth:this.styles.coordinatePointOutlineWidth}};return i.pointWidth=this.getNumericStylingValue(r[n].width,i.pointWidth,e),i.pointColor=this.getHexColorStylingValue(r[n].color,i.pointColor,e),i.pointOutlineColor=this.getHexColorStylingValue(r[n].outlineColor,i.pointOutlineColor,e),i.pointOutlineWidth=this.getNumericStylingValue(r[n].outlineWidth,2,e),i.zIndex=t?40:s?20:30,i}}return i}afterFeatureAdded(t){this.showCoordinatePoints&&this.coordinatePoints.createOrUpdate(t.id)}afterFeatureUpdated(t){this.showCoordinatePoints&&this.coordinatePoints.createOrUpdate(t.id),this.editedFeatureId===t.id&&this.editedPointId&&(this.store.delete([this.editedPointId]),this.editedPointId=void 0,this.editedFeatureId=void 0,this.editedFeatureCoordinateIndex=void 0,this.editedSnapType=void 0),this.snappedPointId&&this.lastMouseMoveEvent&&this.updateSnappedCoordinate(this.lastMouseMoveEvent),this.currentId===t.id&&(this.currentCoordinate=0,this.currentId=void 0,this.closingPoints.delete(),\"drawing\"===this.state&&this.setStarted())}validateFeature(t){return this.validateModeFeature(t,t=>W(t,this.coordinatePrecision))}}const Ot={cancel:\"Escape\",finish:\"Enter\"},_t={start:\"crosshair\"};class bt extends u{constructor(t){super(t,!0),this.mode=\"rectangle\",this.center=void 0,this.clickCount=0,this.currentRectangleId=void 0,this.keyEvents=Ot,this.cursors=_t,this.updateOptions(t)}updateOptions(e){super.updateOptions(e),null!=e&&e.cursors&&(this.cursors=t({},this.cursors,e.cursors)),null===(null==e?void 0:e.keyEvents)?this.keyEvents={cancel:null,finish:null}:null!=e&&e.keyEvents&&(this.keyEvents=t({},this.keyEvents,e.keyEvents))}updateRectangle(t,e){if(1===this.clickCount&&this.center&&this.currentRectangleId){const i=this.store.getGeometryCopy(this.currentRectangleId).coordinates[0][0],o={type:\"Polygon\",coordinates:[[i,[t.lng,i[1]],[t.lng,t.lat],[i[0],t.lat],i]]};if(this.validate&&!this.validate({id:this.currentRectangleId,geometry:o},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e}).valid)return;this.store.updateGeometry([{id:this.currentRectangleId,geometry:o}])}}close(){const t=this.currentRectangleId;if(t){const e=A(this.store.getGeometryCopy(t));e&&this.store.updateGeometry([{id:t,geometry:e}]),this.store.updateProperty([{id:t,property:o.CURRENTLY_DRAWING,value:void 0}])}this.center=void 0,this.currentRectangleId=void 0,this.clickCount=0,\"drawing\"===this.state&&this.setStarted(),void 0!==t&&this.onFinish(t,{mode:this.mode,action:\"draw\"})}start(){this.setStarted(),this.setCursor(this.cursors.start)}stop(){this.cleanUp(),this.setStopped(),this.setCursor(\"unset\")}onClick(t){if(\"right\"===t.button&&this.allowPointerEvent(this.pointerEvents.rightClick,t)||\"left\"===t.button&&this.allowPointerEvent(this.pointerEvents.leftClick,t)||t.isContextMenu&&this.allowPointerEvent(this.pointerEvents.contextMenu,t))if(0===this.clickCount){this.center=[t.lng,t.lat];const[e]=this.store.create([{geometry:{type:\"Polygon\",coordinates:[[[t.lng,t.lat],[t.lng,t.lat],[t.lng,t.lat],[t.lng,t.lat]]]},properties:{mode:this.mode,[o.CURRENTLY_DRAWING]:!0}}]);this.currentRectangleId=e,this.clickCount++,this.setDrawing()}else this.updateRectangle(t,e.Finish),this.close()}onMouseMove(t){this.updateRectangle(t,e.Provisional)}onKeyDown(){}onKeyUp(t){t.key===this.keyEvents.cancel?this.cleanUp():t.key===this.keyEvents.finish&&this.close()}onDragStart(){}onDrag(){}onDragEnd(){}cleanUp(){const t=this.currentRectangleId;this.center=void 0,this.currentRectangleId=void 0,this.clickCount=0,\"drawing\"===this.state&&this.setStarted(),void 0!==t&&this.store.delete([t])}styleFeature(e){const i=t({},{polygonFillColor:\"#3f97e0\",polygonOutlineColor:\"#3f97e0\",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:\"#3f97e0\",pointOutlineColor:\"#ffffff\",pointOutlineWidth:0,pointWidth:6,lineStringColor:\"#3f97e0\",lineStringWidth:4,zIndex:0});return\"Feature\"===e.type&&\"Polygon\"===e.geometry.type&&e.properties.mode===this.mode?(i.polygonFillColor=this.getHexColorStylingValue(this.styles.fillColor,i.polygonFillColor,e),i.polygonOutlineColor=this.getHexColorStylingValue(this.styles.outlineColor,i.polygonOutlineColor,e),i.polygonOutlineWidth=this.getNumericStylingValue(this.styles.outlineWidth,i.polygonOutlineWidth,e),i.polygonFillOpacity=this.getNumericStylingValue(this.styles.fillOpacity,i.polygonFillOpacity,e),i.zIndex=s,i):i}validateFeature(t){return this.validateModeFeature(t,t=>B(t,this.coordinatePrecision))}afterFeatureUpdated(t){this.currentRectangleId===t.id&&(this.center=void 0,this.currentRectangleId=void 0,this.clickCount=0,\"drawing\"===this.state&&this.setStarted())}}class kt extends u{constructor(t){if(!t.modeName)throw new Error(\"Mode name is required for TerraDrawRenderMode\");super(t,!0),this.type=l.Render,this.mode=\"render\",this.updateOptions(t)}updateOptions(t){super.updateOptions(t),null!=t&&t.modeName&&(this.mode=t.modeName)}registerBehaviors(t){this.mode=t.mode}start(){this.setStarted()}stop(){this.setStopped()}onKeyUp(){}onKeyDown(){}onClick(){}onDragStart(){}onDrag(){}onDragEnd(){}onMouseMove(){}cleanUp(){}styleFeature(t){return{pointColor:this.getHexColorStylingValue(this.styles.pointColor,\"#3f97e0\",t),pointWidth:this.getNumericStylingValue(this.styles.pointWidth,6,t),pointOutlineColor:this.getHexColorStylingValue(this.styles.pointOutlineColor,\"#ffffff\",t),pointOutlineWidth:this.getNumericStylingValue(this.styles.pointOutlineWidth,0,t),polygonFillColor:this.getHexColorStylingValue(this.styles.polygonFillColor,\"#3f97e0\",t),polygonFillOpacity:this.getNumericStylingValue(this.styles.polygonFillOpacity,.3,t),polygonOutlineColor:this.getHexColorStylingValue(this.styles.polygonOutlineColor,\"#3f97e0\",t),polygonOutlineWidth:this.getNumericStylingValue(this.styles.polygonOutlineWidth,4,t),lineStringWidth:this.getNumericStylingValue(this.styles.lineStringWidth,4,t),lineStringColor:this.getHexColorStylingValue(this.styles.lineStringColor,\"#3f97e0\",t),zIndex:this.getNumericStylingValue(this.styles.zIndex,0,t)}}validateFeature(t){const e=super.validateFeature(t);if(e.valid){const e=t,i=It(e,this.coordinatePrecision).valid||W(e,this.coordinatePrecision).valid||at(e,this.coordinatePrecision).valid;return i?{valid:!0}:{valid:i,reason:\"Feature is not a valid Point, Polygon or LineString feature\"}}return e}}function Nt(t,e){const i=t,o=e,s=f(i[1]),n=f(o[1]);let r=f(o[0]-i[0]);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);const a=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),d=(v(Math.atan2(r,a))+360)%360;return d>180?-(360-d):d}function Tt(t,e,i){let o=e;e<0&&(o=-Math.abs(o));const s=o/y,n=t[0]*Math.PI/180,r=f(t[1]),a=f(i),d=s*Math.cos(a);let h=r+d;Math.abs(h)>Math.PI/2&&(h=h>0?Math.PI-h:-Math.PI-h);const l=Math.log(Math.tan(h/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),c=Math.abs(l)>1e-11?d/l:Math.cos(r),u=[(180*(n+s*Math.sin(a)/c)/Math.PI+540)%360-180,180*h/Math.PI];return u[0]+=u[0]-t[0]>180?-360:t[0]-u[0]>180?360:0,u}function jt(t,e,i,o,s){const n=o(t[0],t[1]),r=o(e[0],e[1]),{lng:a,lat:d}=s((n.x+r.x)/2,(n.y+r.y)/2);return[C(a,i),C(d,i)]}function Wt(t,e,i){const o=Tt(t,1e3*g(t,e)/2,Nt(t,e));return[C(o[0],i),C(o[1],i)]}function Bt({featureCoords:t,precision:e,unproject:i,project:o,projection:s}){const n=[];for(let r=0;r<t.length-1;r++){let a;if(\"web-mercator\"===s)a=jt(t[r],t[r+1],e,o,i);else{if(\"globe\"!==s)throw new Error(\"Invalid projection\");a=Wt(t[r],t[r+1],e)}n.push(a)}return n}class Gt extends z{constructor(t,e,i){super(t),this.config=void 0,this.selectionPointBehavior=void 0,this.coordinatePointBehavior=void 0,this._midPoints=[],this.config=t,this.selectionPointBehavior=e,this.coordinatePointBehavior=i}get ids(){return this._midPoints.concat()}set ids(t){}insert(t,e,i){const s=this.store.getGeometryCopy(e),{midPointFeatureId:n,midPointSegment:r}=this.store.getPropertiesCopy(e),a=this.store.getGeometryCopy(n),d=\"Polygon\"===a.type?a.coordinates[0]:a.coordinates;d.splice(r+1,0,s.coordinates),a.coordinates=\"Polygon\"===a.type?[d]:d,this.store.updateGeometry([{id:n,geometry:a}]),this.store.getPropertiesCopy(t)[o.COORDINATE_POINT_IDS]&&this.coordinatePointBehavior.createOrUpdate(t),this.store.delete([...this._midPoints,...this.selectionPointBehavior.ids]),this.create(d,n,i),this.selectionPointBehavior.create(d,a.type,n)}create(t,e,o){if(!this.store.has(e))throw new Error(\"Store does not have feature with this id\");this._midPoints=this.store.create(function(t,e,i,o,s,n){return Bt({featureCoords:t,precision:i,project:o,unproject:s,projection:n}).map((t,i)=>({geometry:{type:\"Point\",coordinates:t},properties:e(i)}))}(t,t=>({mode:this.mode,[i.MID_POINT]:!0,midPointSegment:t,midPointFeatureId:e}),o,this.config.project,this.config.unproject,this.projection))}delete(){this._midPoints.length&&(this.store.delete(this._midPoints),this._midPoints=[])}getUpdated(t){if(0!==this._midPoints.length)return Bt({featureCoords:t,precision:this.coordinatePrecision,project:this.config.project,unproject:this.config.unproject,projection:this.config.projection}).map((t,e)=>({id:this._midPoints[e],geometry:{type:\"Point\",coordinates:t}}))}}class Rt extends z{constructor(t){super(t),this._selectionPoints=[]}get ids(){return this._selectionPoints.concat()}set ids(t){}create(t,e,o){this._selectionPoints=this.store.create(function(t,e,i){const o=[],s=\"Polygon\"===e?t.length-1:t.length;for(let e=0;e<s;e++)o.push({geometry:{type:\"Point\",coordinates:t[e]},properties:i(e)});return o}(t,e,t=>({mode:this.mode,index:t,[i.SELECTION_POINT]:!0,[i.SELECTION_POINT_FEATURE_ID]:o})))}delete(){this.ids.length&&(this.store.delete(this.ids),this._selectionPoints=[])}getUpdated(t){if(0!==this._selectionPoints.length)return this._selectionPoints.map((e,i)=>({id:e,geometry:{type:\"Point\",coordinates:t[i]}}))}getOneUpdated(t,e){if(void 0!==this._selectionPoints[t])return{id:this._selectionPoints[t],geometry:{type:\"Point\",coordinates:e}}}}function Lt(t,e){let i=!1;for(let r=0,a=e.length;r<a;r++){const a=e[r];for(let e=0,r=a.length,d=r-1;e<r;d=e++)(s=a[e])[1]>(o=t)[1]!=(n=a[d])[1]>o[1]&&o[0]<(n[0]-s[0])*(o[1]-s[1])/(n[1]-s[1])+s[0]&&(i=!i)}var o,s,n;return i}const Ut=(t,e,i)=>{const o=t=>t*t,s=(t,e)=>o(t.x-e.x)+o(t.y-e.y);return Math.sqrt(((t,e,i)=>{const o=s(e,i);if(0===o)return s(t,e);let n=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/o;return n=Math.max(0,Math.min(1,n)),s(t,{x:e.x+n*(i.x-e.x),y:e.y+n*(i.y-e.y)})})(t,e,i))};class At extends z{constructor(t,e,i){super(t),this.config=void 0,this.createClickBoundingBox=void 0,this.pixelDistance=void 0,this.config=t,this.createClickBoundingBox=e,this.pixelDistance=i}find(t,e){let o,s,n,r,a=Infinity,d=Infinity,h=Infinity;const l=this.createClickBoundingBox.create(t),c=this.store.search(l);for(let l=0;l<c.length;l++){const u=c[l],p=u.geometry;if(\"Point\"===p.type){if(u.properties.selectionPoint||u.properties.coordinatePoint||!e&&u.properties[i.MID_POINT])continue;const s=this.pixelDistance.measure(t,p.coordinates);u.properties[i.MID_POINT]&&s<this.pointerDistance&&s<h?(h=s,n=u):!u.properties[i.MID_POINT]&&s<this.pointerDistance&&s<a&&(a=s,o=u)}else if(\"LineString\"===p.type){if(o)continue;for(let e=0;e<p.coordinates.length-1;e++){const i=p.coordinates[e],o=p.coordinates[e+1],n=Ut({x:t.containerX,y:t.containerY},this.project(i[0],i[1]),this.project(o[0],o[1]));n<this.pointerDistance&&n<d&&(d=n,s=u)}}else if(\"Polygon\"===p.type){if(o||s)continue;Lt([t.lng,t.lat],p.coordinates)&&(r=u)}}return{clickedFeature:o||s||r,clickedMidPoint:n}}}class Vt extends z{constructor(t,e,i,o,s){super(t),this.config=void 0,this.featuresAtCursorEvent=void 0,this.selectionPoints=void 0,this.midPoints=void 0,this.coordinatePoints=void 0,this.draggedFeatureId=null,this.dragPosition=void 0,this.config=t,this.featuresAtCursorEvent=e,this.selectionPoints=i,this.midPoints=o,this.coordinatePoints=s}startDragging(t,e){this.draggedFeatureId=e,this.dragPosition=[t.lng,t.lat]}stopDragging(){this.draggedFeatureId=null,this.dragPosition=void 0}isDragging(){return null!==this.draggedFeatureId}canDrag(t,e){const{clickedFeature:i}=this.featuresAtCursorEvent.find(t,!0);return!(!i||i.id!==e)}drag(t,i){if(!this.draggedFeatureId)return;const o=this.store.getGeometryCopy(this.draggedFeatureId),s=[t.lng,t.lat];if(\"Polygon\"===o.type||\"LineString\"===o.type){let n,r;if(\"Polygon\"===o.type?(n=o.coordinates[0],r=n.length-1):(n=o.coordinates,r=n.length),!this.dragPosition)return!1;for(let t=0;t<r;t++){const e=n[t];let i,o;if(\"web-mercator\"===this.config.projection){const t=E(this.dragPosition[0],this.dragPosition[1]),n=E(s[0],s[1]),r=E(e[0],e[1]),a={x:t.x-n.x,y:t.y-n.y},d=r.x-a.x,h=r.y-a.y,{lng:l,lat:c}=S(d,h);i=l,o=c}else{const t=[this.dragPosition[0]-s[0],this.dragPosition[1]-s[1]];i=e[0]-t[0],o=e[1]-t[1]}if(i=C(i,this.config.coordinatePrecision),o=C(o,this.config.coordinatePrecision),i>180||i<-180||o>90||o<-90)return!1;n[t]=[i,o]}\"Polygon\"===o.type&&(n[n.length-1]=[n[0][0],n[0][1]]);const a=this.selectionPoints.getUpdated(n)||[],d=this.midPoints.getUpdated(n)||[],h=this.coordinatePoints.getUpdated(this.draggedFeatureId,n)||[];if(i&&!i({type:\"Feature\",id:this.draggedFeatureId,geometry:o,properties:{}},{project:this.config.project,unproject:this.config.unproject,coordinatePrecision:this.config.coordinatePrecision,updateType:e.Provisional}).valid)return!1;this.store.updateGeometry([{id:this.draggedFeatureId,geometry:o},...a,...d,...h]),this.dragPosition=[t.lng,t.lat]}else\"Point\"===o.type&&(this.store.updateGeometry([{id:this.draggedFeatureId,geometry:{type:\"Point\",coordinates:s}}]),this.dragPosition=[t.lng,t.lat])}}class Yt extends z{constructor(t,e,i,o,s,n,r){super(t),this.config=void 0,this.pixelDistance=void 0,this.selectionPoints=void 0,this.midPoints=void 0,this.coordinatePoints=void 0,this.coordinateSnapping=void 0,this.lineSnapping=void 0,this.draggedCoordinate={id:null,index:-1},this.config=t,this.pixelDistance=e,this.selectionPoints=i,this.midPoints=o,this.coordinatePoints=s,this.coordinateSnapping=n,this.lineSnapping=r}getClosestCoordinate(t,e){const i={dist:Infinity,index:-1,isFirstOrLastPolygonCoord:!1};let o;if(\"LineString\"===e.type)o=e.coordinates;else{if(\"Polygon\"!==e.type)return i;o=e.coordinates[0]}for(let s=0;s<o.length;s++){const n=this.pixelDistance.measure(t,o[s]);if(n<this.pointerDistance&&n<i.dist){const t=\"Polygon\"===e.type&&(s===o.length-1||0===s);i.dist=n,i.index=t?0:s,i.isFirstOrLastPolygonCoord=t}}return i}getDraggableIndex(t,e){const i=this.store.getGeometryCopy(e),o=this.getClosestCoordinate(t,i);return-1===o.index?-1:o.index}snapCoordinate(t,e,i){let o=[t.lng,t.lat];const s=t=>Boolean(t.properties&&t.properties.mode===i.properties.mode&&t.id!==this.draggedCoordinate.id);if(null!=e&&e.toLine){let e;e=this.lineSnapping.getSnappable(t,s).coordinate,e&&(o=e)}if(e.toCoordinate){let e;e=this.coordinateSnapping.getSnappable(t,s).coordinate,e&&(o=e)}if(null!=e&&e.toCustom){let s;s=e.toCustom(t,{currentCoordinate:this.draggedCoordinate.index,currentId:i.id,getCurrentGeometrySnapshot:i.id?()=>this.store.getGeometryCopy(i.id):()=>null,project:this.project,unproject:this.unproject}),s&&(o=s)}return o}drag(t,i,o,s){const n=this.draggedCoordinate.id;if(null===n)return!1;const r=this.draggedCoordinate.index,a=this.store.getGeometryCopy(n),d=this.store.getPropertiesCopy(n),h=\"LineString\"===a.type?a.coordinates:a.coordinates[0],l=\"Polygon\"===a.type&&(r===h.length-1||0===r),c={type:\"Feature\",id:n,geometry:a,properties:d},u=this.snapCoordinate(t,s,c);if(t.lng>180||t.lng<-180||t.lat>90||t.lat<-90)return!1;if(l){const t=h.length-1;h[0]=u,h[t]=u}else h[r]=u;const p=this.selectionPoints.getOneUpdated(r,u),g=p?[p]:[],y=this.midPoints.getUpdated(h)||[],f=this.coordinatePoints.getUpdated(n,h)||[];return!(\"Point\"!==a.type&&!i&&D({type:\"Feature\",geometry:a,properties:{}})||o&&!o(c,{project:this.config.project,unproject:this.config.unproject,coordinatePrecision:this.config.coordinatePrecision,updateType:e.Provisional}).valid||(this.store.updateGeometry([{id:n,geometry:a},...g,...y,...f]),0))}isDragging(){return null!==this.draggedCoordinate.id}startDragging(t,e){this.draggedCoordinate={id:t,index:e}}stopDragging(){this.draggedCoordinate={id:null,index:-1}}}function Kt(t){let e=0,i=0,o=0;return(\"Polygon\"===t.geometry.type?t.geometry.coordinates[0].slice(0,-1):t.geometry.coordinates).forEach(t=>{e+=t[0],i+=t[1],o++},!0),[e/o,i/o]}const zt=(t,e)=>{if(0===e||360===e||-360===e)return t;const i=.017453292519943295*e,o=(\"Polygon\"===t.geometry.type?t.geometry.coordinates[0]:t.geometry.coordinates).map(([t,e])=>E(t,e)),s=o.reduce((t,e)=>({x:t.x+e.x,y:t.y+e.y}),{x:0,y:0});s.x/=o.length,s.y/=o.length;const n=o.map(t=>({x:s.x+(t.x-s.x)*Math.cos(i)-(t.y-s.y)*Math.sin(i),y:s.y+(t.x-s.x)*Math.sin(i)+(t.y-s.y)*Math.cos(i)})).map(({x:t,y:e})=>[S(t,e).lng,S(t,e).lat]);return\"Polygon\"===t.geometry.type?t.geometry.coordinates[0]=n:t.geometry.coordinates=n,t};function Xt(t){const e=(\"Polygon\"===t.geometry.type?t.geometry.coordinates[0]:t.geometry.coordinates).map(t=>{const{x:e,y:i}=E(t[0],t[1]);return[e,i]});return\"Polygon\"===t.geometry.type?function(t){let e=0,i=0,o=0;const s=t.length;for(let n=0;n<s-1;n++){const[s,r]=t[n],[a,d]=t[n+1],h=s*d-a*r;e+=h,i+=(s+a)*h,o+=(r+d)*h}return e/=2,i/=6*e,o/=6*e,{x:i,y:o}}(e):function(t){const e=t.length;let i=0,o=0;for(let s=0;s<e;s++){const[e,n]=t[s];i+=e,o+=n}return{x:i/e,y:o/e}}(e)}class Ht extends z{constructor(t,e,i,o){super(t),this.config=void 0,this.selectionPoints=void 0,this.midPoints=void 0,this.coordinatePoints=void 0,this.lastBearing=void 0,this.selectedGeometry=void 0,this.selectedGeometryCentroid=void 0,this.selectedGeometryWebMercatorCentroid=void 0,this.config=t,this.selectionPoints=e,this.midPoints=i,this.coordinatePoints=o}reset(){this.lastBearing=void 0,this.selectedGeometry=void 0,this.selectedGeometryWebMercatorCentroid=void 0,this.selectedGeometryCentroid=void 0}rotate(t,i,o){this.selectedGeometry||(this.selectedGeometry=this.store.getGeometryCopy(i));const s=this.selectedGeometry;if(\"Polygon\"!==s.type&&\"LineString\"!==s.type)return;const n=[t.lng,t.lat];let r;const a={type:\"Feature\",geometry:s,properties:{}};if(\"web-mercator\"===this.config.projection){this.selectedGeometryWebMercatorCentroid||(this.selectedGeometryWebMercatorCentroid=Xt(a));const e=E(t.lng,t.lat);if(r=tt(this.selectedGeometryWebMercatorCentroid,e),0===r)return;if(!this.lastBearing)return void(this.lastBearing=r);zt(a,-(this.lastBearing-r))}else{if(\"globe\"!==this.config.projection)throw new Error(\"Unsupported projection\");if(this.selectedGeometryCentroid||(this.selectedGeometryCentroid=Kt({type:\"Feature\",geometry:s,properties:{}})),r=Nt(this.selectedGeometryCentroid,n),!this.lastBearing)return void(this.lastBearing=r+180);!function(t,e){if(0===e||360===e||-360===e)return t;const i=Kt(t);(\"Polygon\"===t.geometry.type?t.geometry.coordinates[0]:t.geometry.coordinates).forEach(t=>{const o=Nt(i,t)+e,s=function(t,e){t[0]+=t[0]-e[0]>180?-360:e[0]-t[0]>180?360:0;const i=y,o=e[1]*Math.PI/180,s=t[1]*Math.PI/180,n=s-o;let r=Math.abs(t[0]-e[0])*Math.PI/180;r>Math.PI&&(r-=2*Math.PI);const a=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),d=Math.abs(a)>1e-11?n/a:Math.cos(o);return Math.sqrt(n*n+d*d*r*r)*i}(i,t),n=Tt(i,s,o);t[0]=n[0],t[1]=n[1]})}(a,-(this.lastBearing-(r+180)))}const d=\"Polygon\"===s.type?s.coordinates[0]:s.coordinates;d.forEach(t=>{t[0]=C(t[0],this.coordinatePrecision),t[1]=C(t[1],this.coordinatePrecision)});const h=this.midPoints.getUpdated(d)||[],l=this.selectionPoints.getUpdated(d)||[],c=this.coordinatePoints.getUpdated(i,d)||[];if(o&&!o({id:i,type:\"Feature\",geometry:s,properties:{}},{project:this.config.project,unproject:this.config.unproject,coordinatePrecision:this.config.coordinatePrecision,updateType:e.Provisional}))return!1;this.store.updateGeometry([{id:i,geometry:s},...l,...h,...c]),\"web-mercator\"===this.projection?this.lastBearing=r:\"globe\"===this.projection&&(this.lastBearing=r+180)}}class $t extends z{constructor(t,e){super(t),this.config=void 0,this.dragCoordinateResizeBehavior=void 0,this.config=t,this.dragCoordinateResizeBehavior=e}scale(t,e,i){if(!this.dragCoordinateResizeBehavior.isDragging()){const i=this.dragCoordinateResizeBehavior.getDraggableIndex(t,e);this.dragCoordinateResizeBehavior.startDragging(e,i)}this.dragCoordinateResizeBehavior.drag(t,\"center-fixed\",i)}reset(){this.dragCoordinateResizeBehavior.stopDragging()}}function qt({coordinates:t,originX:e,originY:i,xScale:o,yScale:s}){1===o&&1===s||t.forEach(t=>{const{x:n,y:r}=E(t[0],t[1]),a=e+(n-e)*o,d=i+(r-i)*s,{lng:h,lat:l}=S(a,d);t[0]=h,t[1]=l})}class Zt extends z{constructor(t,e,i,o,s){super(t),this.config=void 0,this.pixelDistance=void 0,this.selectionPoints=void 0,this.midPoints=void 0,this.coordinatePoints=void 0,this.minimumScale=1e-4,this.draggedCoordinate={id:null,index:-1},this.boundingBoxMaps={opposite:{0:4,1:5,2:6,3:7,4:0,5:1,6:2,7:3}},this.config=t,this.pixelDistance=e,this.selectionPoints=i,this.midPoints=o,this.coordinatePoints=s}getClosestCoordinate(t,e){const i={dist:Infinity,index:-1,isFirstOrLastPolygonCoord:!1};let o;if(\"LineString\"===e.type)o=e.coordinates;else{if(\"Polygon\"!==e.type)return i;o=e.coordinates[0]}for(let s=0;s<o.length;s++){const n=this.pixelDistance.measure(t,o[s]);if(n<this.pointerDistance&&n<i.dist){const t=\"Polygon\"===e.type&&(s===o.length-1||0===s);i.dist=n,i.index=t?0:s,i.isFirstOrLastPolygonCoord=t}}return i}isValidDragWebMercator(t,e,i){switch(t){case 0:if(e<=0||i>=0)return!1;break;case 1:if(i>=0)return!1;break;case 2:if(e>=0||i>=0)return!1;break;case 3:if(e>=0)return!1;break;case 4:if(e>=0||i<=0)return!1;break;case 5:if(i<=0)return!1;break;case 6:if(e<=0||i<=0)return!1;break;case 7:if(e<=0)return!1}return!0}getSelectedFeatureDataWebMercator(){if(!this.draggedCoordinate.id||-1===this.draggedCoordinate.index)return null;const t=this.getFeature(this.draggedCoordinate.id);if(!t)return null;const e=this.getNormalisedCoordinates(t.geometry);return{boundingBox:this.getBBoxWebMercator(e),feature:t,updatedCoords:e,selectedCoordinate:e[this.draggedCoordinate.index]}}centerWebMercatorDrag(t){const e=this.getSelectedFeatureDataWebMercator();if(!e)return null;const{feature:i,boundingBox:o,updatedCoords:s,selectedCoordinate:n}=e,r=Xt(i);if(!r)return null;const a=E(n[0],n[1]),{closestBBoxIndex:d}=this.getIndexesWebMercator(o,a),h=E(t.lng,t.lat);return this.scaleWebMercator({closestBBoxIndex:d,updatedCoords:s,webMercatorCursor:h,webMercatorSelected:a,webMercatorOrigin:r}),s}centerFixedWebMercatorDrag(t){const e=this.getSelectedFeatureDataWebMercator();if(!e)return null;const{feature:i,boundingBox:o,updatedCoords:s,selectedCoordinate:n}=e,r=Xt(i);if(!r)return null;const a=E(n[0],n[1]),{closestBBoxIndex:d}=this.getIndexesWebMercator(o,a),h=E(t.lng,t.lat);return this.scaleFixedWebMercator({closestBBoxIndex:d,updatedCoords:s,webMercatorCursor:h,webMercatorSelected:a,webMercatorOrigin:r}),s}scaleFixedWebMercator({closestBBoxIndex:t,webMercatorOrigin:e,webMercatorSelected:i,webMercatorCursor:o,updatedCoords:s}){if(!this.isValidDragWebMercator(t,e.x-o.x,e.y-o.y))return null;let n=U(e,o)/U(e,i);return n<0&&(n=this.minimumScale),qt({coordinates:s,originX:e.x,originY:e.y,xScale:n,yScale:n}),s}oppositeFixedWebMercatorDrag(t){const e=this.getSelectedFeatureDataWebMercator();if(!e)return null;const{boundingBox:i,updatedCoords:o,selectedCoordinate:s}=e,n=E(s[0],s[1]),{oppositeBboxIndex:r,closestBBoxIndex:a}=this.getIndexesWebMercator(i,n),d={x:i[r][0],y:i[r][1]},h=E(t.lng,t.lat);return this.scaleFixedWebMercator({closestBBoxIndex:a,updatedCoords:o,webMercatorCursor:h,webMercatorSelected:n,webMercatorOrigin:d}),o}oppositeWebMercatorDrag(t){const e=this.getSelectedFeatureDataWebMercator();if(!e)return null;const{boundingBox:i,updatedCoords:o,selectedCoordinate:s}=e,n=E(s[0],s[1]),{oppositeBboxIndex:r,closestBBoxIndex:a}=this.getIndexesWebMercator(i,n),d={x:i[r][0],y:i[r][1]},h=E(t.lng,t.lat);return this.scaleWebMercator({closestBBoxIndex:a,updatedCoords:o,webMercatorCursor:h,webMercatorSelected:n,webMercatorOrigin:d}),o}scaleWebMercator({closestBBoxIndex:t,webMercatorOrigin:e,webMercatorSelected:i,webMercatorCursor:o,updatedCoords:s}){const n=e.x-o.x,r=e.y-o.y;if(!this.isValidDragWebMercator(t,n,r))return null;let a=1;0!==n&&1!==t&&5!==t&&(a=1-(e.x-i.x-n)/n);let d=1;return 0!==r&&3!==t&&7!==t&&(d=1-(e.y-i.y-r)/r),this.validateScale(a,d)?(a<0&&(a=this.minimumScale),d<0&&(d=this.minimumScale),this.performWebMercatorScale(s,e.x,e.y,a,d),s):null}getFeature(t){if(null===this.draggedCoordinate.id)return null;const e=this.store.getGeometryCopy(t);return\"Polygon\"!==e.type&&\"LineString\"!==e.type?null:{id:t,type:\"Feature\",geometry:e,properties:{}}}getNormalisedCoordinates(t){return\"Polygon\"===t.type?t.coordinates[0]:t.coordinates}validateScale(t,e){const i=!isNaN(t)&&e<Number.MAX_SAFE_INTEGER,o=!isNaN(e)&&e<Number.MAX_SAFE_INTEGER;return i&&o}performWebMercatorScale(t,e,i,o,s){t.forEach(t=>{const{x:n,y:r}=E(t[0],t[1]),a=e+(n-e)*o,d=i+(r-i)*s,{lng:h,lat:l}=S(a,d);t[0]=h,t[1]=l})}getBBoxWebMercator(t){const e=[Infinity,Infinity,-Infinity,-Infinity];(t=t.map(t=>{const{x:e,y:i}=E(t[0],t[1]);return[e,i]})).forEach(([t,i])=>{t<e[0]&&(e[0]=t),i<e[1]&&(e[1]=i),t>e[2]&&(e[2]=t),i>e[3]&&(e[3]=i)});const[i,o,s,n]=e;return[[i,n],[(i+s)/2,n],[s,n],[s,n+(o-n)/2],[s,o],[(i+s)/2,o],[i,o],[i,n+(o-n)/2]]}getIndexesWebMercator(t,e){let i,o=Infinity;for(let s=0;s<t.length;s++){const n=U({x:e.x,y:e.y},{x:t[s][0],y:t[s][1]});n<o&&(i=s,o=n)}if(void 0===i)throw new Error(\"No closest coordinate found\");return{oppositeBboxIndex:this.boundingBoxMaps.opposite[i],closestBBoxIndex:i}}isDragging(){return null!==this.draggedCoordinate.id}startDragging(t,e){this.draggedCoordinate={id:t,index:e}}stopDragging(){this.draggedCoordinate={id:null,index:-1}}getDraggableIndex(t,e){const i=this.store.getGeometryCopy(e),o=this.getClosestCoordinate(t,i);return-1===o.index?-1:o.index}drag(t,i,o){if(!this.draggedCoordinate.id)return!1;const s=this.getFeature(this.draggedCoordinate.id);if(!s)return!1;let n=null;if(\"center\"===i?n=this.centerWebMercatorDrag(t):\"opposite\"===i?n=this.oppositeWebMercatorDrag(t):\"center-fixed\"===i?n=this.centerFixedWebMercatorDrag(t):\"opposite-fixed\"===i&&(n=this.oppositeFixedWebMercatorDrag(t)),!n)return!1;for(let t=0;t<n.length;t++){const e=n[t];if(e[0]=C(e[0],this.coordinatePrecision),e[1]=C(e[1],this.coordinatePrecision),!O(e,this.coordinatePrecision))return!1}const r=this.midPoints.getUpdated(n)||[],a=this.selectionPoints.getUpdated(n)||[],d=this.coordinatePoints.getUpdated(s.id,n)||[],h={type:s.geometry.type,coordinates:\"Polygon\"===s.geometry.type?[n]:n};return!(o&&!o({id:this.draggedCoordinate.id,type:\"Feature\",geometry:h,properties:{}},{project:this.config.project,unproject:this.config.unproject,coordinatePrecision:this.config.coordinatePrecision,updateType:e.Provisional}).valid||(this.store.updateGeometry([{id:this.draggedCoordinate.id,geometry:h},...a,...r,...d]),0))}}const Jt={deselect:\"Escape\",delete:\"Delete\",rotate:[\"Control\",\"r\"],scale:[\"Control\",\"s\"]},Qt={pointerOver:\"move\",dragStart:\"move\",dragEnd:\"move\",insertMidpoint:\"crosshair\"};class te extends p{constructor(t){super(t,!0),this.mode=\"select\",this.allowManualDeselection=!0,this.dragEventThrottle=5,this.dragEventCount=0,this.selected=[],this.flags={},this.keyEvents=Jt,this.cursors=Qt,this.validations={},this.selectionPoints=void 0,this.midPoints=void 0,this.coordinateSnap=void 0,this.featuresAtMouseEvent=void 0,this.pixelDistance=void 0,this.clickBoundingBox=void 0,this.dragFeature=void 0,this.dragCoordinate=void 0,this.rotateFeature=void 0,this.scaleFeature=void 0,this.dragCoordinateResizeFeature=void 0,this.coordinatePoints=void 0,this.lineSnap=void 0,this.updateOptions(t)}updateOptions(e){if(super.updateOptions(e),this.cursors=e&&e.cursors?t({},this.cursors,e.cursors):Qt,null===(null==e?void 0:e.keyEvents)?this.keyEvents={deselect:null,delete:null,rotate:null,scale:null}:null!=e&&e.keyEvents&&(this.keyEvents=t({},this.keyEvents,e.keyEvents)),void 0!==(null==e?void 0:e.dragEventThrottle)&&(this.dragEventThrottle=e.dragEventThrottle),void 0!==(null==e?void 0:e.allowManualDeselection)&&(this.allowManualDeselection=e.allowManualDeselection),null!=e&&e.flags){this.flags=t({},this.flags,e.flags),this.validations={};for(const t in this.flags){const e=this.flags[t].feature;e&&e.validation&&(this.validations[t]=e.validation)}}}selectFeature(t){this.select(t,!1)}setSelecting(){if(\"started\"!==this._state)throw new Error(\"Mode must be started to move to selecting state\");this._state=\"selecting\"}registerBehaviors(t){this.pixelDistance=new $(t),this.clickBoundingBox=new H(t),this.featuresAtMouseEvent=new At(t,this.clickBoundingBox,this.pixelDistance),this.selectionPoints=new Rt(t),this.coordinatePoints=new Mt(t),this.midPoints=new Gt(t,this.selectionPoints,this.coordinatePoints),this.coordinateSnap=new q(t,this.pixelDistance,this.clickBoundingBox),this.lineSnap=new gt(t,this.pixelDistance,this.clickBoundingBox),this.rotateFeature=new Ht(t,this.selectionPoints,this.midPoints,this.coordinatePoints),this.dragFeature=new Vt(t,this.featuresAtMouseEvent,this.selectionPoints,this.midPoints,this.coordinatePoints),this.dragCoordinate=new Yt(t,this.pixelDistance,this.selectionPoints,this.midPoints,this.coordinatePoints,this.coordinateSnap,this.lineSnap),this.dragCoordinateResizeFeature=new Zt(t,this.pixelDistance,this.selectionPoints,this.midPoints,this.coordinatePoints),this.scaleFeature=new $t(t,this.dragCoordinateResizeFeature)}deselectFeature(){this.deselect()}deselect(){const t=this.selected.filter(t=>this.store.has(t)).map(t=>({id:t,property:i.SELECTED,value:!1}));this.store.updateProperty(t),this.onDeselect(this.selected[0]),this.selected=[],this.selectionPoints.delete(),this.midPoints.delete()}deleteSelected(){this.store.delete(this.selected),this.selected=[]}onRightClick(t){if(!this.selectionPoints.ids.length)return;let i,o=Infinity;if(this.selectionPoints.ids.forEach(e=>{const s=this.store.getGeometryCopy(e),n=this.pixelDistance.measure(t,s.coordinates);n<this.pointerDistance&&n<o&&(o=n,i=this.store.getPropertiesCopy(e))}),!i)return;const s=i.selectionPointFeatureId,n=i.index,r=this.store.getPropertiesCopy(s),a=this.flags[r.mode],d=this.validations[r.mode];if(!(a&&a.feature&&a.feature.coordinates&&a.feature.coordinates.deletable))return;const h=this.store.getGeometryCopy(s);let l;if(\"Polygon\"===h.type){if(l=h.coordinates[0],l.length<=4)return}else if(\"LineString\"===h.type&&(l=h.coordinates,l.length<=2))return;if(!l)return;if(\"Polygon\"!==h.type||0!==n&&n!==l.length-1?l.splice(n,1):(l.shift(),l.pop(),l.push([l[0][0],l[0][1]])),d&&!d({id:s,type:\"Feature\",geometry:h,properties:r},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e.Commit}).valid)return;const c=[...this.midPoints.ids,...this.selectionPoints.ids];this.store.delete(c),this.store.updateGeometry([{id:s,geometry:h}]),r.coordinatePointIds&&this.coordinatePoints.createOrUpdate(s),this.selectionPoints.create(l,h.type,s),a&&a.feature&&a.feature.coordinates&&a.feature.coordinates.midpoints&&this.midPoints.create(l,s,this.coordinatePrecision)}select(t,e=!0){if(this.selected[0]===t)return;const{mode:o}=this.store.getPropertiesCopy(t),s=this.flags[o];if(!s||!s.feature)return;const n=this.selected[0];if(n){if(n===t)return;this.deselect()}e&&this.setCursor(this.cursors.pointerOver),this.selected=[t],this.store.updateProperty([{id:t,property:i.SELECTED,value:!0}]),this.onSelect(t);const{type:r,coordinates:a}=this.store.getGeometryCopy(t);if(\"LineString\"!==r&&\"Polygon\"!==r)return;const d=\"LineString\"===r?a:a[0];d&&s&&s.feature.coordinates&&(this.selectionPoints.create(d,r,t),s.feature.coordinates.midpoints&&this.midPoints.create(d,t,this.coordinatePrecision))}onLeftClick(t){const{clickedFeature:e,clickedMidPoint:i}=this.featuresAtMouseEvent.find(t,this.selected.length>0);if(this.selected.length&&i)this.midPoints.insert(this.selected[0],i.id,this.coordinatePrecision);else if(e&&e.id)this.select(e.id,!0);else if(this.selected.length&&this.allowManualDeselection)return void this.deselect()}start(){this.setStarted(),this.setSelecting()}stop(){this.cleanUp(),this.setStarted(),this.setStopped()}onClick(t){\"right\"===t.button&&this.allowPointerEvent(this.pointerEvents.rightClick,t)||t.isContextMenu&&this.allowPointerEvent(this.pointerEvents.contextMenu,t)?this.onRightClick(t):\"left\"===t.button&&this.allowPointerEvent(this.pointerEvents.leftClick,t)&&this.onLeftClick(t)}canScale(t){return this.keyEvents.scale&&this.keyEvents.scale.every(e=>t.heldKeys.includes(e))}canRotate(t){return this.keyEvents.rotate&&this.keyEvents.rotate.every(e=>t.heldKeys.includes(e))}preventDefaultKeyEvent(t){const e=this.canRotate(t),i=this.canScale(t);(e||i)&&t.preventDefault()}onKeyDown(t){this.preventDefaultKeyEvent(t)}onKeyUp(t){if(this.preventDefaultKeyEvent(t),this.keyEvents.delete&&t.key===this.keyEvents.delete){if(!this.selected.length)return;const t=this.selected[0];this.onDeselect(this.selected[0]),this.coordinatePoints.deletePointsByFeatureIds([t]),this.deleteSelected(),this.selectionPoints.delete(),this.midPoints.delete()}else this.keyEvents.deselect&&t.key===this.keyEvents.deselect&&this.cleanUp()}cleanUp(){this.selected.length&&this.deselect()}onDragStart(t,e){if(!this.allowPointerEvent(this.pointerEvents.onDragStart,t))return;if(!this.selected.length)return;const i=this.store.getPropertiesCopy(this.selected[0]),o=this.flags[i.mode];if(!(o&&o.feature&&(o.feature.draggable||o.feature.coordinates&&o.feature.coordinates.draggable||o.feature.coordinates&&o.feature.coordinates.resizable||o.feature.coordinates&&\"object\"==typeof o.feature.coordinates.midpoints&&o.feature.coordinates.midpoints.draggable)))return;this.dragEventCount=0;const s=this.selected[0],n=this.dragCoordinate.getDraggableIndex(t,s);if(o&&o.feature&&o.feature.coordinates&&(o.feature.coordinates.draggable||o.feature.coordinates.resizable)&&-1!==n)return this.setCursor(this.cursors.dragStart),o.feature.coordinates.resizable?this.dragCoordinateResizeFeature.startDragging(s,n):this.dragCoordinate.startDragging(s,n),void e(!1);if(o&&o.feature&&o.feature.coordinates&&\"object\"==typeof o.feature.coordinates.midpoints&&o.feature.coordinates.midpoints.draggable){const{clickedMidPoint:i}=this.featuresAtMouseEvent.find(t,this.selected.length>0);if(this.selected.length&&i){this.midPoints.insert(s,i.id,this.coordinatePrecision);const o=this.dragCoordinate.getDraggableIndex(t,s);return this.dragCoordinate.startDragging(s,o),void e(!1)}}return o&&o.feature&&o.feature.draggable&&this.dragFeature.canDrag(t,s)?(this.setCursor(this.cursors.dragStart),this.dragFeature.startDragging(t,s),void e(!1)):void 0}onDrag(t,e){if(!this.allowPointerEvent(this.pointerEvents.onDrag,t))return;const i=this.selected[0];if(!i)return;const o=this.store.getPropertiesCopy(i),s=this.flags[o.mode],n=!0===(s&&s.feature&&s.feature.selfIntersectable);if(this.dragEventCount++,this.dragEventCount%this.dragEventThrottle==0)return;const r=this.validations[o.mode];if(s&&s.feature&&s.feature.rotateable&&this.canRotate(t))return e(!1),void this.rotateFeature.rotate(t,i,r);if(s&&s.feature&&s.feature.scaleable&&this.canScale(t))return e(!1),void this.scaleFeature.scale(t,i,r);if(this.dragCoordinateResizeFeature.isDragging()&&s.feature&&s.feature.coordinates&&s.feature.coordinates.resizable){if(\"globe\"===this.projection)throw new Error(\"Globe is currently unsupported projection for resizable\");return e(!1),void this.dragCoordinateResizeFeature.drag(t,s.feature.coordinates.resizable,r)}if(this.dragCoordinate.isDragging()){var a;const e=null==(a=s.feature)||null==(a=a.coordinates)?void 0:a.snappable;let i={toCoordinate:!1};return!0===e?i={toCoordinate:!0}:\"object\"==typeof e&&(i=e),void this.dragCoordinate.drag(t,n,r,i)}this.dragFeature.isDragging()?this.dragFeature.drag(t,r):e(!0)}onDragEnd(t,e){this.allowPointerEvent(this.pointerEvents.onDragEnd,t)&&(this.setCursor(this.cursors.dragEnd),this.dragCoordinate.isDragging()?this.onFinish(this.selected[0],{mode:this.mode,action:\"dragCoordinate\"}):this.dragFeature.isDragging()?this.onFinish(this.selected[0],{mode:this.mode,action:\"dragFeature\"}):this.dragCoordinateResizeFeature.isDragging()&&this.onFinish(this.selected[0],{mode:this.mode,action:\"dragCoordinateResize\"}),this.dragCoordinate.stopDragging(),this.dragFeature.stopDragging(),this.dragCoordinateResizeFeature.stopDragging(),this.rotateFeature.reset(),this.scaleFeature.reset(),e(!0))}onMouseMove(t){if(!this.selected.length)return void this.setCursor(\"unset\");if(this.dragFeature.isDragging())return;let e=!1;this.midPoints.ids.forEach(i=>{if(e)return;const o=this.store.getGeometryCopy(i);this.pixelDistance.measure(t,o.coordinates)<this.pointerDistance&&(e=!0)});let i=!1;if(this.selectionPoints.ids.forEach(o=>{const s=this.store.getGeometryCopy(o);this.pixelDistance.measure(t,s.coordinates)<this.pointerDistance&&(e=!1,i=!0)}),e)return void this.setCursor(this.cursors.insertMidpoint);const{clickedFeature:o}=this.featuresAtMouseEvent.find(t,!0);this.setCursor(this.selected.length>0&&(o&&o.id===this.selected[0]||i)?this.cursors.pointerOver:\"unset\")}styleFeature(e){const o=t({},{polygonFillColor:\"#3f97e0\",polygonOutlineColor:\"#3f97e0\",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:\"#3f97e0\",pointOutlineColor:\"#ffffff\",pointOutlineWidth:0,pointWidth:6,lineStringColor:\"#3f97e0\",lineStringWidth:4,zIndex:0});if(e.properties.mode===this.mode&&\"Point\"===e.geometry.type){if(e.properties.selectionPoint)return o.pointColor=this.getHexColorStylingValue(this.styles.selectionPointColor,o.pointColor,e),o.pointOutlineColor=this.getHexColorStylingValue(this.styles.selectionPointOutlineColor,o.pointOutlineColor,e),o.pointWidth=this.getNumericStylingValue(this.styles.selectionPointWidth,o.pointWidth,e),o.pointOutlineWidth=this.getNumericStylingValue(this.styles.selectionPointOutlineWidth,2,e),o.zIndex=30,o;if(e.properties.midPoint)return o.pointColor=this.getHexColorStylingValue(this.styles.midPointColor,o.pointColor,e),o.pointOutlineColor=this.getHexColorStylingValue(this.styles.midPointOutlineColor,o.pointOutlineColor,e),o.pointWidth=this.getNumericStylingValue(this.styles.midPointWidth,4,e),o.pointOutlineWidth=this.getNumericStylingValue(this.styles.midPointOutlineWidth,2,e),o.zIndex=50,o}else if(e.properties[i.SELECTED]){if(\"Polygon\"===e.geometry.type)return o.polygonFillColor=this.getHexColorStylingValue(this.styles.selectedPolygonColor,o.polygonFillColor,e),o.polygonOutlineWidth=this.getNumericStylingValue(this.styles.selectedPolygonOutlineWidth,o.polygonOutlineWidth,e),o.polygonOutlineColor=this.getHexColorStylingValue(this.styles.selectedPolygonOutlineColor,o.polygonOutlineColor,e),o.polygonFillOpacity=this.getNumericStylingValue(this.styles.selectedPolygonFillOpacity,o.polygonFillOpacity,e),o.zIndex=s,o;if(\"LineString\"===e.geometry.type)return o.lineStringColor=this.getHexColorStylingValue(this.styles.selectedLineStringColor,o.lineStringColor,e),o.lineStringWidth=this.getNumericStylingValue(this.styles.selectedLineStringWidth,o.lineStringWidth,e),o.zIndex=s,o;if(\"Point\"===e.geometry.type)return o.pointWidth=this.getNumericStylingValue(this.styles.selectedPointWidth,o.pointWidth,e),o.pointColor=this.getHexColorStylingValue(this.styles.selectedPointColor,o.pointColor,e),o.pointOutlineColor=this.getHexColorStylingValue(this.styles.selectedPointOutlineColor,o.pointOutlineColor,e),o.pointOutlineWidth=this.getNumericStylingValue(this.styles.selectedPointOutlineWidth,o.pointOutlineWidth,e),o.zIndex=s,o}return o}afterFeatureUpdated(t){if(this.selected.length&&t.id===this.selected[0]){var e,i;const o=this.flags[t.properties.mode];if(null==o||null==(e=o.feature)||!e.coordinates)return;const s=t.geometry.type,n=t.id;let r;if(this.selectionPoints.delete(),this.midPoints.delete(),\"Polygon\"===s)r=t.geometry.coordinates[0];else{if(\"LineString\"!==s)return;r=t.geometry.coordinates}this.selectionPoints.create(r,s,n),null!=o&&null!=(i=o.feature)&&null!=(i=i.coordinates)&&i.midpoints&&this.midPoints.create(\"Polygon\"===s?t.geometry.coordinates[0]:t.geometry.coordinates,n,this.coordinatePrecision)}}}class ee extends u{constructor(...t){super(...t),this.type=l.Static,this.mode=\"static\"}start(){}stop(){}onKeyUp(){}onKeyDown(){}onClick(){}onDragStart(){}onDrag(){}onDragEnd(){}onMouseMove(){}cleanUp(){}styleFeature(){return t({},{polygonFillColor:\"#3f97e0\",polygonOutlineColor:\"#3f97e0\",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:\"#3f97e0\",pointOutlineColor:\"#ffffff\",pointOutlineWidth:0,pointWidth:6,lineStringColor:\"#3f97e0\",lineStringWidth:4,zIndex:0})}}function ie(t,e,i,o,s){for(;o>i;){if(o-i>600){const n=o-i+1,r=e-i+1,a=Math.log(n),d=.5*Math.exp(2*a/3),h=.5*Math.sqrt(a*d*(n-d)/n)*(r-n/2<0?-1:1);ie(t,e,Math.max(i,Math.floor(e-r*d/n+h)),Math.min(o,Math.floor(e+(n-r)*d/n+h)),s)}const n=t[e];let r=i,a=o;for(oe(t,i,e),s(t[o],n)>0&&oe(t,i,o);r<a;){for(oe(t,r,a),r++,a--;s(t[r],n)<0;)r++;for(;s(t[a],n)>0;)a--}0===s(t[i],n)?oe(t,i,a):(a++,oe(t,a,o)),a<=e&&(i=a+1),e<=a&&(o=a-1)}}function oe(t,e,i){const o=t[e];t[e]=t[i],t[i]=o}function se(t,e){ne(t,0,t.children.length,e,t)}function ne(t,e,i,o,s){s||(s=ge([])),s.minX=Infinity,s.minY=Infinity,s.maxX=-Infinity,s.maxY=-Infinity;for(let n=e;n<i;n++){const e=t.children[n];re(s,t.leaf?o(e):e)}return s}function re(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ae(t,e){return t.minX-e.minX}function de(t,e){return t.minY-e.minY}function he(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function le(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ce(t,e){const i=Math.max(t.minX,e.minX),o=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),n=Math.min(t.maxY,e.maxY);return Math.max(0,s-i)*Math.max(0,n-o)}function ue(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function pe(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ge(t){return{children:t,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function ye(t,e,i,o,s){const n=[e,i];for(;n.length;){if((i=n.pop())-(e=n.pop())<=o)continue;const r=e+Math.ceil((i-e)/o/2)*o;ie(t,r,e,i,s),n.push(e,r,r,i)}}class fe{constructor(t){this._maxEntries=void 0,this._minEntries=void 0,this.data=void 0,this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}search(t){let e=this.data;const i=[];if(!pe(t,e))return i;const o=this.toBBox,s=[];for(;e;){for(let n=0;n<e.children.length;n++){const r=e.children[n],a=e.leaf?o(r):r;pe(t,a)&&(e.leaf?i.push(r):ue(t,a)?this._all(r,i):s.push(r))}e=s.pop()}return i}collides(t){let e=this.data;if(pe(t,e)){const i=[];for(;e;){for(let o=0;o<e.children.length;o++){const s=e.children[o],n=e.leaf?this.toBBox(s):s;if(pe(t,n)){if(e.leaf||ue(t,n))return!0;i.push(s)}}e=i.pop()}}return!1}load(t){if(t.length<this._minEntries){for(let e=0;e<t.length;e++)this.insert(t[e]);return}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e}insert(t){this._insert(t,this.data.height-1)}clear(){this.data=ge([])}remove(t){let e=this.data;const i=this.toBBox(t),o=[],s=[];let n,r,a=!1;for(;e||o.length;){if(e||(e=o.pop(),r=o[o.length-1],n=s.pop(),a=!0),e.leaf){const i=e.children.indexOf(t);-1!==i&&(e.children.splice(i,1),o.push(e),this._condense(o))}a||e.leaf||!ue(e,i)?r?(n++,e=r.children[n],a=!1):e=null:(o.push(e),s.push(n),n=0,r=e,e=e.children[0])}}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}_all(t,e){const i=[];for(;t;)t.leaf?e.push(...t.children):i.push(...t.children),t=i.pop();return e}_build(t,e,i,o){const s=i-e+1;let n,r=this._maxEntries;if(s<=r)return n=ge(t.slice(e,i+1)),se(n,this.toBBox),n;o||(o=Math.ceil(Math.log(s)/Math.log(r)),r=Math.ceil(s/Math.pow(r,o-1))),n=ge([]),n.leaf=!1,n.height=o;const a=Math.ceil(s/r),d=a*Math.ceil(Math.sqrt(r));ye(t,e,i,d,this.compareMinX);for(let s=e;s<=i;s+=d){const e=Math.min(s+d-1,i);ye(t,s,e,a,this.compareMinY);for(let i=s;i<=e;i+=a){const s=Math.min(i+a-1,e);n.children.push(this._build(t,i,s,o-1))}}return se(n,this.toBBox),n}_chooseSubtree(t,e,i,o){for(;o.push(e),!e.leaf&&o.length-1!==i;){let i,o=Infinity,r=Infinity;for(let a=0;a<e.children.length;a++){const d=e.children[a],h=he(d),l=(s=t,n=d,(Math.max(n.maxX,s.maxX)-Math.min(n.minX,s.minX))*(Math.max(n.maxY,s.maxY)-Math.min(n.minY,s.minY))-h);l<r?(r=l,o=h<o?h:o,i=d):l===r&&h<o&&(o=h,i=d)}e=i||e.children[0]}var s,n;return e}_insert(t,e,i){const o=i?t:this.toBBox(t),s=[],n=this._chooseSubtree(o,this.data,e,s);for(n.children.push(t),re(n,o);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(o,s,e)}_split(t,e){const i=t[e],o=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,o);const n=this._chooseSplitIndex(i,s,o),r=ge(i.children.splice(n,i.children.length-n));r.height=i.height,r.leaf=i.leaf,se(i,this.toBBox),se(r,this.toBBox),e?t[e-1].children.push(r):this._splitRoot(i,r)}_splitRoot(t,e){this.data=ge([t,e]),this.data.height=t.height+1,this.data.leaf=!1,se(this.data,this.toBBox)}_chooseSplitIndex(t,e,i){let o,s=Infinity,n=Infinity;for(let r=e;r<=i-e;r++){const e=ne(t,0,r,this.toBBox),a=ne(t,r,i,this.toBBox),d=ce(e,a),h=he(e)+he(a);d<s?(s=d,o=r,n=h<n?h:n):d===s&&h<n&&(n=h,o=r)}return o||i-e}_chooseSplitAxis(t,e,i){const o=t.leaf?this.compareMinX:ae,s=t.leaf?this.compareMinY:de;this._allDistMargin(t,e,i,o)<this._allDistMargin(t,e,i,s)&&t.children.sort(o)}_allDistMargin(t,e,i,o){t.children.sort(o);const s=this.toBBox,n=ne(t,0,e,s),r=ne(t,i-e,i,s);let a=le(n)+le(r);for(let o=e;o<i-e;o++){const e=t.children[o];re(n,t.leaf?s(e):e),a+=le(n)}for(let o=i-e-1;o>=e;o--){const e=t.children[o];re(r,t.leaf?s(e):e),a+=le(r)}return a}_adjustParentBBoxes(t,e,i){for(let o=i;o>=0;o--)re(e[o],t)}_condense(t){for(let e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children,e.splice(e.indexOf(t[i]),1)):this.clear():se(t[i],this.toBBox)}}class me{constructor(t){this.tree=void 0,this.idToNode=void 0,this.nodeToId=void 0,this.tree=new fe(t&&t.maxEntries?t.maxEntries:9),this.idToNode=new Map,this.nodeToId=new Map}setMaps(t,e){this.idToNode.set(t.id,e),this.nodeToId.set(e,t.id)}toBBox(t){const e=[],i=[];let o;if(\"Polygon\"===t.geometry.type)o=t.geometry.coordinates[0];else if(\"LineString\"===t.geometry.type)o=t.geometry.coordinates;else{if(\"Point\"!==t.geometry.type)throw new Error(\"Not a valid feature to turn into a bounding box\");o=[t.geometry.coordinates]}for(let t=0;t<o.length;t++)i.push(o[t][1]),e.push(o[t][0]);const s=Math.min(...i),n=Math.max(...i);return{minX:Math.min(...e),minY:s,maxX:Math.max(...e),maxY:n}}insert(t){if(this.idToNode.get(String(t.id)))throw new Error(\"Feature already exists\");const e=this.toBBox(t);this.setMaps(t,e),this.tree.insert(e)}load(t){const e=[],i=new Set;t.forEach(t=>{const o=this.toBBox(t);if(this.setMaps(t,o),i.has(String(t.id)))throw new Error(`Duplicate feature ID found ${t.id}`);i.add(String(t.id)),e.push(o)}),this.tree.load(e)}update(t){this.remove(t.id);const e=this.toBBox(t);this.setMaps(t,e),this.tree.insert(e)}remove(t){const e=this.idToNode.get(t);if(!e)throw new Error(`${t} not inserted into the spatial index`);this.tree.remove(e)}clear(){this.tree.clear()}search(t){return this.tree.search(this.toBBox(t)).map(t=>this.nodeToId.get(t))}collides(t){return this.tree.collides(this.toBBox(t))}}const ve={getId:()=>\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(t){const e=16*Math.random()|0;return(\"x\"==t?e:3&e|8).toString(16)}),isValidId:t=>\"string\"==typeof t&&36===t.length};class Ce{constructor(t){this.idStrategy=void 0,this.tracked=void 0,this.spatialIndex=void 0,this.store=void 0,this._onChange=()=>{},this.store={},this.spatialIndex=new me,this.tracked=!t||!1!==t.tracked,this.idStrategy=t&&t.idStrategy?t.idStrategy:ve}clone(t){return JSON.parse(JSON.stringify(t))}getId(){return this.idStrategy.getId()}has(t){return Boolean(this.store[t])}load(t,e,i,o){if(0===t.length)return[];let s=this.clone(t);const n=[],r=[];s=s.filter(t=>{null==t.id&&(t.id=this.idStrategy.getId());const i=t.id;if(e){const o=e(t);if(!o.valid)return n.push({id:i,valid:!1,reason:o.reason}),!1}if(this.tracked){if(t.properties.createdAt){if(!a(t.properties.createdAt))return n.push({id:t.id,valid:!1,reason:\"createdAt is not a valid numeric timestamp\"}),!1}else t.properties.createdAt=+new Date;if(t.properties.updatedAt){if(!a(t.properties.updatedAt))return n.push({id:t.id,valid:!1,reason:\"updatedAt is not a valid numeric timestamp\"}),!1}else t.properties.updatedAt=+new Date}return this.has(i)?(n.push({id:i,valid:!1,reason:`Feature already exists with this id: ${i}`}),!1):(this.store[i]=t,r.push(t),n.push({id:i,valid:!0}),!0)}),this.spatialIndex.load(s);const d=r.map(({id:t})=>t);return d.length>0&&(this._onChange(d,\"create\",o),i&&r.forEach(t=>{i(t)})),n}search(t,e){const i=this.spatialIndex.search(t).map(t=>this.store[t]);return this.clone(e?i.filter(e):i)}registerOnChange(t){this._onChange=(e,i,o)=>{t(e,i,o)}}getGeometryCopy(t){const e=this.store[t];if(!e)throw new Error(`No feature with this id (${t}), can not get geometry copy`);return this.clone(e.geometry)}getPropertiesCopy(t){const e=this.store[t];if(!e)throw new Error(`No feature with this id (${t}), can not get properties copy`);return this.clone(e.properties)}updateProperty(t,e){const i=[];t.forEach(({id:t,property:e,value:o})=>{const s=this.store[t];if(!s)throw new Error(`No feature with this (${t}), can not update geometry`);i.push(t),void 0===o?delete s.properties[e]:s.properties[e]=o,this.tracked&&(s.properties.updatedAt=+new Date)}),this._onChange&&this._onChange(i,\"update\",e)}updateGeometry(t,e){const i=[];t.forEach(({id:t,geometry:e})=>{i.push(t);const o=this.store[t];if(!o)throw new Error(`No feature with this (${t}), can not update geometry`);o.geometry=this.clone(e),this.spatialIndex.update(o),this.tracked&&(o.properties.updatedAt=+new Date)}),this._onChange&&this._onChange(i,\"update\",e)}create(e,i){const o=[];return e.forEach(({geometry:e,properties:i})=>{let s,n=t({},i);this.tracked&&(s=+new Date,i?(n.createdAt=\"number\"==typeof i.createdAt?i.createdAt:s,n.updatedAt=\"number\"==typeof i.updatedAt?i.updatedAt:s):n={createdAt:s,updatedAt:s});const r=this.getId(),a={id:r,type:\"Feature\",geometry:e,properties:n};this.store[r]=a,this.spatialIndex.insert(a),o.push(r)}),this._onChange&&this._onChange([...o],\"create\",i),o}delete(t,e){t.forEach(t=>{if(!this.store[t])throw new Error(`No feature with id ${t}, can not delete`);delete this.store[t],this.spatialIndex.remove(t)}),this._onChange&&this._onChange([...t],\"delete\",e)}copy(t){return this.clone(this.store[t])}copyAll(){return this.clone(Object.keys(this.store).map(t=>this.store[t]))}copyAllWhere(t){return this.clone(Object.keys(this.store).map(t=>this.store[t]).filter(e=>e.properties&&t(e.properties)))}clear(){this.store={},this.spatialIndex.clear()}size(){return Object.keys(this.store).length}}function Pe(t){const e=t.coordinates;let i=0;if(e&&e.length>0){i+=Math.abs(Ee(e[0]));for(let t=1;t<e.length;t++)i-=Math.abs(Ee(e[t]))}return i}const Ie=20294876564838.72,xe=Math.PI/180;function Ee(t){const e=t.length;if(e<=2)return 0;let i=0,o=0;for(;o<e;)i+=(t[o+2>=e?(o+2)%e:o+2][0]*xe-t[o][0]*xe)*Math.sin(t[o+1===e?0:o+1][1]*xe),o++;return i*Ie}const Se=\"Feature is smaller than the minimum area\",Me=(t,e)=>\"Polygon\"!==t.geometry.type?{valid:!1,reason:d}:Pe(t.geometry)<e?{valid:!1,reason:Se}:{valid:!0},Fe=(t,e)=>\"Polygon\"!==t.geometry.type?{valid:!1,reason:d}:Pe(t.geometry)>e?{valid:!1,reason:\"Feature is larger than the maximum area\"}:{valid:!0},De=\"Feature is not a Polygon or LineString\",we=\"Feature intersects itself\",Oe=t=>\"Polygon\"!==t.geometry.type&&\"LineString\"!==t.geometry.type?{valid:!1,reason:De}:D(t)?{valid:!1,reason:we}:{valid:!0};function _e(t,e,i){const o=tt(t,e);let s=tt(e,i)-o;return s<0&&(s+=360),180-Math.abs(s-90-90)}const be={cancel:\"Escape\",finish:\"Enter\"},ke={start:\"crosshair\",close:\"pointer\"};class Ne extends u{constructor(t){super(t,!0),this.mode=\"angled-rectangle\",this.currentCoordinate=0,this.currentId=void 0,this.keyEvents=be,this.cursors=ke,this.mouseMove=!1,this.updateOptions(t)}updateOptions(e){super.updateOptions(e),null!=e&&e.cursors&&(this.cursors=t({},this.cursors,e.cursors)),null===(null==e?void 0:e.keyEvents)?this.keyEvents={cancel:null,finish:null}:null!=e&&e.keyEvents&&(this.keyEvents=t({},this.keyEvents,e.keyEvents))}close(){if(void 0===this.currentId)return;this.store.updateProperty([{id:this.currentId,property:o.CURRENTLY_DRAWING,value:void 0}]);const t=this.currentId;this.currentCoordinate=0,this.currentId=void 0,\"drawing\"===this.state&&this.setStarted(),this.onFinish(t,{mode:this.mode,action:\"draw\"})}start(){this.setStarted(),this.setCursor(this.cursors.start)}stop(){this.cleanUp(),this.setStopped(),this.setCursor(\"unset\")}onMouseMove(t){if(this.mouseMove=!0,this.setCursor(this.cursors.start),void 0===this.currentId||0===this.currentCoordinate)return;const i=this.store.getGeometryCopy(this.currentId).coordinates[0];let o;if(1===this.currentCoordinate){const e=1/Math.pow(10,this.coordinatePrecision-1),s=Math.max(1e-6,e);o=[i[0],[t.lng,t.lat],[t.lng,t.lat-s],i[0]]}else if(2===this.currentCoordinate){const e=i[0],s=i[1],n=jt(e,s,this.coordinatePrecision,this.project,this.unproject),r=E(e[0],e[1]),a=E(n[0],n[1]),d=E(s[0],s[1]),h=E(t.lng,t.lat),l=U(h,r)<U(h,d),c=_e(r,a,h),u=l?90-c:_e(r,a,h)-90,p=U(a,h),g=Math.cos(f(u))*p,y=tt(r,d)+(\"right\"===function(t,e,i){const o=(i.x-e.x)*(t.y-e.y)-(i.y-e.y)*(t.x-e.x);return o>1e-10?\"left\":o<-1e-10?\"right\":\"left\"}(r,d,h)?-90:90),m=J(r,g,y),v=J(d,g,y),C=S(m.x,m.y),P=S(v.x,v.y);o=[i[0],i[1],[P.lng,P.lat],[C.lng,C.lat],i[0]]}o&&this.updatePolygonGeometry(this.currentId,o,e.Provisional)}updatePolygonGeometry(t,e,i){const o={type:\"Polygon\",coordinates:[e]};return!(this.validate&&!this.validate({type:\"Feature\",geometry:o},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:i}).valid||(this.store.updateGeometry([{id:t,geometry:o}]),0))}onClick(t){if(\"right\"===t.button&&this.allowPointerEvent(this.pointerEvents.rightClick,t)||\"left\"===t.button&&this.allowPointerEvent(this.pointerEvents.leftClick,t)||t.isContextMenu&&this.allowPointerEvent(this.pointerEvents.contextMenu,t))if(this.currentCoordinate>0&&!this.mouseMove&&this.onMouseMove(t),this.mouseMove=!1,0===this.currentCoordinate){const[e]=this.store.create([{geometry:{type:\"Polygon\",coordinates:[[[t.lng,t.lat],[t.lng,t.lat],[t.lng,t.lat],[t.lng,t.lat]]]},properties:{mode:this.mode,[o.CURRENTLY_DRAWING]:!0}}]);this.currentId=e,this.currentCoordinate++,this.setDrawing()}else if(1===this.currentCoordinate&&this.currentId){const i=this.store.getGeometryCopy(this.currentId);if(rt([t.lng,t.lat],i.coordinates[0][0]))return;if(!this.updatePolygonGeometry(this.currentId,[i.coordinates[0][0],[t.lng,t.lat],[t.lng,t.lat],i.coordinates[0][0]],e.Commit))return;this.currentCoordinate++}else 2===this.currentCoordinate&&this.currentId&&this.close()}onKeyUp(t){if(t.key===this.keyEvents.cancel)this.cleanUp();else if(t.key===this.keyEvents.finish){if(this.currentCoordinate<2)return void this.cleanUp();this.close()}}onKeyDown(){}onDragStart(){}onDrag(){}onDragEnd(){}cleanUp(){try{this.currentId&&this.store.delete([this.currentId])}catch(t){}this.currentId=void 0,this.currentCoordinate=0,\"drawing\"===this.state&&this.setStarted()}styleFeature(e){const i=t({},{polygonFillColor:\"#3f97e0\",polygonOutlineColor:\"#3f97e0\",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:\"#3f97e0\",pointOutlineColor:\"#ffffff\",pointOutlineWidth:0,pointWidth:6,lineStringColor:\"#3f97e0\",lineStringWidth:4,zIndex:0});return e.properties.mode===this.mode&&\"Polygon\"===e.geometry.type&&(i.polygonFillColor=this.getHexColorStylingValue(this.styles.fillColor,i.polygonFillColor,e),i.polygonOutlineColor=this.getHexColorStylingValue(this.styles.outlineColor,i.polygonOutlineColor,e),i.polygonOutlineWidth=this.getNumericStylingValue(this.styles.outlineWidth,i.polygonOutlineWidth,e),i.polygonFillOpacity=this.getNumericStylingValue(this.styles.fillOpacity,i.polygonFillOpacity,e),i.zIndex=s),i}validateFeature(t){return this.validateModeFeature(t,t=>B(t,this.coordinatePrecision))}afterFeatureUpdated(t){this.currentId===t.id&&(this.currentId=void 0,this.currentCoordinate=0,\"drawing\"===this.state&&this.setStarted())}}function Te(t,e,i){return(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x)<=0}const je={cancel:\"Escape\",finish:\"Enter\"},We={start:\"crosshair\",close:\"pointer\"};class Be extends u{constructor(t){super(t,!0),this.mode=\"sector\",this.currentCoordinate=0,this.currentId=void 0,this.keyEvents=je,this.direction=void 0,this.arcPoints=64,this.cursors=We,this.mouseMove=!1,this.updateOptions(t)}updateOptions(e){super.updateOptions(e),null!=e&&e.cursors&&(this.cursors=t({},this.cursors,e.cursors)),null===(null==e?void 0:e.keyEvents)?this.keyEvents={cancel:null,finish:null}:null!=e&&e.keyEvents&&(this.keyEvents=t({},this.keyEvents,e.keyEvents)),null!=e&&e.arcPoints&&(this.arcPoints=e.arcPoints)}close(){if(void 0===this.currentId)return;const t=A(this.store.getGeometryCopy(this.currentId));t&&this.store.updateGeometry([{id:this.currentId,geometry:t}]),this.store.updateProperty([{id:this.currentId,property:o.CURRENTLY_DRAWING,value:void 0}]);const e=this.currentId;this.currentCoordinate=0,this.currentId=void 0,this.direction=void 0,\"drawing\"===this.state&&this.setStarted(),this.onFinish(e,{mode:this.mode,action:\"draw\"})}start(){this.setStarted(),this.setCursor(this.cursors.start)}stop(){this.cleanUp(),this.setStopped(),this.setCursor(\"unset\")}onMouseMove(t){if(this.mouseMove=!0,this.setCursor(this.cursors.start),void 0===this.currentId||0===this.currentCoordinate)return;const i=this.store.getGeometryCopy(this.currentId).coordinates[0];let o;if(1===this.currentCoordinate){const e=1/Math.pow(10,this.coordinatePrecision-1),s=Math.max(1e-6,e);o=[i[0],[t.lng,t.lat],[t.lng,t.lat-s],i[0]]}else if(2===this.currentCoordinate){const e=i[0],s=i[1],n=[t.lng,t.lat],r=E(e[0],e[1]),a=E(s[0],s[1]),d=E(n[0],n[1]);if(void 0===this.direction){const t=Te(r,a,d);this.direction=t?\"clockwise\":\"anticlockwise\"}const h=U(r,a),l=tt(r,a),c=tt(r,d),u=this.arcPoints,p=[e],g=et(l),y=et(c);let f;\"anticlockwise\"===this.direction?(f=y-g,f<0&&(f+=360)):(f=g-y,f<0&&(f+=360));const m=(\"anticlockwise\"===this.direction?1:-1)*f/u;p.push(s);for(let t=0;t<=u;t++){const e=J(r,h,g+t*m),{lng:i,lat:o}=S(e.x,e.y),s=[C(i,this.coordinatePrecision),C(o,this.coordinatePrecision)];s[0]!==p[p.length-1][0]&&s[1]!==p[p.length-1][1]&&p.push(s)}p.push(e),o=[...p]}o&&this.updatePolygonGeometry(this.currentId,o,e.Provisional)}updatePolygonGeometry(t,e,i){const o={type:\"Polygon\",coordinates:[e]};return!(this.validate&&!this.validate({type:\"Feature\",geometry:o},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:i}).valid||(this.store.updateGeometry([{id:t,geometry:o}]),0))}onClick(t){if(\"right\"===t.button&&this.allowPointerEvent(this.pointerEvents.rightClick,t)||\"left\"===t.button&&this.allowPointerEvent(this.pointerEvents.leftClick,t)||t.isContextMenu&&this.allowPointerEvent(this.pointerEvents.contextMenu,t))if(this.currentCoordinate>0&&!this.mouseMove&&this.onMouseMove(t),this.mouseMove=!1,0===this.currentCoordinate){const[e]=this.store.create([{geometry:{type:\"Polygon\",coordinates:[[[t.lng,t.lat],[t.lng,t.lat],[t.lng,t.lat],[t.lng,t.lat]]]},properties:{mode:this.mode,[o.CURRENTLY_DRAWING]:!0}}]);this.currentId=e,this.currentCoordinate++,this.setDrawing()}else if(1===this.currentCoordinate&&this.currentId){const i=this.store.getGeometryCopy(this.currentId);if(rt([t.lng,t.lat],i.coordinates[0][0]))return;if(!this.updatePolygonGeometry(this.currentId,[i.coordinates[0][0],[t.lng,t.lat],[t.lng,t.lat],i.coordinates[0][0]],e.Commit))return;this.currentCoordinate++}else 2===this.currentCoordinate&&this.currentId&&this.close()}onKeyUp(t){t.key===this.keyEvents.cancel?this.cleanUp():t.key===this.keyEvents.finish&&this.close()}onKeyDown(){}onDragStart(){}onDrag(){}onDragEnd(){}cleanUp(){try{this.currentId&&this.store.delete([this.currentId])}catch(t){}this.currentId=void 0,this.direction=void 0,this.currentCoordinate=0,\"drawing\"===this.state&&this.setStarted()}styleFeature(e){const i=t({},{polygonFillColor:\"#3f97e0\",polygonOutlineColor:\"#3f97e0\",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:\"#3f97e0\",pointOutlineColor:\"#ffffff\",pointOutlineWidth:0,pointWidth:6,lineStringColor:\"#3f97e0\",lineStringWidth:4,zIndex:0});return e.properties.mode===this.mode&&\"Polygon\"===e.geometry.type&&(i.polygonFillColor=this.getHexColorStylingValue(this.styles.fillColor,i.polygonFillColor,e),i.polygonOutlineColor=this.getHexColorStylingValue(this.styles.outlineColor,i.polygonOutlineColor,e),i.polygonOutlineWidth=this.getNumericStylingValue(this.styles.outlineWidth,i.polygonOutlineWidth,e),i.polygonFillOpacity=this.getNumericStylingValue(this.styles.fillOpacity,i.polygonFillOpacity,e),i.zIndex=s),i}validateFeature(t){return this.validateModeFeature(t,t=>B(t,this.coordinatePrecision))}afterFeatureUpdated(t){this.currentId===t.id&&(this.currentId=void 0,this.direction=void 0,this.currentCoordinate=0,\"drawing\"===this.state&&this.setStarted())}}const Ge={cancel:\"Escape\",finish:\"Enter\"},Re={start:\"crosshair\",close:\"pointer\"};class Le extends u{constructor(t){super(t,!0),this.mode=\"sensor\",this.currentCoordinate=0,this.currentId=void 0,this.currentInitialArcId=void 0,this.currentStartingPointId=void 0,this.keyEvents=Ge,this.direction=void 0,this.arcPoints=64,this.cursors=Re,this.mouseMove=!1,this.updateOptions(t)}updateOptions(e){super.updateOptions(e),null!=e&&e.cursors&&(this.cursors=t({},this.cursors,e.cursors)),null===(null==e?void 0:e.keyEvents)?this.keyEvents={cancel:null,finish:null}:null!=e&&e.keyEvents&&(this.keyEvents=t({},this.keyEvents,e.keyEvents)),null!=e&&e.arcPoints&&(this.arcPoints=e.arcPoints)}close(){if(void 0===this.currentStartingPointId)return;const t=this.currentStartingPointId,e=this.currentInitialArcId,i=this.currentId;if(t&&this.store.delete([t]),e&&this.store.delete([e]),this.currentId){const t=A(this.store.getGeometryCopy(this.currentId));t&&this.store.updateGeometry([{id:this.currentId,geometry:t}]),this.store.updateProperty([{id:this.currentId,property:o.CURRENTLY_DRAWING,value:void 0}])}this.currentCoordinate=0,this.currentStartingPointId=void 0,this.currentInitialArcId=void 0,this.currentId=void 0,this.direction=void 0,\"drawing\"===this.state&&this.setStarted(),i&&this.onFinish(i,{mode:this.mode,action:\"draw\"})}start(){this.setStarted(),this.setCursor(this.cursors.start)}stop(){this.cleanUp(),this.setStopped(),this.setCursor(\"unset\")}onMouseMove(t){if(this.mouseMove=!0,this.setCursor(this.cursors.start),void 0!==this.currentInitialArcId&&void 0!==this.currentStartingPointId&&0!==this.currentCoordinate)if(2===this.currentCoordinate){const i=this.store.getGeometryCopy(this.currentInitialArcId).coordinates,o=this.store.getGeometryCopy(this.currentStartingPointId).coordinates,s=i[0],n=[t.lng,t.lat],r=E(s[0],s[1]),a=E(n[0],n[1]),d=E(o[0],o[1]),h=U(d,r);if(void 0===this.direction){const t=Te(d,r,a);this.direction=t?\"clockwise\":\"anticlockwise\"}const l=tt(d,r),c=tt(d,a),u=this.arcPoints,p=[s],g=et(l),y=et(c);let f;\"anticlockwise\"===this.direction?(f=y-g,f<0&&(f+=360)):(f=g-y,f<0&&(f+=360));const m=(\"anticlockwise\"===this.direction?1:-1)*f/u;for(let t=0;t<=u;t++){const e=J(d,h,g+t*m),{lng:i,lat:o}=S(e.x,e.y),s=[C(i,this.coordinatePrecision),C(o,this.coordinatePrecision)];s[0]!==p[p.length-1][0]&&s[1]!==p[p.length-1][1]&&p.push(s)}this.updateLineStringGeometry(this.currentInitialArcId,p,e.Provisional)}else if(3===this.currentCoordinate){const i=this.store.getGeometryCopy(this.currentInitialArcId).coordinates;if(i.length<2)return;if(!this.direction)return;const s=this.store.getGeometryCopy(this.currentStartingPointId).coordinates,n=i[0],r=i[i.length-1],a=E(t.lng,t.lat),d=E(n[0],n[1]),h=E(r[0],r[1]),l=E(s[0],s[1]),c=U(l,d),u=U(l,a)<c?d:a,p=tt(l,a),g=tt(l,d),y=tt(l,h),f=et(g),m=et(y),v=et(p);if(this.notInSector({normalizedCursor:v,normalizedStart:f,normalizedEnd:m,direction:this.direction}))return;const P=this.getDeltaBearing(this.direction,f,m),I=this.arcPoints,x=(\"anticlockwise\"===this.direction?1:-1)*P/I,M=U(l,u),F=[];for(let t=0;t<=I;t++){const e=J(l,M,f+t*x),{lng:o,lat:s}=S(e.x,e.y),n=[C(o,this.coordinatePrecision),C(s,this.coordinatePrecision)];n[0]!==i[i.length-1][0]&&n[1]!==i[i.length-1][1]&&F.unshift(n)}i.push(...F),i.push(i[0]),this.currentId?this.updatePolygonGeometry(this.currentId,i,e.Provisional):[this.currentId]=this.store.create([{geometry:{type:\"Polygon\",coordinates:[i]},properties:{mode:this.mode,[o.CURRENTLY_DRAWING]:!0}}])}}updateLineStringGeometry(t,e,i){const o={type:\"LineString\",coordinates:e};return!(this.validate&&!this.validate({type:\"Feature\",geometry:o},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:i}).valid||(this.store.updateGeometry([{id:t,geometry:o}]),0))}updatePolygonGeometry(t,e,i){const o={type:\"Polygon\",coordinates:[e]};return!(this.validate&&!this.validate({type:\"Feature\",geometry:o},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:i}).valid||(this.store.updateGeometry([{id:t,geometry:o}]),0))}onClick(t){if(\"right\"===t.button&&this.allowPointerEvent(this.pointerEvents.rightClick,t)||\"left\"===t.button&&this.allowPointerEvent(this.pointerEvents.leftClick,t)||t.isContextMenu&&this.allowPointerEvent(this.pointerEvents.contextMenu,t))if(this.currentCoordinate>0&&!this.mouseMove&&this.onMouseMove(t),this.mouseMove=!1,0===this.currentCoordinate){const[e]=this.store.create([{geometry:{type:\"Point\",coordinates:[t.lng,t.lat]},properties:{mode:this.mode}}]);this.currentStartingPointId=e,this.currentCoordinate++,this.setDrawing()}else if(1===this.currentCoordinate&&this.currentStartingPointId){const[e]=this.store.create([{geometry:{type:\"LineString\",coordinates:[[t.lng,t.lat],[t.lng,t.lat]]},properties:{mode:this.mode}}]);this.currentInitialArcId=e,this.currentCoordinate++}else 2===this.currentCoordinate&&this.currentStartingPointId?this.currentCoordinate++:3===this.currentCoordinate&&this.currentStartingPointId&&this.close()}onKeyUp(t){t.key===this.keyEvents.cancel?this.cleanUp():t.key===this.keyEvents.finish&&this.close()}onKeyDown(){}onDragStart(){}onDrag(){}onDragEnd(){}cleanUp(){try{this.currentStartingPointId&&this.store.delete([this.currentStartingPointId]),this.currentInitialArcId&&this.store.delete([this.currentInitialArcId]),this.currentId&&this.store.delete([this.currentId])}catch(t){}this.currentStartingPointId=void 0,this.direction=void 0,this.currentId=void 0,this.currentCoordinate=0,\"drawing\"===this.state&&this.setStarted()}styleFeature(e){const i=t({},{polygonFillColor:\"#3f97e0\",polygonOutlineColor:\"#3f97e0\",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:\"#3f97e0\",pointOutlineColor:\"#ffffff\",pointOutlineWidth:0,pointWidth:6,lineStringColor:\"#3f97e0\",lineStringWidth:4,zIndex:0});return e.properties.mode===this.mode&&(\"Polygon\"===e.geometry.type?(i.polygonFillColor=this.getHexColorStylingValue(this.styles.fillColor,i.polygonFillColor,e),i.polygonOutlineColor=this.getHexColorStylingValue(this.styles.outlineColor,i.polygonOutlineColor,e),i.polygonOutlineWidth=this.getNumericStylingValue(this.styles.outlineWidth,i.polygonOutlineWidth,e),i.polygonFillOpacity=this.getNumericStylingValue(this.styles.fillOpacity,i.polygonFillOpacity,e),i.zIndex=s):\"LineString\"===e.geometry.type?(i.lineStringColor=this.getHexColorStylingValue(this.styles.outlineColor,i.polygonOutlineColor,e),i.lineStringWidth=this.getNumericStylingValue(this.styles.outlineWidth,i.polygonOutlineWidth,e),i.zIndex=s):\"Point\"===e.geometry.type&&(i.pointColor=this.getHexColorStylingValue(this.styles.centerPointColor,i.pointColor,e),i.pointWidth=this.getNumericStylingValue(this.styles.centerPointWidth,i.pointWidth,e),i.pointOutlineColor=this.getHexColorStylingValue(this.styles.centerPointOutlineColor,i.pointOutlineColor,e),i.pointOutlineWidth=this.getNumericStylingValue(this.styles.centerPointOutlineWidth,i.pointOutlineWidth,e),i.zIndex=20)),i}validateFeature(t){return this.validateModeFeature(t,t=>B(t,this.coordinatePrecision))}afterFeatureUpdated(t){this.currentId===t.id&&(this.currentStartingPointId&&this.store.delete([this.currentStartingPointId]),this.currentInitialArcId&&this.store.delete([this.currentInitialArcId]),this.currentStartingPointId=void 0,this.direction=void 0,this.currentId=void 0,this.currentCoordinate=0,\"drawing\"===this.state&&this.setStarted())}getDeltaBearing(t,e,i){let o;return\"anticlockwise\"===t?(o=i-e,o<0&&(o+=360)):(o=e-i,o<0&&(o+=360)),o}notInSector({normalizedCursor:t,normalizedStart:e,normalizedEnd:i,direction:o}){return\"clockwise\"===o?e<=i?t>=e&&t<=i:t>=e||t<=i:e>=i?t<=e&&t>=i:t<=e||t>=i}}class Ue{constructor({name:t,callback:e,unregister:i,register:o}){this.name=void 0,this.callback=void 0,this.registered=!1,this.register=void 0,this.unregister=void 0,this.name=t,this.register=()=>{this.registered||(this.registered=!0,o(e))},this.unregister=()=>{this.register&&(this.registered=!1,i(e))},this.callback=e}}var Ae={__proto__:null,GeoJSONStore:Ce,TerraDrawBaseDrawMode:u,TerraDrawBaseSelectMode:p,TerraDrawBaseAdapter:class{constructor(t){this._nextKeyUpIsContextMenu=!1,this._minPixelDragDistance=void 0,this._minPixelDragDistanceDrawing=void 0,this._minPixelDragDistanceSelecting=void 0,this._lastDrawEvent=void 0,this._coordinatePrecision=void 0,this._heldKeys=new Set,this._listeners=[],this._dragState=\"not-dragging\",this._currentModeCallbacks=void 0,this._minPixelDragDistance=\"number\"==typeof t.minPixelDragDistance?t.minPixelDragDistance:1,this._minPixelDragDistanceSelecting=\"number\"==typeof t.minPixelDragDistanceSelecting?t.minPixelDragDistanceSelecting:1,this._minPixelDragDistanceDrawing=\"number\"==typeof t.minPixelDragDistanceDrawing?t.minPixelDragDistanceDrawing:8,this._coordinatePrecision=\"number\"==typeof t.coordinatePrecision?t.coordinatePrecision:9}getButton(t){return-1===t.button?\"neither\":0===t.button?\"left\":1===t.button?\"middle\":2===t.button?\"right\":\"neither\"}getMapElementXYPosition(t){const e=this.getMapEventElement(),{left:i,top:o}=e.getBoundingClientRect();return{containerX:t.clientX-i,containerY:t.clientY-o}}getDrawEventFromEvent(t,e=!1){const i=this.getLngLatFromEvent(t);if(!i)return null;const{lng:o,lat:s}=i,{containerX:n,containerY:r}=this.getMapElementXYPosition(t),a=this.getButton(t),d=Array.from(this._heldKeys);return{lng:C(o,this._coordinatePrecision),lat:C(s,this._coordinatePrecision),containerX:n,containerY:r,button:a,heldKeys:d,isContextMenu:e}}register(t){this._currentModeCallbacks=t,this._listeners=this.getAdapterListeners(),this._listeners.forEach(t=>{t.register()})}getCoordinatePrecision(){return this._coordinatePrecision}getAdapterListeners(){return[new Ue({name:\"pointerdown\",callback:t=>{if(!this._currentModeCallbacks)return;if(!t.isPrimary)return;const e=this.getDrawEventFromEvent(t);e&&(this._dragState=\"pre-dragging\",this._lastDrawEvent=e)},register:t=>{this.getMapEventElement().addEventListener(\"pointerdown\",t)},unregister:t=>{this.getMapEventElement().removeEventListener(\"pointerdown\",t)}}),new Ue({name:\"pointermove\",callback:t=>{if(!this._currentModeCallbacks)return;if(!t.isPrimary)return;t.preventDefault();const e=this.getDrawEventFromEvent(t);if(e)if(\"not-dragging\"===this._dragState)this._currentModeCallbacks.onMouseMove(e),this._lastDrawEvent=e;else if(\"pre-dragging\"===this._dragState){if(!this._lastDrawEvent)return;const t={x:this._lastDrawEvent.containerX,y:this._lastDrawEvent.containerY},i={x:e.containerX,y:e.containerY},o=this._currentModeCallbacks.getState(),s=U(t,i);let n=!1;if(n=\"drawing\"===o?s<this._minPixelDragDistanceDrawing:\"selecting\"===o?s<this._minPixelDragDistanceSelecting:s<this._minPixelDragDistance,n)return;this._nextKeyUpIsContextMenu=!1,this._dragState=\"dragging\",this._currentModeCallbacks.onDragStart(e,t=>{this.setDraggability.bind(this)(t)})}else\"dragging\"===this._dragState&&this._currentModeCallbacks.onDrag(e,t=>{this.setDraggability.bind(this)(t)})},register:t=>{this.getMapEventElement().addEventListener(\"pointermove\",t)},unregister:t=>{this.getMapEventElement().removeEventListener(\"pointermove\",t)}}),new Ue({name:\"contextmenu\",callback:t=>{this._currentModeCallbacks&&(t.preventDefault(),this._nextKeyUpIsContextMenu=!0)},register:t=>{this.getMapEventElement().addEventListener(\"contextmenu\",t)},unregister:t=>{this.getMapEventElement().removeEventListener(\"contextmenu\",t)}}),new Ue({name:\"pointerup\",callback:t=>{if(!this._currentModeCallbacks)return;if(t.target!==this.getMapEventElement())return;if(!t.isPrimary)return;const e=this.getDrawEventFromEvent(t);e&&(\"dragging\"===this._dragState?this._currentModeCallbacks.onDragEnd(e,t=>{this.setDraggability.bind(this)(t)}):\"not-dragging\"!==this._dragState&&\"pre-dragging\"!==this._dragState||(this._nextKeyUpIsContextMenu&&(e.isContextMenu=!0,this._nextKeyUpIsContextMenu=!1),this._currentModeCallbacks.onClick(e)),this._dragState=\"not-dragging\",this.setDraggability(!0))},register:t=>{this.getMapEventElement().addEventListener(\"pointerup\",t)},unregister:t=>{this.getMapEventElement().removeEventListener(\"pointerup\",t)}}),new Ue({name:\"keyup\",callback:t=>{this._currentModeCallbacks&&(this._heldKeys.delete(t.key),this._currentModeCallbacks.onKeyUp({key:t.key,heldKeys:Array.from(this._heldKeys),preventDefault:()=>t.preventDefault()}))},register:t=>{this.getMapEventElement().addEventListener(\"keyup\",t)},unregister:t=>{this.getMapEventElement().removeEventListener(\"keyup\",t)}}),new Ue({name:\"keydown\",callback:t=>{this._currentModeCallbacks&&(this._heldKeys.add(t.key),this._currentModeCallbacks.onKeyDown({key:t.key,heldKeys:Array.from(this._heldKeys),preventDefault:()=>t.preventDefault()}))},register:t=>{this.getMapEventElement().addEventListener(\"keydown\",t)},unregister:t=>{this.getMapEventElement().removeEventListener(\"keydown\",t)}})]}unregister(){this._listeners.forEach(t=>{t.unregister()}),this.clear(),this._currentModeCallbacks=void 0}},getDefaultStyling:()=>({polygonFillColor:\"#3f97e0\",polygonOutlineColor:\"#3f97e0\",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:\"#3f97e0\",pointOutlineColor:\"#ffffff\",pointOutlineWidth:0,pointWidth:6,lineStringColor:\"#3f97e0\",lineStringWidth:4,zIndex:0}),SELECT_PROPERTIES:i};const Ve={ValidationReasonFeatureNotPoint:vt,ValidationReasonFeatureInvalidCoordinates:Ct,ValidationReasonFeatureInvalidCoordinatePrecision:Pt,ValidationReasonFeatureNotPolygon:d,ValidationReasonFeatureHasHoles:k,ValidationReasonFeatureLessThanFourCoordinates:N,ValidationReasonFeatureHasInvalidCoordinates:T,ValidationReasonFeatureCoordinatesNotClosed:j,ValidationReasonFeatureNotPolygonOrLineString:De,ValidationReasonFeatureSelfIntersects:we,ValidationReasonFeatureLessThanMinSize:Se,ValidationReasonModeMismatch:h},Ye={cancel:\"Escape\",finish:\"Enter\"},Ke={start:\"crosshair\",close:\"pointer\"};class ze extends u{constructor(t){super(t,!0),this.mode=\"freehand-linestring\",this.startingClick=!1,this.currentId=void 0,this.closingPointId=void 0,this.minDistance=20,this.keyEvents=Ye,this.cursors=Ke,this.preventNewFeature=!1,this.updateOptions(t)}updateOptions(e){super.updateOptions(e),null!=e&&e.minDistance&&(this.minDistance=e.minDistance),null===(null==e?void 0:e.keyEvents)?this.keyEvents={cancel:null,finish:null}:null!=e&&e.keyEvents&&(this.keyEvents=t({},this.keyEvents,e.keyEvents)),null!=e&&e.cursors&&(this.cursors=t({},this.cursors,e.cursors))}close(){if(void 0===this.currentId)return;this.currentId&&this.store.updateProperty([{id:this.currentId,property:o.CURRENTLY_DRAWING,value:void 0}]);const t=this.currentId;if(this.validate&&t){const i=this.store.getGeometryCopy(t);if(!this.validate({type:\"Feature\",id:t,geometry:i,properties:{}},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e.Finish}).valid)return}this.closingPointId&&this.store.delete([this.closingPointId]),this.startingClick=!1,this.currentId=void 0,this.closingPointId=void 0,\"drawing\"===this.state&&this.setStarted(),this.onFinish(t,{mode:this.mode,action:\"draw\"})}start(){this.setStarted(),this.setCursor(this.cursors.start)}stop(){this.cleanUp(),this.setStopped(),this.setCursor(\"unset\")}onMouseMove(t){if(void 0===this.currentId||!1===this.startingClick)return void this.setCursor(this.cursors.start);const i=this.store.getGeometryCopy(this.currentId),o=i.coordinates.length-2,[s,n]=i.coordinates[o],{x:r,y:a}=this.project(s,n),d=U({x:r,y:a},{x:t.containerX,y:t.containerY}),[h,l]=i.coordinates[i.coordinates.length-1],{x:c,y:u}=this.project(h,l),p=U({x:c,y:u},{x:t.containerX,y:t.containerY});if(this.setCursor(p<this.pointerDistance?this.cursors.close:this.cursors.start),d<this.minDistance)return;const g={type:\"LineString\",coordinates:[...i.coordinates,[t.lng,t.lat]]};this.validate&&!this.validate({type:\"Feature\",id:this.currentId,geometry:g,properties:{}},{project:this.project,unproject:this.unproject,coordinatePrecision:this.coordinatePrecision,updateType:e.Provisional}).valid||(this.store.updateGeometry([{id:this.currentId,geometry:g}]),this.closingPointId&&this.store.updateGeometry([{id:this.closingPointId,geometry:{type:\"Point\",coordinates:[t.lng,t.lat]}}]))}onClick(t){if(\"right\"===t.button&&this.allowPointerEvent(this.pointerEvents.rightClick,t)||\"left\"===t.button&&this.allowPointerEvent(this.pointerEvents.leftClick,t)||t.isContextMenu&&this.allowPointerEvent(this.pointerEvents.contextMenu,t)){if(this.preventNewFeature)return;if(!1===this.startingClick){const[e,i]=this.store.create([{geometry:{type:\"LineString\",coordinates:[[t.lng,t.lat],[t.lng,t.lat]]},properties:{mode:this.mode,[o.CURRENTLY_DRAWING]:!0}},{geometry:{type:\"Point\",coordinates:[t.lng,t.lat]},properties:{mode:this.mode,[o.CLOSING_POINT]:!0}}]);return this.currentId=e,this.closingPointId=i,this.startingClick=!0,void(\"drawing\"!==this.state&&this.setDrawing())}this.close()}}onKeyDown(){}onKeyUp(t){t.key===this.keyEvents.cancel?this.cleanUp():t.key===this.keyEvents.finish&&!0===this.startingClick&&this.close()}onDragStart(){}onDrag(){}onDragEnd(){}cleanUp(){const t=this.currentId,e=this.closingPointId;this.closingPointId=void 0,this.currentId=void 0,this.startingClick=!1,\"drawing\"===this.state&&this.setStarted();try{void 0!==t&&this.store.delete([t]),void 0!==e&&this.store.delete([e])}catch(t){}}styleFeature(e){const i=t({},{polygonFillColor:\"#3f97e0\",polygonOutlineColor:\"#3f97e0\",polygonOutlineWidth:4,polygonFillOpacity:.3,pointColor:\"#3f97e0\",pointOutlineColor:\"#ffffff\",pointOutlineWidth:0,pointWidth:6,lineStringColor:\"#3f97e0\",lineStringWidth:4,zIndex:0});return\"Feature\"===e.type&&\"LineString\"===e.geometry.type&&e.properties.mode===this.mode?(i.lineStringColor=this.getHexColorStylingValue(this.styles.lineStringColor,i.lineStringColor,e),i.lineStringWidth=this.getNumericStylingValue(this.styles.lineStringWidth,i.lineStringWidth,e),i.zIndex=s,i):\"Feature\"===e.type&&\"Point\"===e.geometry.type&&e.properties.mode===this.mode?(i.pointWidth=this.getNumericStylingValue(this.styles.closingPointWidth,i.pointWidth,e),i.pointColor=this.getHexColorStylingValue(this.styles.closingPointColor,i.pointColor,e),i.pointOutlineColor=this.getHexColorStylingValue(this.styles.closingPointOutlineColor,i.pointOutlineColor,e),i.pointOutlineWidth=this.getNumericStylingValue(this.styles.closingPointOutlineWidth,2,e),i.zIndex=50,i):i}validateFeature(t){return this.validateModeFeature(t,t=>at(t,this.coordinatePrecision))}afterFeatureUpdated(t){this.currentId===t.id&&(this.closingPointId&&this.store.delete([this.closingPointId]),this.startingClick=!1,this.currentId=void 0,this.closingPointId=void 0)}}function Xe(t){if(null===t)return!0;if(\"boolean\"==typeof t)return!0;if(\"string\"==typeof t)return!0;if(void 0===t)return!1;if(\"number\"==typeof t)return Number.isFinite(t);if(\"bigint\"==typeof t)return!1;if(\"symbol\"==typeof t)return!1;if(\"function\"==typeof t)return!1;if(t instanceof RegExp)return!1;if(t instanceof Map)return!1;if(t instanceof Set)return!1;if(t instanceof Date)return!1;if(\"object\"==typeof t&&null!==t&&!Array.isArray(t)){const e=Object.getPrototypeOf(t);if(e!==Object.prototype&&null!==e)return!1}if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return!1;if(Array.isArray(t))for(const e of t)if(!Xe(e))return!1;return\"object\"==typeof t&&Object.keys(t).every(e=>\"string\"==typeof e&&Xe(t[e]))}class He{constructor(e){this._modes=void 0,this._mode=void 0,this._adapter=void 0,this._enabled=!1,this._store=void 0,this._eventListeners=void 0,this._instanceSelectMode=void 0,this._adapter=e.adapter,this._mode=new ee;const i=new Set,o=e.modes.reduce((t,e)=>{if(i.has(e.mode))throw new Error(`There is already a ${e.mode} mode provided`);return i.add(e.mode),t[e.mode]=e,t},{}),s=Object.keys(o);if(0===s.length)throw new Error(\"No modes provided\");s.forEach(t=>{if(o[t].type===l.Select){if(this._instanceSelectMode)throw new Error(\"only one type of select mode can be provided\");this._instanceSelectMode=t}}),this._modes=t({},o,{static:this._mode}),this._eventListeners={change:[],select:[],deselect:[],finish:[],ready:[]},this._store=new Ce({tracked:!!e.tracked,idStrategy:e.idStrategy?e.idStrategy:void 0});const n=t=>{const e=[],i=this._store.copyAll().filter(i=>!t.includes(i.id)||(e.push(i),!1));return{changed:e,unchanged:i}},r=(t,e)=>{this._enabled&&this._eventListeners.finish.forEach(i=>{i(t,e)})},a=(t,e,i)=>{if(!this._enabled)return;this._eventListeners.change.forEach(o=>{o(t,e,i)});const{changed:o,unchanged:s}=n(t);\"create\"===e?this._adapter.render({created:o,deletedIds:[],unchanged:s,updated:[]},this.getModeStyles()):\"update\"===e?this._adapter.render({created:[],deletedIds:[],unchanged:s,updated:o},this.getModeStyles()):\"delete\"===e?this._adapter.render({created:[],deletedIds:t,unchanged:s,updated:[]},this.getModeStyles()):\"styling\"===e&&this._adapter.render({created:[],deletedIds:[],unchanged:s,updated:[]},this.getModeStyles())},d=t=>{if(!this._enabled)return;this._eventListeners.select.forEach(e=>{e(t)});const{changed:e,unchanged:i}=n([t]);this._adapter.render({created:[],deletedIds:[],unchanged:i,updated:e},this.getModeStyles())},h=t=>{if(!this._enabled)return;this._eventListeners.deselect.forEach(t=>{t()});const{changed:e,unchanged:i}=n([t]);e&&this._adapter.render({created:[],deletedIds:[],unchanged:i,updated:e},this.getModeStyles())};Object.keys(this._modes).forEach(t=>{this._modes[t].register({mode:t,store:this._store,setCursor:this._adapter.setCursor.bind(this._adapter),project:this._adapter.project.bind(this._adapter),unproject:this._adapter.unproject.bind(this._adapter),setDoubleClickToZoom:this._adapter.setDoubleClickToZoom.bind(this._adapter),onChange:a,onSelect:d,onDeselect:h,onFinish:r,coordinatePrecision:this._adapter.getCoordinatePrecision()})})}checkEnabled(){if(!this._enabled)throw new Error(\"Terra Draw is not enabled\")}getModeStyles(){const t={};return Object.keys(this._modes).forEach(e=>{t[e]=t=>this._instanceSelectMode&&t.properties[i.SELECTED]?this._modes[this._instanceSelectMode].styleFeature.bind(this._modes[this._instanceSelectMode])(t):this._modes[e].styleFeature.bind(this._modes[e])(t)}),t}featuresAtLocation({lng:t,lat:e},s){const n=s&&void 0!==s.pointerDistance?s.pointerDistance:30,r=!s||void 0===s.ignoreSelectFeatures||s.ignoreSelectFeatures,a=!(!s||void 0===s.ignoreCoordinatePoints)&&s.ignoreCoordinatePoints,d=!(!s||void 0===s.ignoreCurrentlyDrawing)&&s.ignoreCurrentlyDrawing,h=!(!s||void 0===s.ignoreClosingPoints)&&s.ignoreClosingPoints,l=this._adapter.unproject.bind(this._adapter),c=this._adapter.project.bind(this._adapter),u=c(t,e),p=X({unproject:l,point:u,pointerDistance:n});return this._store.search(p).filter(l=>{if(r&&(l.properties[i.MID_POINT]||l.properties[i.SELECTION_POINT]))return!1;if(a&&l.properties[o.COORDINATE_POINT])return!1;if(h&&l.properties[o.CLOSING_POINT])return!1;if(d&&l.properties[o.CURRENTLY_DRAWING])return!1;if(\"Point\"===l.geometry.type){const t=l.geometry.coordinates,e=c(t[0],t[1]);return U(u,e)<n}if(\"LineString\"===l.geometry.type){const t=l.geometry.coordinates;for(let e=0;e<t.length-1;e++){const i=t[e],o=t[e+1];if(Ut(u,c(i[0],i[1]),c(o[0],o[1]))<n)return!0}return!1}if(Lt([t,e],l.geometry.coordinates))return!0;if(null!=s&&s.includePolygonsWithinPointerDistance){const t=l.geometry.coordinates;for(const e of t)for(let t=0;t<e.length-1;t++){const i=e[t],o=e[t+1],s=c(i[0],i[1]),r=c(o[0],o[1]);if(Ut(u,s,r)<n)return!0}}return!1}).map(i=>{if(null==s||!s.addClosestCoordinateInfoToProperties)return i;let o;if(\"Polygon\"===i.geometry.type)o=i.geometry.coordinates[0],o.pop();else{if(\"LineString\"!==i.geometry.type)return i;o=i.geometry.coordinates}let n,r=-1,a=Infinity;for(let t=0;t<o.length;t++){const e=o[t],i=U(c(e[0],e[1]),u);i<a&&(r=t,a=i,n=e)}return i.properties.closestCoordinateIndexToEvent=r,i.properties.closestCoordinatePixelDistanceToEvent=a,i.properties.closestCoordinateDistanceKmToEvent=g(n,[t,e]),i})}getSelectModeOrThrow(){const t=this.getSelectMode({switchToSelectMode:!0});if(!t)throw new Error(\"No select mode defined in instance\");return t}getSelectMode({switchToSelectMode:t}){if(this.checkEnabled(),!this._instanceSelectMode)return null;const e=this.getMode();return t&&e!==this._instanceSelectMode&&this.setMode(this._instanceSelectMode),this._modes[this._instanceSelectMode]}isGuidanceFeature(t){return Boolean(t.properties[i.MID_POINT]||t.properties[i.SELECTION_POINT]||t.properties[o.COORDINATE_POINT]||t.properties[o.SNAPPING_POINT])}setModeStyles(t,e){if(this.checkEnabled(),!this._modes[t])throw new Error(\"No mode with this name present\");this._modes[t].styles=e}updateModeOptions(t,e){if(this.checkEnabled(),!this._modes[t])throw new Error(\"No mode with this name present\");this._modes[t].updateOptions(e)}getSnapshot(){return this._store.copyAll()}getSnapshotFeature(t){if(this._store.has(t))return this._store.copy(t)}clear(){this.checkEnabled(),this._adapter.clear()}get enabled(){return this._enabled}set enabled(t){throw new Error(\"Enabled is read only\")}getMode(){return this._mode.mode}getModeState(){return this._mode.state}setMode(t){if(this.checkEnabled(),!this._modes[t])throw new Error(\"No mode with this name present\");this._mode.stop(),this._mode=this._modes[t],this._mode.start()}removeFeatures(t){this.checkEnabled();const e=[];t.forEach(t=>{if(!this._store.has(t))throw new Error(`No feature with id ${t}, can not delete`);const s=this._store.copy(t);s.properties[i.SELECTED]&&this.deselectFeature(t),s.properties[o.COORDINATE_POINT_IDS]&&e.push(...s.properties[o.COORDINATE_POINT_IDS])}),this._store.delete([...t,...e],{origin:\"api\"})}selectFeature(t){this.getSelectModeOrThrow().selectFeature(t)}deselectFeature(t){this.getSelectModeOrThrow().deselectFeature(t)}getFeatureId(){return this._store.getId()}hasFeature(t){return this._store.has(t)}checkIsReservedProperty(t){return![...Object.values(i),...Object.values(o)].includes(t)}updateFeatureProperties(t,e){if(!this._store.has(t))throw new Error(`No feature with id ${t} present in store`);const i=this._store.copy(t);if(this.isGuidanceFeature(i))throw new Error(\"Guidance features are not allowed to be updated directly.\");const o=i.properties.mode;if(!this._modes[o])throw new Error(`No mode with name ${o} present in instance`);const s=Object.entries(e);s.forEach(([t,e])=>{if(!this.checkIsReservedProperty(t))throw new Error(`You are trying to update a reserved property name: ${t}. Please choose another name.`);if(void 0!==e&&!Xe(e))throw new Error(`Invalid JSON value provided for property ${t}`)}),this._store.updateProperty(s.map(([t,e])=>({id:i.id,property:t,value:e})),{origin:\"api\"})}updateFeatureGeometry(e,o){if(!this._store.has(e))throw new Error(`No feature with id ${e} present in store`);const s=this._store.copy(e);if(this.isGuidanceFeature(s))throw new Error(\"Guidance features are not allowed to be updated directly.\");if(!(s&&o&&o.type&&o.coordinates))throw new Error(\"Invalid geometry provided\");if(o.type!==s.geometry.type)throw new Error(`Geometry type mismatch: expected ${s.geometry.type}, got ${o.type}`);const n=s.properties.mode,r=this._modes[n];if(!r)throw new Error(`No mode with name ${n} present in instance`);const a=t({},s,{geometry:o}),d=r.validateFeature(a);if(!d.valid)throw new Error(`Feature validation failed: ${d.reason||\"Unknown reason\"}`);if(this._store.updateGeometry([{id:s.id,geometry:o}],{origin:\"api\"}),r.afterFeatureUpdated){r.afterFeatureUpdated(a);const t=a.properties[i.SELECTED],e=this.getSelectMode({switchToSelectMode:!1});e&&t&&e.afterFeatureUpdated(a)}}transformFeatureGeometry(t,e){if(!this._store.has(t))throw new Error(`No feature with id ${t} present in store`);let o=this._store.copy(t);if(this.isGuidanceFeature(o))throw new Error(\"Guidance features are not allowed to be updated directly.\");const s=o.properties.mode,n=this._modes[s];if(!n)throw new Error(`No mode with name ${s} present in instance`);let r;if(\"Polygon\"===o.geometry.type)r=o.geometry.coordinates[0];else{if(\"LineString\"!==o.geometry.type)throw new Error(`Feature geometry type ${o.geometry.type} is not supported for transformation`);r=o.geometry.coordinates}if(\"web-mercator\"!=e.projection)throw new Error(`Projection ${e.projection} is not currently supported for transformation`);if(\"scale\"===e.type){const{x:t,y:i}=E(e.origin[0],e.origin[1]);qt({coordinates:r,originX:t,originY:i,xScale:e.options.xScale||1,yScale:e.options.yScale||1})}else\"rotate\"===e.type&&(o=zt(o,e.options.angle||0),r=\"Polygon\"===o.geometry.type?o.geometry.coordinates[0]:o.geometry.coordinates);if(r=r.map(t=>[C(t[0],this._adapter.getCoordinatePrecision()),C(t[1],this._adapter.getCoordinatePrecision())]),o.geometry.coordinates=\"Polygon\"===o.geometry.type?[r]:r,this._store.updateGeometry([{id:o.id,geometry:o.geometry}],{origin:\"api\"}),n.afterFeatureUpdated){n.afterFeatureUpdated(o);const t=o.properties[i.SELECTED],e=this.getSelectMode({switchToSelectMode:!1});e&&t&&e.afterFeatureUpdated(o)}}addFeatures(t){return this.checkEnabled(),0===t.length?[]:this._store.load(t,t=>{if(r(t)){const e=t.properties.mode,i=this._modes[e];if(!i)return{id:t.id,valid:!1,reason:`${e} mode is not in the list of instantiated modes`};const o=i.validateFeature.bind(i)(t);return{id:t.id,valid:o.valid,reason:o.reason?o.reason:o.valid?void 0:\"Feature is invalid\"}}return{id:t.id,valid:!1,reason:\"Mode property does not exist\"}},t=>{if(r(t)){const e=this._modes[t.properties.mode];e&&e.afterFeatureAdded&&e.afterFeatureAdded(t)}},{origin:\"api\"})}start(){this._enabled||(this._enabled=!0,this._adapter.register({onReady:()=>{this._eventListeners.ready.forEach(t=>{t()})},getState:()=>this._mode.state,onClick:t=>{this._mode.onClick(t)},onMouseMove:t=>{this._mode.onMouseMove(t)},onKeyDown:t=>{this._mode.onKeyDown(t)},onKeyUp:t=>{this._mode.onKeyUp(t)},onDragStart:(t,e)=>{this._mode.onDragStart(t,e)},onDrag:(t,e)=>{this._mode.onDrag(t,e)},onDragEnd:(t,e)=>{this._mode.onDragEnd(t,e)},onClear:()=>{this._mode.cleanUp(),this._store.clear()}}))}getFeaturesAtLngLat(t,e){const{lng:i,lat:o}=t;return this.featuresAtLocation({lng:i,lat:o},e)}getFeaturesAtPointerEvent(t,e){const i=this._adapter.getLngLatFromEvent.bind(this._adapter)(t);return null===i?[]:this.featuresAtLocation(i,e)}stop(){this._enabled&&(this._enabled=!1,this._adapter.unregister())}on(t,e){const i=this._eventListeners[t];i.includes(e)||i.push(e)}off(t,e){const i=this._eventListeners[t];i.includes(e)&&i.splice(i.indexOf(e),1)}}export{He as TerraDraw,Ne as TerraDrawAngledRectangleMode,L as TerraDrawCircleMode,Ae as TerraDrawExtend,ze as TerraDrawFreehandLineStringMode,K as TerraDrawFreehandMode,mt as TerraDrawLineStringMode,Et as TerraDrawPointMode,wt as TerraDrawPolygonMode,bt as TerraDrawRectangleMode,kt as TerraDrawRenderMode,Be as TerraDrawSectorMode,te as TerraDrawSelectMode,Le as TerraDrawSensorMode,Fe as ValidateMaxAreaSquareMeters,Me as ValidateMinAreaSquareMeters,Oe as ValidateNotSelfIntersecting,Ve as ValidationReasons};\n//# sourceMappingURL=terra-draw.modern.js.map\n","import{TerraDrawExtend as e}from\"terra-draw\";class t extends e.TerraDrawBaseAdapter{constructor(e){super(e),this._renderBeforeLayerId=void 0,this._prefixId=void 0,this._initialDragPan=void 0,this._initialDragRotate=void 0,this._nextRender=void 0,this._map=void 0,this._container=void 0,this.changedIds={deletion:!1,points:!1,linestrings:!1,polygons:!1,styling:!1},this._map=e.map,this._container=this._map.getContainer(),this._initialDragRotate=this._map.dragRotate.isEnabled(),this._initialDragPan=this._map.dragPan.isEnabled(),this._renderBeforeLayerId=e.renderBelowLayerId,this._prefixId=e.prefixId||\"td\"}_addGeoJSONSource(e,t){this._map.addSource(e,{type:\"geojson\",data:{type:\"FeatureCollection\",features:t},tolerance:0})}_addFillLayer(e){return this._map.addLayer({id:e,source:e,type:\"fill\",layout:{\"fill-sort-key\":[\"get\",\"zIndex\"]},paint:{\"fill-color\":[\"get\",\"polygonFillColor\"],\"fill-opacity\":[\"get\",\"polygonFillOpacity\"]}})}_addFillOutlineLayer(e){return this._map.addLayer({id:e+\"-outline\",source:e,type:\"line\",layout:{\"line-sort-key\":[\"get\",\"zIndex\"]},paint:{\"line-width\":[\"get\",\"polygonOutlineWidth\"],\"line-color\":[\"get\",\"polygonOutlineColor\"]}})}_addLineLayer(e){return this._map.addLayer({id:e,source:e,type:\"line\",layout:{\"line-sort-key\":[\"get\",\"zIndex\"]},paint:{\"line-width\":[\"get\",\"lineStringWidth\"],\"line-color\":[\"get\",\"lineStringColor\"]}})}_addPointLayer(e){return this._map.addLayer({id:e,source:e,type:\"circle\",layout:{\"circle-sort-key\":[\"get\",\"zIndex\"]},paint:{\"circle-stroke-color\":[\"get\",\"pointOutlineColor\"],\"circle-stroke-width\":[\"get\",\"pointOutlineWidth\"],\"circle-radius\":[\"get\",\"pointWidth\"],\"circle-color\":[\"get\",\"pointColor\"]}})}_addLayer(e,t){\"Point\"===t&&this._addPointLayer(e),\"LineString\"===t&&this._addLineLayer(e),\"Polygon\"===t&&(this._addFillLayer(e),this._addFillOutlineLayer(e))}_addGeoJSONLayer(e,t){const i=`${this._prefixId}-${e.toLowerCase()}`;return this._addGeoJSONSource(i,t),this._addLayer(i,e),i}_setGeoJSONLayerData(e,t){const i=`${this._prefixId}-${e.toLowerCase()}`;return this._map.getSource(i).setData({type:\"FeatureCollection\",features:t}),i}updateChangedIds(e){[...e.updated,...e.created].forEach(e=>{\"Point\"===e.geometry.type?this.changedIds.points=!0:\"LineString\"===e.geometry.type?this.changedIds.linestrings=!0:\"Polygon\"===e.geometry.type&&(this.changedIds.polygons=!0)}),e.deletedIds.length>0&&(this.changedIds.deletion=!0),0===e.created.length&&0===e.updated.length&&0===e.deletedIds.length&&(this.changedIds.styling=!0)}getLngLatFromEvent(e){const{left:t,top:i}=this._container.getBoundingClientRect();return this.unproject(e.clientX-t,e.clientY-i)}getMapEventElement(){return this._map.getCanvas()}setDraggability(e){e?(this._initialDragRotate&&this._map.dragRotate.enable(),this._initialDragPan&&this._map.dragPan.enable()):(this._initialDragRotate&&this._map.dragRotate.disable(),this._initialDragPan&&this._map.dragPan.disable())}project(e,t){const{x:i,y:n}=this._map.project({lng:e,lat:t});return{x:i,y:n}}unproject(e,t){const{lng:i,lat:n}=this._map.unproject({x:e,y:t});return{lng:i,lat:n}}setCursor(e){const t=this._map.getCanvas();\"unset\"===e?t.style.removeProperty(\"cursor\"):t.style.cursor=e}setDoubleClickToZoom(e){e?this._map.doubleClickZoom.enable():this._map.doubleClickZoom.disable()}render(e,t){this.updateChangedIds(e),this._nextRender&&cancelAnimationFrame(this._nextRender),this._nextRender=requestAnimationFrame(()=>{if(!this._currentModeCallbacks)return;const i=[...e.created,...e.updated,...e.unchanged],n=[],o=[],r=[];for(let e=0;e<i.length;e++){const a=i[e],{properties:s}=a,l=t[s.mode](a);\"Point\"===a.geometry.type?(s.pointColor=l.pointColor,s.pointOutlineColor=l.pointOutlineColor,s.pointOutlineWidth=l.pointOutlineWidth,s.pointWidth=l.pointWidth,s.zIndex=l.zIndex,n.push(a)):\"LineString\"===a.geometry.type?(s.lineStringColor=l.lineStringColor,s.lineStringWidth=l.lineStringWidth,o.push(a)):\"Polygon\"===a.geometry.type&&(s.polygonFillColor=l.polygonFillColor,s.polygonFillOpacity=l.polygonFillOpacity,s.polygonOutlineColor=l.polygonOutlineColor,s.polygonOutlineWidth=l.polygonOutlineWidth,r.push(a))}const a=this.changedIds.deletion||this.changedIds.styling,s=a||this.changedIds.linestrings,l=a||this.changedIds.polygons;(a||this.changedIds.points)&&this._setGeoJSONLayerData(\"Point\",n),s&&this._setGeoJSONLayerData(\"LineString\",o),l&&this._setGeoJSONLayerData(\"Polygon\",r),this.changedIds={points:!1,linestrings:!1,polygons:!1,deletion:!1,styling:!1}})}clear(){this._currentModeCallbacks&&(this._currentModeCallbacks.onClear(),this._nextRender&&(cancelAnimationFrame(this._nextRender),this._nextRender=void 0),this._setGeoJSONLayerData(\"Point\",[]),this._setGeoJSONLayerData(\"LineString\",[]),this._setGeoJSONLayerData(\"Polygon\",[]))}getCoordinatePrecision(){return super.getCoordinatePrecision()}unregister(){super.unregister(),this.changedIds={points:!1,linestrings:!1,polygons:!1,deletion:!1,styling:!1},this._map.removeLayer(`${this._prefixId}-point`),this._map.removeSource(`${this._prefixId}-point`),this._map.removeLayer(`${this._prefixId}-linestring`),this._map.removeSource(`${this._prefixId}-linestring`),this._map.removeLayer(`${this._prefixId}-polygon`),this._map.removeLayer(`${this._prefixId}-polygon-outline`),this._map.removeSource(`${this._prefixId}-polygon`)}register(e){var t;super.register(e);const i=this._addGeoJSONLayer(\"Polygon\",[]),n=this._addGeoJSONLayer(\"LineString\",[]),o=this._addGeoJSONLayer(\"Point\",[]);this._renderBeforeLayerId&&(this._map.moveLayer(o,this._renderBeforeLayerId),this._map.moveLayer(n,o),this._map.moveLayer(i+\"-outline\",n),this._map.moveLayer(i,n)),null!=(t=this._currentModeCallbacks)&&t.onReady&&this._currentModeCallbacks.onReady()}}export{t as TerraDrawMapLibreGLAdapter};\n//# sourceMappingURL=terra-draw-maplibre-gl-adapter.modern.js.map\n","/**\n * The list of available Terra Draw drawing modes for MaplibreTerraDrawControl\n *\n * `render` is a special mode and this is appeared as toggle button to expand/collapse the tool.\n * If you always want the tool to be visible, `render` can be removed and set `open` property of the constructor as true.\n *\n * `delete-selection` button is only appeared, when the select button is active.\n *\n * If no drawing feature is in TerraDraw, `delete` and `download` are disabled.\n */\nexport const AvailableModes = [\n\t'render',\n\t'point',\n\t'linestring',\n\t'polygon',\n\t'rectangle',\n\t'circle',\n\t'freehand',\n\t'freehand-linestring',\n\t'angled-rectangle',\n\t'sensor',\n\t'sector',\n\t'select',\n\t'delete-selection',\n\t'delete',\n\t'download'\n] as const;\n\n/**\n * The list of available Terra Draw drawing modes for MaplibreValhallaControl\n *\n * - point mode is used to compute isochrone polygons.\n * - linestring mode is used to calculate routes.\n *\n * `render` is a special mode and this is appeared as toggle button to expand/collapse the tool.\n * If you always want the tool to be visible, `render` can be removed and set `open` property of the constructor as true.\n *\n * `delete-selection` button is only appeared, when the select button is active.\n *\n * If no drawing feature is in TerraDraw, `delete` and `download` are disabled.\n */\nexport const AvailableValhallaModes = [\n\t'render',\n\t'linestring',\n\t'point',\n\t'select',\n\t'delete-selection',\n\t'delete',\n\t'download',\n\t'settings'\n] as const;\n","import type { TerradrawControlOptions } from '../interfaces/TerradrawControlOptions';\n\n/**\n * Default control options\n */\nexport const defaultControlOptions: TerradrawControlOptions = {\n\tmodes: [\n\t\t'render',\n\t\t'point',\n\t\t'linestring',\n\t\t'polygon',\n\t\t'rectangle',\n\t\t'angled-rectangle',\n\t\t'sensor',\n\t\t'sector',\n\t\t'circle',\n\t\t'freehand',\n\t\t'freehand-linestring',\n\t\t'select',\n\t\t'delete-selection',\n\t\t'delete',\n\t\t'download'\n\t],\n\topen: false\n};\n","import {\n\tTerraDrawAngledRectangleMode,\n\tTerraDrawCircleMode,\n\tTerraDrawFreehandLineStringMode,\n\tTerraDrawFreehandMode,\n\tTerraDrawLineStringMode,\n\tTerraDrawPointMode,\n\tTerraDrawPolygonMode,\n\tTerraDrawRectangleMode,\n\tTerraDrawSectorMode,\n\tTerraDrawSelectMode,\n\tTerraDrawSensorMode\n} from 'terra-draw';\nimport type { MeasureControlOptions } from '../interfaces/MeasureControlOptions';\n\n/**\n * Default MeasureControl options\n */\nexport const defaultMeasureControlOptions: MeasureControlOptions = {\n\tmodes: [\n\t\t'render',\n\t\t'point',\n\t\t'linestring',\n\t\t'polygon',\n\t\t'rectangle',\n\t\t'angled-rectangle',\n\t\t'sensor',\n\t\t'sector',\n\t\t'circle',\n\t\t'freehand',\n\t\t'freehand-linestring',\n\t\t'select',\n\t\t'delete-selection',\n\t\t'delete',\n\t\t'download'\n\t],\n\topen: false,\n\t// see styling parameters of Terra Draw at https://github.com/JamesLMilner/terra-draw/blob/main/guides/5.STYLING.md\n\tmodeOptions: {\n\t\tpoint: new TerraDrawPointMode({\n\t\t\teditable: true,\n\t\t\tstyles: {\n\t\t\t\tpointColor: '#FFFFFF',\n\t\t\t\tpointWidth: 5,\n\t\t\t\tpointOutlineColor: '#666666',\n\t\t\t\tpointOutlineWidth: 1\n\t\t\t}\n\t\t}),\n\t\tlinestring: new TerraDrawLineStringMode({\n\t\t\teditable: true,\n\t\t\tstyles: {\n\t\t\t\tlineStringColor: '#666666',\n\t\t\t\tlineStringWidth: 2,\n\t\t\t\tclosingPointColor: '#FFFFFF',\n\t\t\t\tclosingPointWidth: 3,\n\t\t\t\tclosingPointOutlineColor: '#666666',\n\t\t\t\tclosingPointOutlineWidth: 1\n\t\t\t}\n\t\t}),\n\t\tpolygon: new TerraDrawPolygonMode({\n\t\t\teditable: true,\n\t\t\tstyles: {\n\t\t\t\tfillColor: '#EDEFF0',\n\t\t\t\tfillOpacity: 0.7,\n\t\t\t\toutlineColor: '#666666',\n\t\t\t\toutlineWidth: 2,\n\t\t\t\tclosingPointColor: '#FAFAFA',\n\t\t\t\tclosingPointWidth: 3,\n\t\t\t\tclosingPointOutlineColor: '#666666',\n\t\t\t\tclosingPointOutlineWidth: 1\n\t\t\t}\n\t\t}),\n\t\trectangle: new TerraDrawRectangleMode({\n\t\t\tstyles: {\n\t\t\t\tfillColor: '#EDEFF0',\n\t\t\t\tfillOpacity: 0.7,\n\t\t\t\toutlineColor: '#666666',\n\t\t\t\toutlineWidth: 2\n\t\t\t}\n\t\t}),\n\t\t'angled-rectangle': new TerraDrawAngledRectangleMode({\n\t\t\tstyles: {\n\t\t\t\tfillColor: '#EDEFF0',\n\t\t\t\tfillOpacity: 0.7,\n\t\t\t\toutlineColor: '#666666',\n\t\t\t\toutlineWidth: 2\n\t\t\t}\n\t\t}),\n\t\tcircle: new TerraDrawCircleMode({\n\t\t\tstyles: {\n\t\t\t\tfillColor: '#EDEFF0',\n\t\t\t\tfillOpacity: 0.7,\n\t\t\t\toutlineColor: '#666666',\n\t\t\t\toutlineWidth: 2\n\t\t\t}\n\t\t}),\n\t\tfreehand: new TerraDrawFreehandMode({\n\t\t\tstyles: {\n\t\t\t\tfillColor: '#EDEFF0',\n\t\t\t\tfillOpacity: 0.7,\n\t\t\t\toutlineColor: '#666666',\n\t\t\t\toutlineWidth: 2,\n\t\t\t\tclosingPointColor: '#FAFAFA',\n\t\t\t\tclosingPointWidth: 3,\n\t\t\t\tclosingPointOutlineColor: '#666666',\n\t\t\t\tclosingPointOutlineWidth: 1\n\t\t\t}\n\t\t}),\n\t\t'freehand-linestring': new TerraDrawFreehandLineStringMode({\n\t\t\tstyles: {\n\t\t\t\tlineStringColor: '#666666',\n\t\t\t\tlineStringWidth: 2,\n\t\t\t\tclosingPointColor: '#FFFFFF',\n\t\t\t\tclosingPointWidth: 3,\n\t\t\t\tclosingPointOutlineColor: '#666666',\n\t\t\t\tclosingPointOutlineWidth: 1\n\t\t\t}\n\t\t}),\n\t\tsensor: new TerraDrawSensorMode({\n\t\t\tstyles: {\n\t\t\t\tfillColor: '#EDEFF0',\n\t\t\t\tfillOpacity: 0.7,\n\t\t\t\toutlineColor: '#666666',\n\t\t\t\toutlineWidth: 2,\n\t\t\t\tcenterPointColor: '#FAFAFA',\n\t\t\t\tcenterPointWidth: 3,\n\t\t\t\tcenterPointOutlineColor: '#666666',\n\t\t\t\tcenterPointOutlineWidth: 1\n\t\t\t}\n\t\t}),\n\t\tsector: new TerraDrawSectorMode({\n\t\t\tstyles: {\n\t\t\t\tfillColor: '#EDEFF0',\n\t\t\t\tfillOpacity: 0.7,\n\t\t\t\toutlineColor: '#666666',\n\t\t\t\toutlineWidth: 2\n\t\t\t}\n\t\t}),\n\t\tselect: new TerraDrawSelectMode({\n\t\t\tflags: {\n\t\t\t\tpoint: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: false\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpolygon: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\trotateable: true,\n\t\t\t\t\t\tscaleable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tlinestring: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\trotateable: true,\n\t\t\t\t\t\tscaleable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfreehand: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'freehand-linestring': {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\trotateable: true,\n\t\t\t\t\t\tscaleable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcircle: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trectangle: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\trotateable: true,\n\t\t\t\t\t\tscaleable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'angled-rectangle': {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\trotateable: true,\n\t\t\t\t\t\tscaleable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsensor: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\trotateable: true,\n\t\t\t\t\t\tscaleable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsector: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\trotateable: true,\n\t\t\t\t\t\tscaleable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t},\n\tpointLayerLabelSpec: {\n\t\tid: '{prefix}-point-label',\n\t\ttype: 'symbol',\n\t\tsource: '{prefix}-point-source',\n\t\tfilter: ['all', ['==', '$type', 'Point'], ['==', 'mode', 'point']],\n\t\tlayout: {\n\t\t\t'text-field': [\n\t\t\t\t'case',\n\t\t\t\t['all', ['has', 'elevation'], ['>', ['get', 'elevation'], 0]],\n\t\t\t\t['concat', 'Alt. ', ['to-string', ['floor', ['get', 'elevation']]], ' m'],\n\t\t\t\t''\n\t\t\t],\n\t\t\t'symbol-placement': 'point',\n\t\t\t'text-size': [\n\t\t\t\t'interpolate',\n\t\t\t\t['linear'],\n\t\t\t\t['zoom'],\n\t\t\t\t5,\n\t\t\t\t10,\n\t\t\t\t10,\n\t\t\t\t12.0,\n\t\t\t\t13,\n\t\t\t\t14.0,\n\t\t\t\t14,\n\t\t\t\t16.0,\n\t\t\t\t18,\n\t\t\t\t18.0\n\t\t\t],\n\t\t\t'text-overlap': 'always',\n\t\t\t'text-variable-anchor': ['left', 'right', 'top', 'bottom'],\n\t\t\t'text-radial-offset': 0.5,\n\t\t\t'text-justify': 'center',\n\t\t\t'text-letter-spacing': 0.05\n\t\t},\n\t\tpaint: {\n\t\t\t'text-halo-color': '#F7F7F7',\n\t\t\t'text-halo-width': 2,\n\t\t\t'text-color': '#232E3D'\n\t\t}\n\t},\n\tlineLayerLabelSpec: {\n\t\tid: '{prefix}-line-label',\n\t\ttype: 'symbol',\n\t\tsource: '{prefix}-line-source',\n\t\tfilter: ['==', '$type', 'Point'],\n\t\tlayout: {\n\t\t\t'text-field': [\n\t\t\t\t'concat',\n\t\t\t\t['to-string', ['get', 'distance']],\n\t\t\t\t' ',\n\t\t\t\t['get', 'unit'],\n\t\t\t\t[\n\t\t\t\t\t'case',\n\t\t\t\t\t['==', ['get', 'total'], 0],\n\t\t\t\t\t'',\n\t\t\t\t\t['concat', '\\n(', ['to-string', ['get', 'total']], ' ', ['get', 'totalUnit'], ')']\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'case',\n\t\t\t\t\t['all', ['has', 'elevation'], ['>', ['get', 'elevation'], 0]],\n\t\t\t\t\t['concat', '\\nAlt. ', ['to-string', ['floor', ['get', 'elevation']]], ' m'],\n\t\t\t\t\t''\n\t\t\t\t]\n\t\t\t],\n\t\t\t'symbol-placement': 'point',\n\t\t\t'text-size': [\n\t\t\t\t'interpolate',\n\t\t\t\t['linear'],\n\t\t\t\t['zoom'],\n\t\t\t\t5,\n\t\t\t\t10,\n\t\t\t\t10,\n\t\t\t\t12.0,\n\t\t\t\t13,\n\t\t\t\t14.0,\n\t\t\t\t14,\n\t\t\t\t16.0,\n\t\t\t\t18,\n\t\t\t\t18.0\n\t\t\t],\n\t\t\t'text-overlap': 'always',\n\t\t\t'text-variable-anchor': ['left', 'right', 'top', 'bottom'],\n\t\t\t'text-radial-offset': 0.5,\n\t\t\t'text-justify': 'center',\n\t\t\t'text-letter-spacing': 0.05\n\t\t},\n\t\tpaint: {\n\t\t\t'text-halo-color': '#F7F7F7',\n\t\t\t'text-halo-width': 2,\n\t\t\t'text-color': '#232E3D'\n\t\t}\n\t},\n\troutingLineLayerNodeSpec: {\n\t\tid: '{prefix}-line-node',\n\t\ttype: 'circle',\n\t\tsource: '{prefix}-line-source',\n\t\tfilter: ['==', '$type', 'Point'],\n\t\tlayout: {},\n\t\tpaint: {\n\t\t\t'circle-radius': 3,\n\t\t\t'circle-color': '#FFFFFF',\n\t\t\t'circle-stroke-color': '#000000',\n\t\t\t'circle-stroke-width': 1\n\t\t}\n\t},\n\tpolygonLayerSpec: {\n\t\tid: '{prefix}-polygon-label',\n\t\ttype: 'symbol',\n\t\tsource: '{prefix}-polygon-source',\n\t\tfilter: ['==', '$type', 'Point'],\n\t\tlayout: {\n\t\t\t'text-field': ['concat', ['to-string', ['get', 'area']], ' ', ['get', 'unit']],\n\t\t\t'symbol-placement': 'point',\n\t\t\t'text-size': [\n\t\t\t\t'interpolate',\n\t\t\t\t['linear'],\n\t\t\t\t['zoom'],\n\t\t\t\t5,\n\t\t\t\t10,\n\t\t\t\t10,\n\t\t\t\t12.0,\n\t\t\t\t13,\n\t\t\t\t14.0,\n\t\t\t\t14,\n\t\t\t\t16.0,\n\t\t\t\t18,\n\t\t\t\t18.0\n\t\t\t],\n\t\t\t'text-overlap': 'always',\n\t\t\t'text-letter-spacing': 0.05\n\t\t},\n\t\tpaint: {\n\t\t\t'text-halo-color': '#F7F7F7',\n\t\t\t'text-halo-width': 2,\n\t\t\t'text-color': '#232E3D'\n\t\t}\n\t},\n\tcomputeElevation: false,\n\tterrainSource: {\n\t\turl: 'https://s3.amazonaws.com/elevation-tiles-prod/terrarium/{z}/{x}/{y}.png',\n\t\tencoding: 'terrarium',\n\t\ttileSize: 256,\n\t\tminzoom: 5,\n\t\tmaxzoom: 15,\n\t\ttms: false\n\t},\n\tdistanceUnit: 'kilometers',\n\tdistancePrecision: 2,\n\tforceDistanceUnit: 'auto',\n\tareaUnit: 'metric',\n\tareaPrecision: 2,\n\tforceAreaUnit: 'auto',\n\televationCacheConfig: {\n\t\tenabled: true,\n\t\tmaxSize: 1000,\n\t\tttl: 60 * 60 * 1000, // 1 hour\n\t\tprecision: 9 // 9 is default precision of terra-draw adapter setting\n\t},\n\tadapterOptions: {\n\t\tprefixId: 'td-measure'\n\t}\n};\n","import {\n\tTerraDrawLineStringMode,\n\tTerraDrawPointMode,\n\tTerraDrawRenderMode,\n\tTerraDrawSelectMode\n} from 'terra-draw';\nimport type { ValhallaControlOptions } from '../interfaces/ValhallaControlOptions';\n\n/**\n * Default ValhallaControl options\n */\nexport const defaultValhallaControlOptions: ValhallaControlOptions = {\n\tmodes: [\n\t\t'render',\n\t\t'linestring',\n\t\t'point',\n\t\t'select',\n\t\t'delete-selection',\n\t\t'delete',\n\t\t'download',\n\t\t'settings'\n\t],\n\topen: false,\n\t// see styling parameters of Terra Draw at https://github.com/JamesLMilner/terra-draw/blob/main/guides/5.STYLING.md\n\tmodeOptions: {\n\t\tpoint: new TerraDrawPointMode({\n\t\t\teditable: false,\n\t\t\tstyles: {\n\t\t\t\tpointColor: '#FFFFFF',\n\t\t\t\tpointWidth: 5,\n\t\t\t\tpointOutlineColor: '#666666',\n\t\t\t\tpointOutlineWidth: 1\n\t\t\t}\n\t\t}),\n\t\tlinestring: new TerraDrawLineStringMode({\n\t\t\teditable: false,\n\t\t\tstyles: {\n\t\t\t\tlineStringColor: '#FF0000',\n\t\t\t\tlineStringWidth: 2,\n\t\t\t\tclosingPointColor: '#FF0000',\n\t\t\t\tclosingPointWidth: 3,\n\t\t\t\tclosingPointOutlineColor: '#666666',\n\t\t\t\tclosingPointOutlineWidth: 1\n\t\t\t}\n\t\t}),\n\t\tselect: new TerraDrawSelectMode({\n\t\t\tflags: {\n\t\t\t\tpoint: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: false\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tlinestring: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: false,\n\t\t\t\t\t\trotateable: false,\n\t\t\t\t\t\tscaleable: false,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: false,\n\t\t\t\t\t\t\tdraggable: false,\n\t\t\t\t\t\t\tdeletable: false\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t\tsettings: new TerraDrawRenderMode({\n\t\t\tmodeName: 'settings',\n\t\t\tstyles: {}\n\t\t})\n\t},\n\tvalhallaOptions: {\n\t\turl: '',\n\t\troutingOptions: {\n\t\t\tcostingModel: 'auto',\n\t\t\tdistanceUnit: 'kilometers'\n\t\t},\n\t\tisochroneOptions: {\n\t\t\tcontourType: 'time',\n\t\t\tcostingModel: 'auto',\n\t\t\tcontours: [\n\t\t\t\t{\n\t\t\t\t\ttime: 3,\n\t\t\t\t\tdistance: 1,\n\t\t\t\t\tcolor: '#ff0000'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttime: 5,\n\t\t\t\t\tdistance: 2,\n\t\t\t\t\tcolor: '#ffff00'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttime: 10,\n\t\t\t\t\tdistance: 3,\n\t\t\t\t\tcolor: '#0000ff'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttime: 15,\n\t\t\t\t\tdistance: 4,\n\t\t\t\t\tcolor: '#ff00ff'\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t},\n\tadapterOptions: {\n\t\tprefixId: 'td-valhalla'\n\t},\n\troutingLineLayerNodeLabelSpec: {\n\t\tid: '{prefix}-routing-node-label',\n\t\ttype: 'symbol',\n\t\tsource: '{prefix}-routing-source',\n\t\tfilter: ['==', '$type', 'Point'],\n\t\tlayout: {\n\t\t\t'text-field': [\n\t\t\t\t'case',\n\t\t\t\t['all', ['has', 'distance'], ['has', 'distance_unit'], ['has', 'time']],\n\t\t\t\t[\n\t\t\t\t\t'concat',\n\t\t\t\t\t['to-string', ['get', 'text']],\n\t\t\t\t\t'\\n',\n\t\t\t\t\t['to-string', ['/', ['round', ['*', ['get', 'distance'], 10]], 10]],\n\t\t\t\t\t['to-string', ['get', 'distance_unit']],\n\t\t\t\t\t'\\n',\n\t\t\t\t\t['to-string', ['get', 'time']],\n\t\t\t\t\t'min'\n\t\t\t\t],\n\t\t\t\t['all', ['has', 'costingModel']],\n\t\t\t\t[\n\t\t\t\t\t'concat',\n\t\t\t\t\t['to-string', ['get', 'text']],\n\t\t\t\t\t'\\n(',\n\t\t\t\t\t['to-string', ['get', 'costingModel']],\n\t\t\t\t\t')'\n\t\t\t\t],\n\t\t\t\t['concat', ['to-string', ['get', 'text']]]\n\t\t\t],\n\t\t\t'symbol-placement': 'point',\n\t\t\t'text-size': [\n\t\t\t\t'interpolate',\n\t\t\t\t['linear'],\n\t\t\t\t['zoom'],\n\t\t\t\t5,\n\t\t\t\t10,\n\t\t\t\t10,\n\t\t\t\t12.0,\n\t\t\t\t13,\n\t\t\t\t14.0,\n\t\t\t\t14,\n\t\t\t\t16.0,\n\t\t\t\t18,\n\t\t\t\t18.0\n\t\t\t],\n\t\t\t'text-overlap': 'always',\n\t\t\t'text-variable-anchor': ['left', 'right', 'top', 'bottom'],\n\t\t\t'text-radial-offset': 0.5,\n\t\t\t'text-justify': 'left',\n\t\t\t'text-letter-spacing': 0.05\n\t\t},\n\t\tpaint: {\n\t\t\t'text-halo-color': '#F7F7F7',\n\t\t\t'text-halo-width': 2,\n\t\t\t'text-color': '#232E3D'\n\t\t}\n\t},\n\troutingLineLayerNodeSpec: {\n\t\tid: '{prefix}-routing-node',\n\t\ttype: 'circle',\n\t\tsource: '{prefix}-routing-source',\n\t\tfilter: ['==', '$type', 'Point'],\n\t\tlayout: {},\n\t\tpaint: {\n\t\t\t'circle-radius': 3,\n\t\t\t'circle-color': [\n\t\t\t\t'case',\n\t\t\t\t['==', ['get', 'text'], 'Start'],\n\t\t\t\t'#0000FF',\n\t\t\t\t['==', ['get', 'text'], 'Goal'],\n\t\t\t\t'#FFFF00',\n\t\t\t\t'#FFFFFF'\n\t\t\t],\n\t\t\t'circle-stroke-color': '#000000',\n\t\t\t'circle-stroke-width': 1\n\t\t}\n\t},\n\tisochronePolygonLayerSpec: {\n\t\tid: '{prefix}-isochrone-polygon',\n\t\ttype: 'fill',\n\t\tsource: '{prefix}-isochrone-source',\n\t\tlayout: {},\n\t\tpaint: {\n\t\t\t'fill-color': ['get', 'fillColor'],\n\t\t\t'fill-opacity': ['get', 'fillOpacity']\n\t\t}\n\t},\n\tisochroneLineLayerSpec: {\n\t\tid: '{prefix}-isochrone-line',\n\t\ttype: 'line',\n\t\tsource: '{prefix}-isochrone-source',\n\t\tlayout: {\n\t\t\t'line-join': 'round',\n\t\t\t'line-cap': 'round'\n\t\t},\n\t\tpaint: {\n\t\t\t'line-color': ['get', 'fillColor'],\n\t\t\t'line-width': 3\n\t\t}\n\t},\n\tisochroneLabelLayerSpec: {\n\t\tid: '{prefix}-isochrone-label',\n\t\ttype: 'symbol',\n\t\tsource: '{prefix}-isochrone-source',\n\t\tlayout: {\n\t\t\t'symbol-placement': 'line',\n\t\t\t'text-pitch-alignment': 'viewport',\n\t\t\t'text-field': [\n\t\t\t\t'concat',\n\t\t\t\t['get', 'contour'],\n\t\t\t\t' ',\n\t\t\t\t[\n\t\t\t\t\t'case',\n\t\t\t\t\t['==', ['get', 'metric'], 'time'],\n\t\t\t\t\t'min',\n\t\t\t\t\t['==', ['get', 'metric'], 'distance'],\n\t\t\t\t\t'km',\n\t\t\t\t\t''\n\t\t\t\t]\n\t\t\t],\n\t\t\t'text-size': 12,\n\t\t\t'symbol-spacing': 100,\n\t\t\t'text-max-angle': 45\n\t\t},\n\t\tpaint: {\n\t\t\t'text-color': 'rgb(0, 0, 0)',\n\t\t\t'text-halo-width': 1,\n\t\t\t'text-halo-color': 'rgb(255, 255, 255)'\n\t\t}\n\t}\n};\n","import type { MapGeoJSONFeature } from 'maplibre-gl';\nimport type { ModeOptions } from '../interfaces/ModeOptions';\nimport {\n\tTerraDrawAngledRectangleMode,\n\tTerraDrawCircleMode,\n\tTerraDrawFreehandLineStringMode,\n\tTerraDrawFreehandMode,\n\tTerraDrawLineStringMode,\n\tTerraDrawPointMode,\n\tTerraDrawPolygonMode,\n\tTerraDrawRectangleMode,\n\tTerraDrawRenderMode,\n\tTerraDrawSectorMode,\n\tTerraDrawSelectMode,\n\tTerraDrawSensorMode,\n\tValidateNotSelfIntersecting\n} from 'terra-draw';\n\n/**\n * get default Terra Draw mode instances.\n * @returns default TerraDrawMode objects. Key is TerraDraw mode name, and value is Terra Draw mode object instance\n */\nexport const getDefaultModeOptions = () => {\n\tconst modeOptions: ModeOptions = {\n\t\trender: new TerraDrawRenderMode({\n\t\t\tmodeName: 'render',\n\t\t\tstyles: {}\n\t\t}),\n\t\tpoint: new TerraDrawPointMode({\n\t\t\teditable: true\n\t\t}),\n\t\tlinestring: new TerraDrawLineStringMode({\n\t\t\teditable: true\n\t\t}),\n\t\tpolygon: new TerraDrawPolygonMode({\n\t\t\teditable: true,\n\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t// @ts-ignore\n\t\t\tvalidation: (feature: MapGeoJSONFeature, e: { updateType: string }) => {\n\t\t\t\tconst updateType = e.updateType;\n\t\t\t\tif (updateType === 'finish' || updateType === 'commit') {\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\treturn ValidateNotSelfIntersecting(feature);\n\t\t\t\t}\n\t\t\t\treturn { valid: true };\n\t\t\t}\n\t\t}),\n\t\trectangle: new TerraDrawRectangleMode(),\n\t\t'angled-rectangle': new TerraDrawAngledRectangleMode(),\n\t\tcircle: new TerraDrawCircleMode(),\n\t\tfreehand: new TerraDrawFreehandMode(),\n\t\t'freehand-linestring': new TerraDrawFreehandLineStringMode(),\n\t\tsensor: new TerraDrawSensorMode(),\n\t\tsector: new TerraDrawSectorMode(),\n\t\tselect: new TerraDrawSelectMode({\n\t\t\tflags: {\n\t\t\t\tpoint: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpolygon: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\trotateable: true,\n\t\t\t\t\t\tscaleable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tlinestring: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\trotateable: true,\n\t\t\t\t\t\tscaleable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfreehand: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'freehand-linestring': {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\trotateable: true,\n\t\t\t\t\t\tscaleable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcircle: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trectangle: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\trotateable: true,\n\t\t\t\t\t\tscaleable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'angled-rectangle': {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\trotateable: true,\n\t\t\t\t\t\tscaleable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsensor: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\trotateable: true,\n\t\t\t\t\t\tscaleable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsector: {\n\t\t\t\t\tfeature: {\n\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\trotateable: true,\n\t\t\t\t\t\tscaleable: true,\n\t\t\t\t\t\tcoordinates: {\n\t\t\t\t\t\t\tmidpoints: true,\n\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\tdeletable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t\tdelete: new TerraDrawRenderMode({\n\t\t\tmodeName: 'delete',\n\t\t\tstyles: {}\n\t\t}),\n\t\t'delete-selection': new TerraDrawRenderMode({\n\t\t\tmodeName: 'delete-selection',\n\t\t\tstyles: {}\n\t\t}),\n\t\tdownload: new TerraDrawRenderMode({\n\t\t\tmodeName: 'download',\n\t\t\tstyles: {}\n\t\t})\n\t};\n\treturn modeOptions;\n};\n","// index.ts\nvar earthRadius = 63710088e-1;\nvar factors = {\n  centimeters: earthRadius * 100,\n  centimetres: earthRadius * 100,\n  degrees: 360 / (2 * Math.PI),\n  feet: earthRadius * 3.28084,\n  inches: earthRadius * 39.37,\n  kilometers: earthRadius / 1e3,\n  kilometres: earthRadius / 1e3,\n  meters: earthRadius,\n  metres: earthRadius,\n  miles: earthRadius / 1609.344,\n  millimeters: earthRadius * 1e3,\n  millimetres: earthRadius * 1e3,\n  nauticalmiles: earthRadius / 1852,\n  radians: 1,\n  yards: earthRadius * 1.0936\n};\nvar areaFactors = {\n  acres: 247105e-9,\n  centimeters: 1e4,\n  centimetres: 1e4,\n  feet: 10.763910417,\n  hectares: 1e-4,\n  inches: 1550.003100006,\n  kilometers: 1e-6,\n  kilometres: 1e-6,\n  meters: 1,\n  metres: 1,\n  miles: 386e-9,\n  nauticalmiles: 29155334959812285e-23,\n  millimeters: 1e6,\n  millimetres: 1e6,\n  yards: 1.195990046\n};\nfunction feature(geom, properties, options = {}) {\n  const feat = { type: \"Feature\" };\n  if (options.id === 0 || options.id) {\n    feat.id = options.id;\n  }\n  if (options.bbox) {\n    feat.bbox = options.bbox;\n  }\n  feat.properties = properties || {};\n  feat.geometry = geom;\n  return feat;\n}\nfunction geometry(type, coordinates, _options = {}) {\n  switch (type) {\n    case \"Point\":\n      return point(coordinates).geometry;\n    case \"LineString\":\n      return lineString(coordinates).geometry;\n    case \"Polygon\":\n      return polygon(coordinates).geometry;\n    case \"MultiPoint\":\n      return multiPoint(coordinates).geometry;\n    case \"MultiLineString\":\n      return multiLineString(coordinates).geometry;\n    case \"MultiPolygon\":\n      return multiPolygon(coordinates).geometry;\n    default:\n      throw new Error(type + \" is invalid\");\n  }\n}\nfunction point(coordinates, properties, options = {}) {\n  if (!coordinates) {\n    throw new Error(\"coordinates is required\");\n  }\n  if (!Array.isArray(coordinates)) {\n    throw new Error(\"coordinates must be an Array\");\n  }\n  if (coordinates.length < 2) {\n    throw new Error(\"coordinates must be at least 2 numbers long\");\n  }\n  if (!isNumber(coordinates[0]) || !isNumber(coordinates[1])) {\n    throw new Error(\"coordinates must contain numbers\");\n  }\n  const geom = {\n    type: \"Point\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction points(coordinates, properties, options = {}) {\n  return featureCollection(\n    coordinates.map((coords) => {\n      return point(coords, properties);\n    }),\n    options\n  );\n}\nfunction polygon(coordinates, properties, options = {}) {\n  for (const ring of coordinates) {\n    if (ring.length < 4) {\n      throw new Error(\n        \"Each LinearRing of a Polygon must have 4 or more Positions.\"\n      );\n    }\n    if (ring[ring.length - 1].length !== ring[0].length) {\n      throw new Error(\"First and last Position are not equivalent.\");\n    }\n    for (let j = 0; j < ring[ring.length - 1].length; j++) {\n      if (ring[ring.length - 1][j] !== ring[0][j]) {\n        throw new Error(\"First and last Position are not equivalent.\");\n      }\n    }\n  }\n  const geom = {\n    type: \"Polygon\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction polygons(coordinates, properties, options = {}) {\n  return featureCollection(\n    coordinates.map((coords) => {\n      return polygon(coords, properties);\n    }),\n    options\n  );\n}\nfunction lineString(coordinates, properties, options = {}) {\n  if (coordinates.length < 2) {\n    throw new Error(\"coordinates must be an array of two or more positions\");\n  }\n  const geom = {\n    type: \"LineString\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction lineStrings(coordinates, properties, options = {}) {\n  return featureCollection(\n    coordinates.map((coords) => {\n      return lineString(coords, properties);\n    }),\n    options\n  );\n}\nfunction featureCollection(features, options = {}) {\n  const fc = { type: \"FeatureCollection\" };\n  if (options.id) {\n    fc.id = options.id;\n  }\n  if (options.bbox) {\n    fc.bbox = options.bbox;\n  }\n  fc.features = features;\n  return fc;\n}\nfunction multiLineString(coordinates, properties, options = {}) {\n  const geom = {\n    type: \"MultiLineString\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction multiPoint(coordinates, properties, options = {}) {\n  const geom = {\n    type: \"MultiPoint\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction multiPolygon(coordinates, properties, options = {}) {\n  const geom = {\n    type: \"MultiPolygon\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction geometryCollection(geometries, properties, options = {}) {\n  const geom = {\n    type: \"GeometryCollection\",\n    geometries\n  };\n  return feature(geom, properties, options);\n}\nfunction round(num, precision = 0) {\n  if (precision && !(precision >= 0)) {\n    throw new Error(\"precision must be a positive number\");\n  }\n  const multiplier = Math.pow(10, precision || 0);\n  return Math.round(num * multiplier) / multiplier;\n}\nfunction radiansToLength(radians, units = \"kilometers\") {\n  const factor = factors[units];\n  if (!factor) {\n    throw new Error(units + \" units is invalid\");\n  }\n  return radians * factor;\n}\nfunction lengthToRadians(distance, units = \"kilometers\") {\n  const factor = factors[units];\n  if (!factor) {\n    throw new Error(units + \" units is invalid\");\n  }\n  return distance / factor;\n}\nfunction lengthToDegrees(distance, units) {\n  return radiansToDegrees(lengthToRadians(distance, units));\n}\nfunction bearingToAzimuth(bearing) {\n  let angle = bearing % 360;\n  if (angle < 0) {\n    angle += 360;\n  }\n  return angle;\n}\nfunction azimuthToBearing(angle) {\n  angle = angle % 360;\n  if (angle > 180) {\n    return angle - 360;\n  } else if (angle < -180) {\n    return angle + 360;\n  }\n  return angle;\n}\nfunction radiansToDegrees(radians) {\n  const normalisedRadians = radians % (2 * Math.PI);\n  return normalisedRadians * 180 / Math.PI;\n}\nfunction degreesToRadians(degrees) {\n  const normalisedDegrees = degrees % 360;\n  return normalisedDegrees * Math.PI / 180;\n}\nfunction convertLength(length, originalUnit = \"kilometers\", finalUnit = \"kilometers\") {\n  if (!(length >= 0)) {\n    throw new Error(\"length must be a positive number\");\n  }\n  return radiansToLength(lengthToRadians(length, originalUnit), finalUnit);\n}\nfunction convertArea(area, originalUnit = \"meters\", finalUnit = \"kilometers\") {\n  if (!(area >= 0)) {\n    throw new Error(\"area must be a positive number\");\n  }\n  const startFactor = areaFactors[originalUnit];\n  if (!startFactor) {\n    throw new Error(\"invalid original units\");\n  }\n  const finalFactor = areaFactors[finalUnit];\n  if (!finalFactor) {\n    throw new Error(\"invalid final units\");\n  }\n  return area / startFactor * finalFactor;\n}\nfunction isNumber(num) {\n  return !isNaN(num) && num !== null && !Array.isArray(num);\n}\nfunction isObject(input) {\n  return input !== null && typeof input === \"object\" && !Array.isArray(input);\n}\nfunction validateBBox(bbox) {\n  if (!bbox) {\n    throw new Error(\"bbox is required\");\n  }\n  if (!Array.isArray(bbox)) {\n    throw new Error(\"bbox must be an Array\");\n  }\n  if (bbox.length !== 4 && bbox.length !== 6) {\n    throw new Error(\"bbox must be an Array of 4 or 6 numbers\");\n  }\n  bbox.forEach((num) => {\n    if (!isNumber(num)) {\n      throw new Error(\"bbox must only contain numbers\");\n    }\n  });\n}\nfunction validateId(id) {\n  if (!id) {\n    throw new Error(\"id is required\");\n  }\n  if ([\"string\", \"number\"].indexOf(typeof id) === -1) {\n    throw new Error(\"id must be a number or a string\");\n  }\n}\nexport {\n  areaFactors,\n  azimuthToBearing,\n  bearingToAzimuth,\n  convertArea,\n  convertLength,\n  degreesToRadians,\n  earthRadius,\n  factors,\n  feature,\n  featureCollection,\n  geometry,\n  geometryCollection,\n  isNumber,\n  isObject,\n  lengthToDegrees,\n  lengthToRadians,\n  lineString,\n  lineStrings,\n  multiLineString,\n  multiPoint,\n  multiPolygon,\n  point,\n  points,\n  polygon,\n  polygons,\n  radiansToDegrees,\n  radiansToLength,\n  round,\n  validateBBox,\n  validateId\n};\n//# sourceMappingURL=index.js.map","// index.js\nimport { feature, point, lineString, isObject } from \"@turf/helpers\";\nfunction coordEach(geojson, callback, excludeWrapCoord) {\n  if (geojson === null) return;\n  var j, k, l, geometry, stopG, coords, geometryMaybeCollection, wrapShrink = 0, coordIndex = 0, isGeometryCollection, type = geojson.type, isFeatureCollection = type === \"FeatureCollection\", isFeature = type === \"Feature\", stop = isFeatureCollection ? geojson.features.length : 1;\n  for (var featureIndex = 0; featureIndex < stop; featureIndex++) {\n    geometryMaybeCollection = isFeatureCollection ? geojson.features[featureIndex].geometry : isFeature ? geojson.geometry : geojson;\n    isGeometryCollection = geometryMaybeCollection ? geometryMaybeCollection.type === \"GeometryCollection\" : false;\n    stopG = isGeometryCollection ? geometryMaybeCollection.geometries.length : 1;\n    for (var geomIndex = 0; geomIndex < stopG; geomIndex++) {\n      var multiFeatureIndex = 0;\n      var geometryIndex = 0;\n      geometry = isGeometryCollection ? geometryMaybeCollection.geometries[geomIndex] : geometryMaybeCollection;\n      if (geometry === null) continue;\n      coords = geometry.coordinates;\n      var geomType = geometry.type;\n      wrapShrink = excludeWrapCoord && (geomType === \"Polygon\" || geomType === \"MultiPolygon\") ? 1 : 0;\n      switch (geomType) {\n        case null:\n          break;\n        case \"Point\":\n          if (callback(\n            coords,\n            coordIndex,\n            featureIndex,\n            multiFeatureIndex,\n            geometryIndex\n          ) === false)\n            return false;\n          coordIndex++;\n          multiFeatureIndex++;\n          break;\n        case \"LineString\":\n        case \"MultiPoint\":\n          for (j = 0; j < coords.length; j++) {\n            if (callback(\n              coords[j],\n              coordIndex,\n              featureIndex,\n              multiFeatureIndex,\n              geometryIndex\n            ) === false)\n              return false;\n            coordIndex++;\n            if (geomType === \"MultiPoint\") multiFeatureIndex++;\n          }\n          if (geomType === \"LineString\") multiFeatureIndex++;\n          break;\n        case \"Polygon\":\n        case \"MultiLineString\":\n          for (j = 0; j < coords.length; j++) {\n            for (k = 0; k < coords[j].length - wrapShrink; k++) {\n              if (callback(\n                coords[j][k],\n                coordIndex,\n                featureIndex,\n                multiFeatureIndex,\n                geometryIndex\n              ) === false)\n                return false;\n              coordIndex++;\n            }\n            if (geomType === \"MultiLineString\") multiFeatureIndex++;\n            if (geomType === \"Polygon\") geometryIndex++;\n          }\n          if (geomType === \"Polygon\") multiFeatureIndex++;\n          break;\n        case \"MultiPolygon\":\n          for (j = 0; j < coords.length; j++) {\n            geometryIndex = 0;\n            for (k = 0; k < coords[j].length; k++) {\n              for (l = 0; l < coords[j][k].length - wrapShrink; l++) {\n                if (callback(\n                  coords[j][k][l],\n                  coordIndex,\n                  featureIndex,\n                  multiFeatureIndex,\n                  geometryIndex\n                ) === false)\n                  return false;\n                coordIndex++;\n              }\n              geometryIndex++;\n            }\n            multiFeatureIndex++;\n          }\n          break;\n        case \"GeometryCollection\":\n          for (j = 0; j < geometry.geometries.length; j++)\n            if (coordEach(geometry.geometries[j], callback, excludeWrapCoord) === false)\n              return false;\n          break;\n        default:\n          throw new Error(\"Unknown Geometry Type\");\n      }\n    }\n  }\n}\nfunction coordReduce(geojson, callback, initialValue, excludeWrapCoord) {\n  var previousValue = initialValue;\n  coordEach(\n    geojson,\n    function(currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {\n      if (coordIndex === 0 && initialValue === void 0)\n        previousValue = currentCoord;\n      else\n        previousValue = callback(\n          previousValue,\n          currentCoord,\n          coordIndex,\n          featureIndex,\n          multiFeatureIndex,\n          geometryIndex\n        );\n    },\n    excludeWrapCoord\n  );\n  return previousValue;\n}\nfunction propEach(geojson, callback) {\n  var i;\n  switch (geojson.type) {\n    case \"FeatureCollection\":\n      for (i = 0; i < geojson.features.length; i++) {\n        if (callback(geojson.features[i].properties, i) === false) break;\n      }\n      break;\n    case \"Feature\":\n      callback(geojson.properties, 0);\n      break;\n  }\n}\nfunction propReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  propEach(geojson, function(currentProperties, featureIndex) {\n    if (featureIndex === 0 && initialValue === void 0)\n      previousValue = currentProperties;\n    else\n      previousValue = callback(previousValue, currentProperties, featureIndex);\n  });\n  return previousValue;\n}\nfunction featureEach(geojson, callback) {\n  if (geojson.type === \"Feature\") {\n    callback(geojson, 0);\n  } else if (geojson.type === \"FeatureCollection\") {\n    for (var i = 0; i < geojson.features.length; i++) {\n      if (callback(geojson.features[i], i) === false) break;\n    }\n  }\n}\nfunction featureReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  featureEach(geojson, function(currentFeature, featureIndex) {\n    if (featureIndex === 0 && initialValue === void 0)\n      previousValue = currentFeature;\n    else previousValue = callback(previousValue, currentFeature, featureIndex);\n  });\n  return previousValue;\n}\nfunction coordAll(geojson) {\n  var coords = [];\n  coordEach(geojson, function(coord) {\n    coords.push(coord);\n  });\n  return coords;\n}\nfunction geomEach(geojson, callback) {\n  var i, j, g, geometry, stopG, geometryMaybeCollection, isGeometryCollection, featureProperties, featureBBox, featureId, featureIndex = 0, isFeatureCollection = geojson.type === \"FeatureCollection\", isFeature = geojson.type === \"Feature\", stop = isFeatureCollection ? geojson.features.length : 1;\n  for (i = 0; i < stop; i++) {\n    geometryMaybeCollection = isFeatureCollection ? geojson.features[i].geometry : isFeature ? geojson.geometry : geojson;\n    featureProperties = isFeatureCollection ? geojson.features[i].properties : isFeature ? geojson.properties : {};\n    featureBBox = isFeatureCollection ? geojson.features[i].bbox : isFeature ? geojson.bbox : void 0;\n    featureId = isFeatureCollection ? geojson.features[i].id : isFeature ? geojson.id : void 0;\n    isGeometryCollection = geometryMaybeCollection ? geometryMaybeCollection.type === \"GeometryCollection\" : false;\n    stopG = isGeometryCollection ? geometryMaybeCollection.geometries.length : 1;\n    for (g = 0; g < stopG; g++) {\n      geometry = isGeometryCollection ? geometryMaybeCollection.geometries[g] : geometryMaybeCollection;\n      if (geometry === null) {\n        if (callback(\n          null,\n          featureIndex,\n          featureProperties,\n          featureBBox,\n          featureId\n        ) === false)\n          return false;\n        continue;\n      }\n      switch (geometry.type) {\n        case \"Point\":\n        case \"LineString\":\n        case \"MultiPoint\":\n        case \"Polygon\":\n        case \"MultiLineString\":\n        case \"MultiPolygon\": {\n          if (callback(\n            geometry,\n            featureIndex,\n            featureProperties,\n            featureBBox,\n            featureId\n          ) === false)\n            return false;\n          break;\n        }\n        case \"GeometryCollection\": {\n          for (j = 0; j < geometry.geometries.length; j++) {\n            if (callback(\n              geometry.geometries[j],\n              featureIndex,\n              featureProperties,\n              featureBBox,\n              featureId\n            ) === false)\n              return false;\n          }\n          break;\n        }\n        default:\n          throw new Error(\"Unknown Geometry Type\");\n      }\n    }\n    featureIndex++;\n  }\n}\nfunction geomReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  geomEach(\n    geojson,\n    function(currentGeometry, featureIndex, featureProperties, featureBBox, featureId) {\n      if (featureIndex === 0 && initialValue === void 0)\n        previousValue = currentGeometry;\n      else\n        previousValue = callback(\n          previousValue,\n          currentGeometry,\n          featureIndex,\n          featureProperties,\n          featureBBox,\n          featureId\n        );\n    }\n  );\n  return previousValue;\n}\nfunction flattenEach(geojson, callback) {\n  geomEach(geojson, function(geometry, featureIndex, properties, bbox, id) {\n    var type = geometry === null ? null : geometry.type;\n    switch (type) {\n      case null:\n      case \"Point\":\n      case \"LineString\":\n      case \"Polygon\":\n        if (callback(\n          feature(geometry, properties, { bbox, id }),\n          featureIndex,\n          0\n        ) === false)\n          return false;\n        return;\n    }\n    var geomType;\n    switch (type) {\n      case \"MultiPoint\":\n        geomType = \"Point\";\n        break;\n      case \"MultiLineString\":\n        geomType = \"LineString\";\n        break;\n      case \"MultiPolygon\":\n        geomType = \"Polygon\";\n        break;\n    }\n    for (var multiFeatureIndex = 0; multiFeatureIndex < geometry.coordinates.length; multiFeatureIndex++) {\n      var coordinate = geometry.coordinates[multiFeatureIndex];\n      var geom = {\n        type: geomType,\n        coordinates: coordinate\n      };\n      if (callback(feature(geom, properties), featureIndex, multiFeatureIndex) === false)\n        return false;\n    }\n  });\n}\nfunction flattenReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  flattenEach(\n    geojson,\n    function(currentFeature, featureIndex, multiFeatureIndex) {\n      if (featureIndex === 0 && multiFeatureIndex === 0 && initialValue === void 0)\n        previousValue = currentFeature;\n      else\n        previousValue = callback(\n          previousValue,\n          currentFeature,\n          featureIndex,\n          multiFeatureIndex\n        );\n    }\n  );\n  return previousValue;\n}\nfunction segmentEach(geojson, callback) {\n  flattenEach(geojson, function(feature2, featureIndex, multiFeatureIndex) {\n    var segmentIndex = 0;\n    if (!feature2.geometry) return;\n    var type = feature2.geometry.type;\n    if (type === \"Point\" || type === \"MultiPoint\") return;\n    var previousCoords;\n    var previousFeatureIndex = 0;\n    var previousMultiIndex = 0;\n    var prevGeomIndex = 0;\n    if (coordEach(\n      feature2,\n      function(currentCoord, coordIndex, featureIndexCoord, multiPartIndexCoord, geometryIndex) {\n        if (previousCoords === void 0 || featureIndex > previousFeatureIndex || multiPartIndexCoord > previousMultiIndex || geometryIndex > prevGeomIndex) {\n          previousCoords = currentCoord;\n          previousFeatureIndex = featureIndex;\n          previousMultiIndex = multiPartIndexCoord;\n          prevGeomIndex = geometryIndex;\n          segmentIndex = 0;\n          return;\n        }\n        var currentSegment = lineString(\n          [previousCoords, currentCoord],\n          feature2.properties\n        );\n        if (callback(\n          currentSegment,\n          featureIndex,\n          multiFeatureIndex,\n          geometryIndex,\n          segmentIndex\n        ) === false)\n          return false;\n        segmentIndex++;\n        previousCoords = currentCoord;\n      }\n    ) === false)\n      return false;\n  });\n}\nfunction segmentReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  var started = false;\n  segmentEach(\n    geojson,\n    function(currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex) {\n      if (started === false && initialValue === void 0)\n        previousValue = currentSegment;\n      else\n        previousValue = callback(\n          previousValue,\n          currentSegment,\n          featureIndex,\n          multiFeatureIndex,\n          geometryIndex,\n          segmentIndex\n        );\n      started = true;\n    }\n  );\n  return previousValue;\n}\nfunction lineEach(geojson, callback) {\n  if (!geojson) throw new Error(\"geojson is required\");\n  flattenEach(geojson, function(feature2, featureIndex, multiFeatureIndex) {\n    if (feature2.geometry === null) return;\n    var type = feature2.geometry.type;\n    var coords = feature2.geometry.coordinates;\n    switch (type) {\n      case \"LineString\":\n        if (callback(feature2, featureIndex, multiFeatureIndex, 0, 0) === false)\n          return false;\n        break;\n      case \"Polygon\":\n        for (var geometryIndex = 0; geometryIndex < coords.length; geometryIndex++) {\n          if (callback(\n            lineString(coords[geometryIndex], feature2.properties),\n            featureIndex,\n            multiFeatureIndex,\n            geometryIndex\n          ) === false)\n            return false;\n        }\n        break;\n    }\n  });\n}\nfunction lineReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  lineEach(\n    geojson,\n    function(currentLine, featureIndex, multiFeatureIndex, geometryIndex) {\n      if (featureIndex === 0 && initialValue === void 0)\n        previousValue = currentLine;\n      else\n        previousValue = callback(\n          previousValue,\n          currentLine,\n          featureIndex,\n          multiFeatureIndex,\n          geometryIndex\n        );\n    }\n  );\n  return previousValue;\n}\nfunction findSegment(geojson, options) {\n  options = options || {};\n  if (!isObject(options)) throw new Error(\"options is invalid\");\n  var featureIndex = options.featureIndex || 0;\n  var multiFeatureIndex = options.multiFeatureIndex || 0;\n  var geometryIndex = options.geometryIndex || 0;\n  var segmentIndex = options.segmentIndex || 0;\n  var properties = options.properties;\n  var geometry;\n  switch (geojson.type) {\n    case \"FeatureCollection\":\n      if (featureIndex < 0)\n        featureIndex = geojson.features.length + featureIndex;\n      properties = properties || geojson.features[featureIndex].properties;\n      geometry = geojson.features[featureIndex].geometry;\n      break;\n    case \"Feature\":\n      properties = properties || geojson.properties;\n      geometry = geojson.geometry;\n      break;\n    case \"Point\":\n    case \"MultiPoint\":\n      return null;\n    case \"LineString\":\n    case \"Polygon\":\n    case \"MultiLineString\":\n    case \"MultiPolygon\":\n      geometry = geojson;\n      break;\n    default:\n      throw new Error(\"geojson is invalid\");\n  }\n  if (geometry === null) return null;\n  var coords = geometry.coordinates;\n  switch (geometry.type) {\n    case \"Point\":\n    case \"MultiPoint\":\n      return null;\n    case \"LineString\":\n      if (segmentIndex < 0) segmentIndex = coords.length + segmentIndex - 1;\n      return lineString(\n        [coords[segmentIndex], coords[segmentIndex + 1]],\n        properties,\n        options\n      );\n    case \"Polygon\":\n      if (geometryIndex < 0) geometryIndex = coords.length + geometryIndex;\n      if (segmentIndex < 0)\n        segmentIndex = coords[geometryIndex].length + segmentIndex - 1;\n      return lineString(\n        [\n          coords[geometryIndex][segmentIndex],\n          coords[geometryIndex][segmentIndex + 1]\n        ],\n        properties,\n        options\n      );\n    case \"MultiLineString\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (segmentIndex < 0)\n        segmentIndex = coords[multiFeatureIndex].length + segmentIndex - 1;\n      return lineString(\n        [\n          coords[multiFeatureIndex][segmentIndex],\n          coords[multiFeatureIndex][segmentIndex + 1]\n        ],\n        properties,\n        options\n      );\n    case \"MultiPolygon\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (geometryIndex < 0)\n        geometryIndex = coords[multiFeatureIndex].length + geometryIndex;\n      if (segmentIndex < 0)\n        segmentIndex = coords[multiFeatureIndex][geometryIndex].length - segmentIndex - 1;\n      return lineString(\n        [\n          coords[multiFeatureIndex][geometryIndex][segmentIndex],\n          coords[multiFeatureIndex][geometryIndex][segmentIndex + 1]\n        ],\n        properties,\n        options\n      );\n  }\n  throw new Error(\"geojson is invalid\");\n}\nfunction findPoint(geojson, options) {\n  options = options || {};\n  if (!isObject(options)) throw new Error(\"options is invalid\");\n  var featureIndex = options.featureIndex || 0;\n  var multiFeatureIndex = options.multiFeatureIndex || 0;\n  var geometryIndex = options.geometryIndex || 0;\n  var coordIndex = options.coordIndex || 0;\n  var properties = options.properties;\n  var geometry;\n  switch (geojson.type) {\n    case \"FeatureCollection\":\n      if (featureIndex < 0)\n        featureIndex = geojson.features.length + featureIndex;\n      properties = properties || geojson.features[featureIndex].properties;\n      geometry = geojson.features[featureIndex].geometry;\n      break;\n    case \"Feature\":\n      properties = properties || geojson.properties;\n      geometry = geojson.geometry;\n      break;\n    case \"Point\":\n    case \"MultiPoint\":\n      return null;\n    case \"LineString\":\n    case \"Polygon\":\n    case \"MultiLineString\":\n    case \"MultiPolygon\":\n      geometry = geojson;\n      break;\n    default:\n      throw new Error(\"geojson is invalid\");\n  }\n  if (geometry === null) return null;\n  var coords = geometry.coordinates;\n  switch (geometry.type) {\n    case \"Point\":\n      return point(coords, properties, options);\n    case \"MultiPoint\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      return point(coords[multiFeatureIndex], properties, options);\n    case \"LineString\":\n      if (coordIndex < 0) coordIndex = coords.length + coordIndex;\n      return point(coords[coordIndex], properties, options);\n    case \"Polygon\":\n      if (geometryIndex < 0) geometryIndex = coords.length + geometryIndex;\n      if (coordIndex < 0)\n        coordIndex = coords[geometryIndex].length + coordIndex;\n      return point(coords[geometryIndex][coordIndex], properties, options);\n    case \"MultiLineString\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (coordIndex < 0)\n        coordIndex = coords[multiFeatureIndex].length + coordIndex;\n      return point(coords[multiFeatureIndex][coordIndex], properties, options);\n    case \"MultiPolygon\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (geometryIndex < 0)\n        geometryIndex = coords[multiFeatureIndex].length + geometryIndex;\n      if (coordIndex < 0)\n        coordIndex = coords[multiFeatureIndex][geometryIndex].length - coordIndex;\n      return point(\n        coords[multiFeatureIndex][geometryIndex][coordIndex],\n        properties,\n        options\n      );\n  }\n  throw new Error(\"geojson is invalid\");\n}\nexport {\n  coordAll,\n  coordEach,\n  coordReduce,\n  featureEach,\n  featureReduce,\n  findPoint,\n  findSegment,\n  flattenEach,\n  flattenReduce,\n  geomEach,\n  geomReduce,\n  lineEach,\n  lineReduce,\n  propEach,\n  propReduce,\n  segmentEach,\n  segmentReduce\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { earthRadius } from \"@turf/helpers\";\nimport { geomReduce } from \"@turf/meta\";\nfunction area(geojson) {\n  return geomReduce(\n    geojson,\n    (value, geom) => {\n      return value + calculateArea(geom);\n    },\n    0\n  );\n}\nfunction calculateArea(geom) {\n  let total = 0;\n  let i;\n  switch (geom.type) {\n    case \"Polygon\":\n      return polygonArea(geom.coordinates);\n    case \"MultiPolygon\":\n      for (i = 0; i < geom.coordinates.length; i++) {\n        total += polygonArea(geom.coordinates[i]);\n      }\n      return total;\n    case \"Point\":\n    case \"MultiPoint\":\n    case \"LineString\":\n    case \"MultiLineString\":\n      return 0;\n  }\n  return 0;\n}\nfunction polygonArea(coords) {\n  let total = 0;\n  if (coords && coords.length > 0) {\n    total += Math.abs(ringArea(coords[0]));\n    for (let i = 1; i < coords.length; i++) {\n      total -= Math.abs(ringArea(coords[i]));\n    }\n  }\n  return total;\n}\nvar FACTOR = earthRadius * earthRadius / 2;\nvar PI_OVER_180 = Math.PI / 180;\nfunction ringArea(coords) {\n  const coordsLength = coords.length - 1;\n  if (coordsLength <= 2) return 0;\n  let total = 0;\n  let i = 0;\n  while (i < coordsLength) {\n    const lower = coords[i];\n    const middle = coords[i + 1 === coordsLength ? 0 : i + 1];\n    const upper = coords[i + 2 >= coordsLength ? (i + 2) % coordsLength : i + 2];\n    const lowerX = lower[0] * PI_OVER_180;\n    const middleY = middle[1] * PI_OVER_180;\n    const upperX = upper[0] * PI_OVER_180;\n    total += (upperX - lowerX) * Math.sin(middleY);\n    i++;\n  }\n  return total * FACTOR;\n}\nvar turf_area_default = area;\nexport {\n  area,\n  turf_area_default as default\n};\n//# sourceMappingURL=index.js.map","import type { AreaUnit, forceAreaUnitType, imperialAreaUnit, metricAreaUnit } from '../interfaces';\n\n/**\n * convert area unit to metric or imperial\n * @param value area value in m2\n * @param unit area unit either metric or imperial\n * @param forceUnit Default is `auto`. If `auto` is set, unit is converted depending on the value and selection of area unit. If a specific unit is specified, it returns the value always the same. If a selected unit is not the same type of unit either metric of imperial, it will be ignored, and `auto` will be applied.\n * @returns result object with area and unit properties adter unit conversion\n */\nexport const convertAreaUnit = (\n\tvalue: number,\n\tunit: AreaUnit,\n\tforceUnit: forceAreaUnitType = 'auto'\n) => {\n\t// Define metric and imperial units\n\tconst metricUnits = ['m2', 'km2', 'a', 'ha'];\n\tconst imperialUnits = ['ft2', 'yd2', 'acre', 'mi2'];\n\n\t// Check if forceUnit matches the selected unit type, otherwise treat as 'auto'\n\tlet effectiveForceUnit = forceUnit;\n\tif (forceUnit !== 'auto') {\n\t\tconst isMetricForceUnit = metricUnits.includes(forceUnit);\n\t\tconst isImperialForceUnit = imperialUnits.includes(forceUnit);\n\n\t\tif (\n\t\t\t(unit === 'metric' && !isMetricForceUnit) ||\n\t\t\t(unit === 'imperial' && !isImperialForceUnit)\n\t\t) {\n\t\t\teffectiveForceUnit = 'auto';\n\t\t}\n\t}\n\n\tif (unit === 'metric') {\n\t\tif (effectiveForceUnit !== 'auto') {\n\t\t\treturn convertMetricUnit(value, effectiveForceUnit as metricAreaUnit);\n\t\t} else {\n\t\t\tif (value >= 1000000) {\n\t\t\t\treturn convertMetricUnit(value, 'km2');\n\t\t\t} else if (value >= 10000) {\n\t\t\t\treturn convertMetricUnit(value, 'ha');\n\t\t\t} else if (value >= 100) {\n\t\t\t\treturn convertMetricUnit(value, 'a');\n\t\t\t} else {\n\t\t\t\treturn convertMetricUnit(value, 'm2');\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (effectiveForceUnit !== 'auto') {\n\t\t\treturn convertImperialUnit(value, effectiveForceUnit as imperialAreaUnit);\n\t\t} else {\n\t\t\tif (value >= 2589988.11) {\n\t\t\t\treturn convertImperialUnit(value, 'mi2');\n\t\t\t} else if (value >= 4046.856) {\n\t\t\t\treturn convertImperialUnit(value, 'acre');\n\t\t\t} else if (value >= 0.83612736) {\n\t\t\t\treturn convertImperialUnit(value, 'yd2');\n\t\t\t} else {\n\t\t\t\treturn convertImperialUnit(value, 'ft2');\n\t\t\t}\n\t\t}\n\t}\n};\n\nconst convertMetricUnit = (value: number, unit: metricAreaUnit) => {\n\tlet outputArea = value;\n\tlet outputUnit = 'm';\n\tswitch (unit) {\n\t\tcase 'm2':\n\t\t\toutputArea = value;\n\t\t\toutputUnit = 'm';\n\t\t\tbreak;\n\t\tcase 'a':\n\t\t\t// 1a = 100 m\n\t\t\toutputArea = value / 100;\n\t\t\toutputUnit = 'a';\n\t\t\tbreak;\n\t\tcase 'ha':\n\t\t\t// 1 ha = 10,000 m\n\t\t\toutputArea = value / 10000;\n\t\t\toutputUnit = 'ha';\n\t\t\tbreak;\n\t\tcase 'km2':\n\t\t\t// 1 km = 1,000,000 m\n\t\t\toutputArea = value / 1000000;\n\t\t\toutputUnit = 'km';\n\t\t\tbreak;\n\t}\n\treturn {\n\t\tarea: outputArea,\n\t\tunit: outputUnit\n\t};\n};\n\nconst convertImperialUnit = (value: number, unit: imperialAreaUnit) => {\n\tlet outputArea = value / 2589988.11;\n\tlet outputUnit = 'm';\n\tswitch (unit) {\n\t\tcase 'ft2':\n\t\t\t// 1 ft = 0.09290304 m\n\t\t\toutputArea = value / 0.09290304;\n\t\t\toutputUnit = 'ft';\n\t\t\tbreak;\n\t\tcase 'yd2':\n\t\t\t// 1 yd = 0.83612736 m\n\t\t\toutputArea = value / 0.83612736;\n\t\t\toutputUnit = 'yd';\n\t\t\tbreak;\n\t\tcase 'acre':\n\t\t\t// 1 acre = 4,046.856 m\n\t\t\toutputArea = value / 4046.856;\n\t\t\toutputUnit = 'acre';\n\t\t\tbreak;\n\t\tcase 'mi2':\n\t\t\t// 1 mi = 2,589,988.11 m\n\t\t\toutputArea = value / 2589988.11;\n\t\t\toutputUnit = 'mi';\n\t\t\tbreak;\n\t}\n\treturn {\n\t\tarea: outputArea,\n\t\tunit: outputUnit\n\t};\n};\n","import type { AreaUnit, forceAreaUnitType } from '../interfaces/AreaUnit';\nimport area from '@turf/area';\nimport type { GeoJSONStoreFeatures } from 'terra-draw';\nimport { convertAreaUnit } from './convertAreaUnit';\n\n/**\n * Calculate area from polygon feature\n * @param feature Polygon GeoJSON feature\n * @param areaUnit Area unit\n * @param areaPrecision Precision of area value\n * @param forceUnit Default is `auto`. If `auto` is set, unit is converted depending on the value and selection of area unit. If a specific unit is specified, it returns the value always the same. If a selected unit is not the same type of unit either metric of imperial, it will be ignored, and `auto` will be applied.\n * @returns  The returning feature will contain `area`,`unit` properties.\n */\nexport const calcArea = (\n\tfeature: GeoJSONStoreFeatures,\n\tareaUnit: AreaUnit,\n\tareaPrecision: number,\n\tforceUnit?: forceAreaUnitType\n) => {\n\tif (feature.geometry.type !== 'Polygon') return feature;\n\t// caculate area in m2 by using turf/area\n\tconst result = area(feature.geometry);\n\n\tconst converted = convertAreaUnit(result, areaUnit, forceUnit);\n\tconverted.area = parseFloat(converted.area.toFixed(areaPrecision));\n\n\tfeature.properties.area = converted.area;\n\tfeature.properties.unit = converted.unit;\n\n\treturn feature;\n};\n","// index.ts\nimport { isNumber } from \"@turf/helpers\";\nfunction getCoord(coord) {\n  if (!coord) {\n    throw new Error(\"coord is required\");\n  }\n  if (!Array.isArray(coord)) {\n    if (coord.type === \"Feature\" && coord.geometry !== null && coord.geometry.type === \"Point\") {\n      return [...coord.geometry.coordinates];\n    }\n    if (coord.type === \"Point\") {\n      return [...coord.coordinates];\n    }\n  }\n  if (Array.isArray(coord) && coord.length >= 2 && !Array.isArray(coord[0]) && !Array.isArray(coord[1])) {\n    return [...coord];\n  }\n  throw new Error(\"coord must be GeoJSON Point or an Array of numbers\");\n}\nfunction getCoords(coords) {\n  if (Array.isArray(coords)) {\n    return coords;\n  }\n  if (coords.type === \"Feature\") {\n    if (coords.geometry !== null) {\n      return coords.geometry.coordinates;\n    }\n  } else {\n    if (coords.coordinates) {\n      return coords.coordinates;\n    }\n  }\n  throw new Error(\n    \"coords must be GeoJSON Feature, Geometry Object or an Array\"\n  );\n}\nfunction containsNumber(coordinates) {\n  if (coordinates.length > 1 && isNumber(coordinates[0]) && isNumber(coordinates[1])) {\n    return true;\n  }\n  if (Array.isArray(coordinates[0]) && coordinates[0].length) {\n    return containsNumber(coordinates[0]);\n  }\n  throw new Error(\"coordinates must only contain numbers\");\n}\nfunction geojsonType(value, type, name) {\n  if (!type || !name) {\n    throw new Error(\"type and name required\");\n  }\n  if (!value || value.type !== type) {\n    throw new Error(\n      \"Invalid input to \" + name + \": must be a \" + type + \", given \" + value.type\n    );\n  }\n}\nfunction featureOf(feature, type, name) {\n  if (!feature) {\n    throw new Error(\"No feature passed\");\n  }\n  if (!name) {\n    throw new Error(\".featureOf() requires a name\");\n  }\n  if (!feature || feature.type !== \"Feature\" || !feature.geometry) {\n    throw new Error(\n      \"Invalid input to \" + name + \", Feature with geometry required\"\n    );\n  }\n  if (!feature.geometry || feature.geometry.type !== type) {\n    throw new Error(\n      \"Invalid input to \" + name + \": must be a \" + type + \", given \" + feature.geometry.type\n    );\n  }\n}\nfunction collectionOf(featureCollection, type, name) {\n  if (!featureCollection) {\n    throw new Error(\"No featureCollection passed\");\n  }\n  if (!name) {\n    throw new Error(\".collectionOf() requires a name\");\n  }\n  if (!featureCollection || featureCollection.type !== \"FeatureCollection\") {\n    throw new Error(\n      \"Invalid input to \" + name + \", FeatureCollection required\"\n    );\n  }\n  for (const feature of featureCollection.features) {\n    if (!feature || feature.type !== \"Feature\" || !feature.geometry) {\n      throw new Error(\n        \"Invalid input to \" + name + \", Feature with geometry required\"\n      );\n    }\n    if (!feature.geometry || feature.geometry.type !== type) {\n      throw new Error(\n        \"Invalid input to \" + name + \": must be a \" + type + \", given \" + feature.geometry.type\n      );\n    }\n  }\n}\nfunction getGeom(geojson) {\n  if (geojson.type === \"Feature\") {\n    return geojson.geometry;\n  }\n  return geojson;\n}\nfunction getType(geojson, _name) {\n  if (geojson.type === \"FeatureCollection\") {\n    return \"FeatureCollection\";\n  }\n  if (geojson.type === \"GeometryCollection\") {\n    return \"GeometryCollection\";\n  }\n  if (geojson.type === \"Feature\" && geojson.geometry !== null) {\n    return geojson.geometry.type;\n  }\n  return geojson.type;\n}\nexport {\n  collectionOf,\n  containsNumber,\n  featureOf,\n  geojsonType,\n  getCoord,\n  getCoords,\n  getGeom,\n  getType\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { getCoord } from \"@turf/invariant\";\nimport { radiansToLength, degreesToRadians } from \"@turf/helpers\";\nfunction distance(from, to, options = {}) {\n  var coordinates1 = getCoord(from);\n  var coordinates2 = getCoord(to);\n  var dLat = degreesToRadians(coordinates2[1] - coordinates1[1]);\n  var dLon = degreesToRadians(coordinates2[0] - coordinates1[0]);\n  var lat1 = degreesToRadians(coordinates1[1]);\n  var lat2 = degreesToRadians(coordinates2[1]);\n  var a = Math.pow(Math.sin(dLat / 2), 2) + Math.pow(Math.sin(dLon / 2), 2) * Math.cos(lat1) * Math.cos(lat2);\n  return radiansToLength(\n    2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)),\n    options.units\n  );\n}\nvar turf_distance_default = distance;\nexport {\n  turf_distance_default as default,\n  distance\n};\n//# sourceMappingURL=index.js.map","import type { DistanceUnit, DistanceUnitShortName, forceDistanceUnitType } from '../interfaces';\n\n/**\n * Convert distance according to the distance unit given.\n *\n * Converts a distance in kilometers or miles to the appropriate unit based on the `unit` and `forceUnit` parameters.\n * - For `kilometers`, it converts to km, m, or cm depending on the value and `forceUnit`.\n * - For `miles`, it converts to mi, ft, or in depending on the value and `forceUnit`.\n * - For `degrees` or `radians`, it returns the value unchanged with the corresponding unit symbol.\n *\n * @param value - The distance in the unit specified by the `unit` parameter.\n * @param unit - The unit of the input distance type: \"degrees\", \"radians\", \"miles\", or \"kilometers\" (default is 'kilometers').\n * @param forceUnit - Default is `auto`. If `auto` is set, the unit is converted automatically based on the value. If a specific unit is set, the value is converted to that unit.\n * @returns The converted value and unit.\n */\nexport const convertDistance = (\n\tvalue: number,\n\tunit: DistanceUnit = 'kilometers',\n\tforceUnit: forceDistanceUnitType = 'auto'\n): { distance: number; unit: DistanceUnitShortName } => {\n\t// Define metric and imperial units\n\tconst metricUnits = ['cm', 'm', 'km'];\n\tconst imperialUnits = ['in', 'ft', 'mi'];\n\n\t// Check if forceUnit matches the selected unit type, otherwise treat as 'auto'\n\tlet effectiveForceUnit = forceUnit;\n\tif (forceUnit !== 'auto') {\n\t\tconst isMetricForceUnit = metricUnits.includes(forceUnit);\n\t\tconst isImperialForceUnit = imperialUnits.includes(forceUnit);\n\n\t\tif (\n\t\t\t(unit === 'kilometers' && !isMetricForceUnit) ||\n\t\t\t(unit === 'miles' && !isImperialForceUnit)\n\t\t) {\n\t\t\teffectiveForceUnit = 'auto';\n\t\t}\n\t}\n\n\tlet result: { distance: number; unit: DistanceUnitShortName } = {\n\t\tdistance: value,\n\t\tunit: 'km'\n\t};\n\n\tif (unit === 'kilometers') {\n\t\tresult = convertMetricUnit(value, effectiveForceUnit);\n\t} else if (unit === 'degrees') {\n\t\tresult.unit = '';\n\t} else if (unit === 'miles') {\n\t\tresult = convertImperialUnit(value, effectiveForceUnit);\n\t} else if (unit === 'radians') {\n\t\tresult.unit = 'rad';\n\t}\n\t// Default case: return kilometers if unit is not recognized\n\treturn result;\n};\n\nconst convertMetricUnit = (value: number, unit: forceDistanceUnitType) => {\n\tlet result: { distance: number; unit: DistanceUnitShortName } = {\n\t\tdistance: value,\n\t\tunit: 'km'\n\t};\n\t// Convert based on the specified or auto-detected unit\n\tswitch (unit) {\n\t\tcase 'km':\n\t\t\tresult.distance = value;\n\t\t\tresult.unit = 'km';\n\t\t\tbreak;\n\t\tcase 'm':\n\t\t\tresult.distance = value * 1000;\n\t\t\tresult.unit = 'm';\n\t\t\tbreak;\n\t\tcase 'cm':\n\t\t\tresult.distance = value * 100000;\n\t\t\tresult.unit = 'cm';\n\t\t\tbreak;\n\t\tcase 'auto':\n\t\t\t// if auto, determine the best unit based on the value\n\t\t\tif (value >= 1) {\n\t\t\t\tresult = convertMetricUnit(value, 'km');\n\t\t\t} else if (value * 1000 >= 1) {\n\t\t\t\tresult = convertMetricUnit(value, 'm');\n\t\t\t} else {\n\t\t\t\tresult = convertMetricUnit(value, 'cm');\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t// km as a fallback\n\t\t\tresult.distance = value;\n\t\t\tresult.unit = 'km';\n\t\t\tbreak;\n\t}\n\treturn result;\n};\n\nconst convertImperialUnit = (value: number, unit: forceDistanceUnitType) => {\n\tlet result: { distance: number; unit: DistanceUnitShortName } = {\n\t\tdistance: value,\n\t\tunit: 'mi'\n\t};\n\t// Convert based on the specified or auto-detected unit\n\tswitch (unit) {\n\t\tcase 'mi':\n\t\t\tresult.distance = value;\n\t\t\tresult.unit = 'mi';\n\t\t\tbreak;\n\t\tcase 'ft':\n\t\t\tresult.distance = value * 5280;\n\t\t\tresult.unit = 'ft';\n\t\t\tbreak;\n\t\tcase 'in':\n\t\t\tresult.distance = value * 63360;\n\t\t\tresult.unit = 'in';\n\t\t\tbreak;\n\t\tcase 'auto':\n\t\t\t// if auto, determine the best unit based on the value\n\t\t\tif (value >= 1) {\n\t\t\t\tresult = convertImperialUnit(value, 'mi');\n\t\t\t} else if (value * 5280 >= 1) {\n\t\t\t\tresult = convertImperialUnit(value, 'ft');\n\t\t\t} else {\n\t\t\t\tresult = convertImperialUnit(value, 'in');\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t// mi as a fallback\n\t\t\tresult.distance = value;\n\t\t\tresult.unit = 'mi';\n\t\t\tbreak;\n\t}\n\treturn result;\n};\n","import distance from '@turf/distance';\nimport type { GeoJSONStoreFeatures } from 'terra-draw';\nimport type { LngLatLike, Map } from 'maplibre-gl';\nimport type { DistanceUnit, forceDistanceUnitType, TerrainSource } from '../interfaces';\nimport { convertDistance } from './convertDistance';\n\n/**\n * Caclulate distance for each segment on a given feature\n * @param feature LineString GeoJSON feature\n * @param distanceUnit Distance unit\n * @param distancePrecision Precision of distance\n * @param forceUnit Default is `auto`. If `auto` is set, unit is converted depending on the value in metric.\n * @param map Maplibre map instance\n * @param computeElevation Compute elevation for each segment\n * @param terrainSource Terrain source for elevation calculation. If terrainSource is undefined, going to to query elevation from maplibre terrain.\n * @returns The returning feature will contain `segments`, `distance`, `unit` properties. `segments` will have multiple point features.\n */\nexport const calcDistance = (\n\tfeature: GeoJSONStoreFeatures,\n\tdistanceUnit: DistanceUnit,\n\tdistancePrecision: number,\n\tforceUnit?: forceDistanceUnitType,\n\tmap?: Map,\n\tcomputeElevation?: boolean,\n\tterrainSource?: TerrainSource\n) => {\n\tif (feature.geometry.type !== 'LineString') return feature;\n\tconst coordinates: number[][] = (feature as GeoJSONStoreFeatures).geometry\n\t\t.coordinates as number[][];\n\n\t// calculate distance for each segment of LineString feature\n\tlet totalDistance = 0;\n\tconst segments: GeoJSONStoreFeatures[] = [];\n\tfor (let i = 0; i < coordinates.length - 1; i++) {\n\t\tconst start = coordinates[i];\n\t\tconst end = coordinates[i + 1];\n\t\tconst result = distance(start, end, { units: distanceUnit });\n\t\ttotalDistance += result;\n\n\t\t// segment\n\t\tconst segment = JSON.parse(JSON.stringify(feature));\n\t\tsegment.id = `${segment.id}-${i}`;\n\t\tsegment.geometry.coordinates = [start, end];\n\t\tsegment.properties.originalId = feature.id;\n\t\tsegment.properties.distance = result;\n\t\tsegment.properties.total = totalDistance;\n\n\t\tif (computeElevation === true && terrainSource === undefined) {\n\t\t\tconst elevation_start = map?.queryTerrainElevation(start as LngLatLike);\n\t\t\tif (elevation_start) {\n\t\t\t\tsegment.properties.elevation_start = elevation_start;\n\t\t\t}\n\n\t\t\tconst elevation_end = map?.queryTerrainElevation(end as LngLatLike);\n\t\t\tif (elevation_end) {\n\t\t\t\tsegment.properties.elevation_end = elevation_end;\n\t\t\t}\n\t\t}\n\n\t\tsegments.push(segment);\n\t}\n\n\tfeature.properties.distance = segments[segments.length - 1].properties.total;\n\tfeature.properties.segments = JSON.parse(JSON.stringify(segments));\n\n\t// convert distance unit\n\tconst convertedDistance = convertDistance(\n\t\tfeature.properties.distance as number,\n\t\tdistanceUnit,\n\t\tforceUnit\n\t);\n\tfeature.properties.distance = convertedDistance.distance;\n\tfeature.properties.unit = convertedDistance.unit;\n\n\t(feature.properties.segments as unknown as GeoJSONStoreFeatures[]).forEach(\n\t\t(segment: GeoJSONStoreFeatures) => {\n\t\t\tconst segmentDistance = convertDistance(\n\t\t\t\tsegment.properties.distance as number,\n\t\t\t\tdistanceUnit,\n\t\t\t\tforceUnit\n\t\t\t);\n\t\t\tsegment.properties.distance = segmentDistance.distance;\n\t\t\tsegment.properties.unit = segmentDistance.unit;\n\n\t\t\tconst segmentTotalDistance = convertDistance(\n\t\t\t\tsegment.properties.total as number,\n\t\t\t\tdistanceUnit,\n\t\t\t\tforceUnit\n\t\t\t);\n\t\t\tsegment.properties.total = segmentTotalDistance.distance;\n\t\t\tsegment.properties.totalUnit = segmentTotalDistance.unit;\n\t\t}\n\t);\n\n\t//  round distance precision according to the config.\n\tfeature.properties.distance = parseFloat(\n\t\t(feature.properties.distance as number).toFixed(distancePrecision)\n\t);\n\n\t(feature.properties.segments as unknown as GeoJSONStoreFeatures[]).forEach(\n\t\t(segment: GeoJSONStoreFeatures) => {\n\t\t\tsegment.properties.distance = parseFloat(\n\t\t\t\t(segment.properties.distance as number).toFixed(distancePrecision)\n\t\t\t);\n\t\t\tsegment.properties.total = parseFloat(\n\t\t\t\t(segment.properties.total as number).toFixed(distancePrecision)\n\t\t\t);\n\t\t}\n\t);\n\n\treturn feature;\n};\n","/**\n * Capitalzie string value\n * @param value string value\n * @returns string\n */\nexport const capitalize = (value: string) => {\n\treturn value.charAt(0).toUpperCase() + value.slice(1);\n};\n","import { defaultMeasureControlOptions, defaultValhallaControlOptions } from '../constants';\nimport type { StyleSpecification } from 'maplibre-gl';\n\nexport const TERRADRAW_SOURCE_IDS = [\n\t'{prefix}-point',\n\t'{prefix}-point-lower',\n\t'{prefix}-linestring',\n\t'{prefix}-polygon',\n\t'{prefix}-polygon-outline'\n];\nexport const TERRADRAW_MEASURE_SOURCE_IDS = [\n\t...TERRADRAW_SOURCE_IDS,\n\tdefaultMeasureControlOptions.polygonLayerSpec?.source as string,\n\tdefaultMeasureControlOptions.lineLayerLabelSpec?.source as string,\n\tdefaultMeasureControlOptions.pointLayerLabelSpec?.source as string\n];\nexport const TERRADRAW_VALHALLA_SOURCE_IDS = [\n\t...TERRADRAW_SOURCE_IDS,\n\tdefaultValhallaControlOptions.routingLineLayerNodeLabelSpec?.source as string,\n\tdefaultValhallaControlOptions.routingLineLayerNodeSpec?.source as string,\n\tdefaultValhallaControlOptions.isochronePolygonLayerSpec?.source as string,\n\tdefaultValhallaControlOptions.isochroneLineLayerSpec?.source as string,\n\tdefaultValhallaControlOptions.isochroneLabelLayerSpec?.source as string\n];\n\n/**\n * clean maplibre style to filter only for terradraw related layers or without them.\n * If options are not set, returns original style given to the function.\n *\n * This can be useful incase users only want to get terradraw related layers or without it.\n *\n * Usage:\n * `cleanMaplibreStyle(map.getStyle, { excludeTerraDrawLayers: true})`\n * `cleanMaplibreStyle(map.getStyle, { onlyTerraDrawLayers: true})`\n *\n * @param style maplibre style spec\n * @param options.excludeTerraDrawLayers return maplibre style without terradraw layers and sources\n * @param options.onlyTerraDrawLayers return maplibre style with only terradraw layers and sources\n * @param sourceIds terradraw related source IDs (internally used). Use TERRADRAW_SOURCE_IDS or TERRADRAW_MEASURE_SOURCE_IDS\n * @param prefixId prefix to use for source IDs, default is 'td'. {prefix} will be replaced with this prefixId\n * @returns maplibre style spec\n */\nexport const cleanMaplibreStyle = (\n\tstyle: StyleSpecification,\n\toptions?: { excludeTerraDrawLayers?: boolean; onlyTerraDrawLayers?: boolean },\n\tsourceIds = TERRADRAW_SOURCE_IDS,\n\tprefixId = 'td'\n) => {\n\tsourceIds = sourceIds.map((id) => id.replace('{prefix}', prefixId));\n\n\tconst cloned: StyleSpecification = JSON.parse(JSON.stringify(style));\n\tif (options) {\n\t\tif (options.onlyTerraDrawLayers === true) {\n\t\t\tcloned.layers = cloned.layers.filter((l) => {\n\t\t\t\treturn 'source' in l && sourceIds.includes(l.source);\n\t\t\t});\n\t\t\tObject.keys(cloned.sources).forEach((key) => {\n\t\t\t\tif (!sourceIds.includes(key)) {\n\t\t\t\t\tdelete cloned.sources[key];\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (options.excludeTerraDrawLayers === true) {\n\t\t\tcloned.layers = cloned.layers.filter((l) => {\n\t\t\t\treturn ('source' in l && !sourceIds.includes(l.source)) || l.type === 'background';\n\t\t\t});\n\t\t\tObject.keys(cloned.sources).forEach((key) => {\n\t\t\t\tif (sourceIds.includes(key)) {\n\t\t\t\t\tdelete cloned.sources[key];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\treturn cloned;\n};\n","/**\n * debounce\n * @param callback callback function\n * @param delay millisecond to delay\n */\nexport const debounce = <T extends (...args: Parameters<T>) => unknown>(\n\tcallback: T,\n\tdelay = 250\n): ((...args: Parameters<T>) => void) => {\n\tlet timeoutId: number;\n\treturn (...args) => {\n\t\tclearTimeout(timeoutId);\n\t\ttimeoutId = setTimeout(() => callback(...args), delay) as unknown as number;\n\t};\n};\n","/**\n * Cache interface\n */\nexport interface CacheInterface<T> {\n\t/**\n\t * Get a value from the cache. If the item has expired, it will be removed from the cache.\n\t */\n\tget(key: string): T | undefined;\n\t/**\n\t * set a value in the cache.\n\t * If the cache size exceeds maxSize, the oldest item will be removed (FIFO).\n\t * If ttl is set, the item will expire after ttl milliseconds.\n\t */\n\tset(key: string, value: T): void;\n\t/**\n\t * Check if a key exists in the cache.\n\t */\n\thas(key: string): boolean;\n\t/**\n\t * Delete a key from the cache.\n\t */\n\tdelete(key: string): boolean;\n\t/**\n\t * Clear the cache.\n\t */\n\tclear(): void;\n\t/**\n\t * Get the current size of the cache.\n\t */\n\tsize: number;\n}\n\n/**\n * Memory cache class\n */\nexport class MemoryCache<T> implements CacheInterface<T> {\n\tprivate cache = new Map<string, { value: T; expiry?: number }>();\n\tprivate maxSize: number;\n\tprivate ttl?: number;\n\n\tconstructor(maxSize = 1000, ttl?: number) {\n\t\tthis.maxSize = maxSize;\n\t\tthis.ttl = ttl;\n\t}\n\n\t/**\n\t * Get a value from the cache. If the item has expired, it will be removed from the cache.\n\t */\n\tget(key: string): T | undefined {\n\t\tconst item = this.cache.get(key);\n\t\tif (!item) return undefined;\n\n\t\tif (item.expiry && Date.now() > item.expiry) {\n\t\t\tthis.cache.delete(key);\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn item.value;\n\t}\n\n\t/**\n\t * set a value in the cache.\n\t * If the cache size exceeds maxSize, the oldest item will be removed (FIFO).\n\t * If ttl is set, the item will expire after ttl milliseconds.\n\t */\n\tset(key: string, value: T): void {\n\t\tif (this.maxSize === 0) return;\n\t\tif (this.cache.size >= this.maxSize) {\n\t\t\tconst firstKey = this.cache.keys().next().value;\n\t\t\tif (firstKey) this.cache.delete(firstKey);\n\t\t}\n\n\t\tconst expiry = this.ttl ? Date.now() + this.ttl : undefined;\n\t\tthis.cache.set(key, { value, expiry });\n\t}\n\n\t/**\n\t * Check if a key exists in the cache.\n\t */\n\thas(key: string): boolean {\n\t\treturn this.get(key) !== undefined;\n\t}\n\n\t/**\n\t * Delete a key from the cache.\n\t */\n\tdelete(key: string): boolean {\n\t\treturn this.cache.delete(key);\n\t}\n\n\t/**\n\t * Clear the cache.\n\t */\n\tclear(): void {\n\t\tthis.cache.clear();\n\t}\n\n\t/**\n\t * Get the current size of the cache.\n\t */\n\tget size(): number {\n\t\treturn this.cache.size;\n\t}\n\n\t/**\n\t * Cleanup expired items from the cache.\n\t */\n\tcleanupExpired(): void {\n\t\tif (!this.ttl) return;\n\n\t\tconst now = Date.now();\n\t\tfor (const [key, item] of this.cache.entries()) {\n\t\t\tif (item.expiry && now > item.expiry) {\n\t\t\t\tthis.cache.delete(key);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get cache statistics.\n\t */\n\tgetStats(): {\n\t\tsize: number;\n\t\tmaxSize: number;\n\t\tttl?: number;\n\t\thitRate?: number;\n\t} {\n\t\treturn {\n\t\t\tsize: this.size,\n\t\t\tmaxSize: this.maxSize,\n\t\t\tttl: this.ttl\n\t\t};\n\t}\n}\n","/**\n * Create a modal dialog for displaying titile, close button and content.\n */\nexport class ModalDialog {\n\tprivate className: string;\n\tprivate dialog: HTMLDialogElement | undefined;\n\tprivate title: string;\n\n\t/**\n\t * Constructor\n\t * @param className top level CSS class name for the dialog\n\t * @param title titile of the dialog\n\t */\n\tconstructor(className: string, title: string) {\n\t\tthis.className = className;\n\t\tthis.title = title;\n\t}\n\n\t/**\n\t * Create a modal dialog content and return content element.\n\t * @param parentElement parent element to append the dialog\n\t * @param addConttent callback function to add content to the dialog. The callback receives a content element as an argument and must return the modified content element.\n\t * @example\n\t * ```ts\n\t * const dialog = new ModalDialog('my-dialog', 'My Dialog');\n\t * dialog.create(document.body, (content) => {\n\t *   const p = document.createElement('p');\n\t *   p.textContent = 'This is my dialog content.';\n\t *   content.appendChild(p);\n\t *   return content;\n\t * });\n\t * dialog.open();\n\t * ```\n\t * @returns HTMLDialogElement\n\t */\n\tpublic create(\n\t\tparentElement: HTMLElement,\n\t\taddConttent: (contentElement: HTMLDivElement) => HTMLDivElement\n\t) {\n\t\tconst existingDialog = document.getElementsByClassName(this.className);\n\t\tif (existingDialog.length > 0) {\n\t\t\tArray.from(existingDialog).forEach((dialog) => {\n\t\t\t\tdialog.remove();\n\t\t\t});\n\t\t}\n\n\t\tthis.dialog = document.createElement('dialog');\n\t\tthis.dialog.classList.add(this.className);\n\n\t\tconst header = document.createElement('div');\n\t\theader.classList.add('dialog-header');\n\n\t\tconst title = document.createElement('h3');\n\t\ttitle.textContent = this.title;\n\t\ttitle.classList.add('dialog-title');\n\t\theader.appendChild(title);\n\n\t\tconst btnClose = document.createElement('button');\n\t\tbtnClose.type = 'button';\n\t\tbtnClose.classList.add('close-button');\n\t\tbtnClose.innerHTML = '';\n\t\tbtnClose.setAttribute('aria-label', 'Close dialog');\n\t\tbtnClose.addEventListener('click', () => {\n\t\t\tthis.close();\n\t\t});\n\t\theader.appendChild(btnClose);\n\n\t\tthis.dialog.appendChild(header);\n\n\t\tconst content = document.createElement('div');\n\t\tcontent.classList.add(`content`);\n\n\t\tthis.dialog.appendChild(addConttent(content));\n\n\t\tthis.dialog.addEventListener('click', (event) => {\n\t\t\tconst target = event.target as Element | null;\n\t\t\tif (!target) return;\n\t\t\tconst rect = target.getBoundingClientRect();\n\n\t\t\tif (\n\t\t\t\trect.left > event.clientX ||\n\t\t\t\trect.right < event.clientX ||\n\t\t\t\trect.top > event.clientY ||\n\t\t\t\trect.bottom < event.clientY\n\t\t\t) {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t});\n\n\t\tparentElement.appendChild(this.dialog);\n\t}\n\n\t/**\n\t * Open the modal dialog.\n\t */\n\tpublic open() {\n\t\tthis.dialog?.showModal();\n\t}\n\n\t/**\n\t * Close the modal dialog.\n\t */\n\tpublic close() {\n\t\tthis.dialog?.close();\n\t}\n\n\t/**\n\t * Create segment buttons element for the dialog.\n\t * @param options options for creating segment buttons\n\t * @param defaultValue default value for the segment buttons\n\t * @param onClick a callback function to handle click events on the segment buttons\n\t * @example\n\t * ```ts\n\t * const segmentButtons = createSegmentButtons(\n\t *   [{ value: 'option1', label: 'Option 1' }, { value: 'option2', label: 'Option 2' }],\n\t *   'option1',\n\t *   (value) => console.log(`Selected: ${value}`)\n\t * );\n\t * document.body.appendChild(segmentButtons);\n\t * ```\n\t * @returns\n\t */\n\tpublic createSegmentButtons(\n\t\toptions: { value: string; label: string }[],\n\t\tdefaultValue: string,\n\t\tonClick: (value: string) => void = () => {}\n\t): HTMLDivElement {\n\t\tconst segmentButtons = document.createElement('div');\n\t\tsegmentButtons.classList.add('segment-buttons');\n\n\t\toptions.forEach((option) => {\n\t\t\tconst button = document.createElement('button');\n\t\t\tbutton.type = 'button';\n\t\t\tbutton.classList.add('segment-button');\n\t\t\tbutton.value = option.value;\n\t\t\tbutton.textContent = option.label;\n\n\t\t\tif (option.value === defaultValue) {\n\t\t\t\tbutton.classList.add('active');\n\t\t\t}\n\n\t\t\tbutton.addEventListener('click', () => {\n\t\t\t\tsegmentButtons\n\t\t\t\t\t.querySelectorAll('.segment-button')\n\t\t\t\t\t.forEach((btn) => btn.classList.remove('active'));\n\t\t\t\tbutton.classList.add('active');\n\t\t\t\tonClick(button.value);\n\t\t\t});\n\n\t\t\tsegmentButtons.appendChild(button);\n\t\t});\n\n\t\treturn segmentButtons;\n\t}\n}\n","import type { TerrainSource } from '../interfaces';\nimport type { GeoJSONStoreFeatures } from 'terra-draw';\nimport { Map, type LngLatLike } from 'maplibre-gl';\n\n/**\n * query elevation by point feature.\n * @param feature point geojson feature\n * @param map Maplibre map instance\n * @param computeElevation compute elevation or not\n * @param terrainSource terrain source for computing elevation from raster DEM. If terrainSource is undefined, going to to query elevation from maplibre terrain.\n * @returns geojson feature after computing\n */\nexport const queryElevationByPoint = (\n\tfeature: GeoJSONStoreFeatures,\n\tmap?: Map,\n\tcomputeElevation?: boolean,\n\tterrainSource?: TerrainSource\n) => {\n\tif (feature.geometry.type !== 'Point') return feature;\n\n\tconst coordinates: number[] = (feature as GeoJSONStoreFeatures).geometry.coordinates as number[];\n\n\tif (computeElevation === true && terrainSource === undefined) {\n\t\tconst elevation = map?.queryTerrainElevation(coordinates as LngLatLike);\n\t\tif (elevation) {\n\t\t\tfeature.properties.elevation = elevation;\n\t\t}\n\t}\n\treturn feature;\n};\n","var b = Object.defineProperty;\nvar T = (t, e, r) => e in t ? b(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r;\nvar d = (t, e, r) => T(t, typeof e != \"symbol\" ? e + \"\" : e, r);\nvar v = 2 * Math.PI * 6378137 / 2;\nfunction E(t) {\n  return t = t || 256, 2 * Math.PI * 6378137 / t;\n}\nfunction y(t, e, r = { enable: !0, decimal: 1 }) {\n  t = x(t);\n  var n = t[0], i = t[1], o = n * v / 180, a = Math.log(Math.tan((90 + i) * Math.PI / 360)) / (Math.PI / 180);\n  return a = a * v / 180, r.enable && (o = Number(o.toFixed(r.decimal)), a = Number(a.toFixed(r.decimal))), [o, a];\n}\nfunction I(t, e, r) {\n  var n = t[0], i = t[1], o = R(e, r), a = (n + v) / o, s = (i + v) / o;\n  return [a, s, e];\n}\nfunction g(t, e, r) {\n  t = x(t);\n  var n = y(t), i = I(n, e);\n  return F(i);\n}\nfunction z(t, e, r) {\n  if (t = x(t), e === 0)\n    return [0, 0, 0];\n  var n = g(t, e);\n  return L(n);\n}\nfunction F(t, e, r) {\n  e = e || 256;\n  var n = t[0], i = t[1], o = t[2];\n  if (o === 0) return [0, 0, 0];\n  p(o);\n  var a = Math.ceil(n / e) - 1, s = Math.ceil(i / e) - 1;\n  return a < 0 && (a = 0), s < 0 && (s = 0), [a, s, o];\n}\nfunction L(t, e) {\n  q(t);\n  var r = t[0], n = t[1], i = t[2];\n  if (i === 0)\n    return [0, 0, 0];\n  var o = r, a = Math.pow(2, i) - 1 - n;\n  return [o, a, i];\n}\nfunction q(t, e) {\n  var r = t[0], n = t[1], i = t[2];\n  if (i == null) throw new Error(\"<zoom> is required\");\n  if (r == null) throw new Error(\"<x> is required\");\n  if (n == null) throw new Error(\"<y> is required\");\n  return i = p(i), t = B(t), t;\n}\nfunction B(t) {\n  var e = t[0], r = t[1], n = t[2], i = Math.pow(2, n);\n  return e = e % i, e < 0 && (e = e + i), [e, r, n];\n}\nfunction p(t) {\n  if (t === !1) return t;\n  if (t == null)\n    throw new Error(\"<zoom> is required\");\n  if (t < 0)\n    throw new Error(\"<zoom> cannot be less than 0\");\n  if (t > 32)\n    throw new Error(\"<zoom> cannot be greater than 32\");\n  return t;\n}\nfunction x(t, e) {\n  var r = V(t[0]), n = U(t[1]);\n  return n > 85 && (n = 85), n < -85 && (n = -85), [r, n];\n}\nfunction R(t, e) {\n  return E(e) / Math.pow(2, t);\n}\nfunction U(t) {\n  if (t == null) throw new Error(\"lat is required\");\n  return (t > 90 || t < -90) && (t = t % 180, t > 90 && (t = -180 + t), t < -90 && (t = 180 + t), t === 0 && (t = 0)), t;\n}\nfunction V(t) {\n  if (t == null) throw new Error(\"lng is required\");\n  return (t > 180 || t < -180) && (t = t % 360, t > 180 && (t = -360 + t), t < -180 && (t = 360 + t), t === 0 && (t = 0)), t;\n}\nclass M {\n  /**\n   * Constructor\n   * @param url URL for terrain RGB raster tilesets\n   * @param tileSize size of tile. 256 or 512\n   * @param tms whether it is Tile Map Service\n   * @param minzoom minzoom for terrain RGB raster tilesets\n   * @param maxzoom maxzoom for terrain RGB raster tilesets\n   * @param tms whether it is Tile Map Service\n   */\n  constructor(e, r, n, i, o) {\n    d(this, \"url\");\n    d(this, \"tileSize\");\n    d(this, \"tms\");\n    d(this, \"minzoom\");\n    d(this, \"maxzoom\");\n    this.url = e, this.tileSize = r, this.tms = o, this.minzoom = n, this.maxzoom = i, this.tms = o;\n  }\n  /**\n   * Get the value from target coordinates and zoom level by using certain formula.\n   * @param lnglat coordinates\n   * @param z  zoom level\n   * @returns the value calculated by certain formula\n   */\n  getValue(e, r) {\n    return new Promise(\n      (n, i) => {\n        const o = e[0], a = e[1];\n        let s = r;\n        r > this.maxzoom ? s = this.maxzoom : r < this.minzoom && (s = this.minzoom);\n        const u = this.tms ? g([o, a], s) : z([o, a], s), h = this.url.replace(/{x}/g, u[0].toString()).replace(/{y}/g, u[1].toString()).replace(/{z}/g, u[2].toString());\n        let c = this.getUrlExtension(h);\n        switch (c || (c = \"png\"), c) {\n          case \"png\":\n          case \"webp\":\n            this.getValueFromRaster(h, u, o, a).then((f) => {\n              n(f);\n            });\n            break;\n          default:\n            i(new Error(`Invalid file extension: ${c}`));\n            break;\n        }\n      }\n    );\n  }\n  /**\n   * Get the value calculated from coordinates on WEBP raster tileset\n   * @param url tile URL\n   * @param tile tile index info\n   * @param lng longitude\n   * @param lat latitude\n   * @returns the value calculated from coordinates. If tile does not exist returns undefined\n   */\n  async getValueFromRaster(e, r, n, i) {\n    const o = await fetch(e);\n    if (!o.ok) {\n      if (o.status === 404)\n        return;\n      throw new Error(`Failed to fetch tile: ${o.statusText}`);\n    }\n    const a = await o.blob();\n    return new Promise((s, u) => {\n      const h = new Image();\n      h.onload = () => {\n        const c = document.createElement(\"canvas\");\n        c.width = h.width, c.height = h.height;\n        const f = c.getContext(\"2d\");\n        if (!f) return u(new Error(\"Failed to create canvas context\"));\n        f.drawImage(h, 0, 0);\n        const w = f.getImageData(0, 0, h.width, h.height).data, l = this.pixels2rgba(new Uint8Array(w), r, n, i), m = this.calc(l[0], l[1], l[2], l[3]);\n        s(m);\n      }, h.onerror = () => s(void 0), h.src = URL.createObjectURL(a);\n    });\n  }\n  /**\n   * Get RGBA values from coordinates information\n   * @param pixels pixels info\n   * @param tile tile index info\n   * @param lng longitude\n   * @param lat latitude\n   * @returns RGBA values\n   */\n  pixels2rgba(e, r, n, i) {\n    const o = [];\n    for (let c = 0; c < e.length; c += 4) {\n      const f = e[c], w = e[c + 1], l = e[c + 2], m = e[c + 3], P = [f, w, l, m];\n      o.push(P);\n    }\n    const a = this.tileToBBOX(r), s = this.getPixelPosition(n, i, a), u = s[0] + s[1] * this.tileSize;\n    return o[u];\n  }\n  /**\n   * Get the position in pixel from the coordinates\n   * @param lng longitude\n   * @param lat latitude\n   * @param bbox bbox (minx, miny, maxx, maxy)\n   * @returns The position in pixel\n   */\n  getPixelPosition(e, r, n) {\n    const i = this.tileSize, o = this.tileSize, a = n[2] - n[0], s = n[3] - n[1], u = (e - n[0]) / a, h = (r - n[1]) / s, c = Math.floor(i * u), f = Math.floor(o * (1 - h));\n    return [c, f];\n  }\n  /**\n   * Get file extenstion name from the URL\n   * @param url URL for tilesets\n   * @returns file extenstion either png or webp\n   */\n  getUrlExtension(e) {\n    let r = e.split(/[#?]/)[0].split(\".\").pop();\n    return r && (r = r.trim()), r;\n  }\n  /**\n   * Get the bbox of a tile\n   * @param {Array<number>} tile\n   * @returns {Array<number>} bbox\n   * @example\n   * var bbox = tileToBBOX([5, 10, 10])\n   * //=bbox\n   */\n  tileToBBOX(e) {\n    const r = this.tile2lon(e[0] + 1, e[2]), n = this.tile2lon(e[0], e[2]), i = this.tile2lat(e[1] + 1, e[2]), o = this.tile2lat(e[1], e[2]);\n    return [n, i, r, o];\n  }\n  tile2lon(e, r) {\n    return e / Math.pow(2, r) * 360 - 180;\n  }\n  tile2lat(e, r) {\n    const n = 180 / Math.PI, i = Math.PI - 2 * Math.PI * e / Math.pow(2, r);\n    return n * Math.atan(0.5 * (Math.exp(i) - Math.exp(-i)));\n  }\n}\nclass k extends M {\n  /**\n   * Constructor\n   * @param url URL for terrain RGB raster tilesets\n   * @param tileSize size of tile. 256 or 512\n   * @param tms whether it is Tile Map Service\n   * @param minzoom minzoom for terrain RGB raster tilesets. default is 5\n   * @param maxzoom maxzoom for terrain RGB raster tilesets. default is 15\n   */\n  constructor(e, r, n = 5, i = 15, o = !1) {\n    super(e, r, n, i, o);\n  }\n  /**\n   * Get an altitude calculated from terrain RGB information\n   * @param lnglat coordinates\n   * @param z zoom level\n   * @returns an altitude calculated from terrain RGB information\n   */\n  async getElevation(e, r) {\n    return await this.getValue(e, r);\n  }\n  /**\n   * Formula for calculating an elevation from RGB\n   * @param r red\n   * @param g green\n   * @param b blue\n   * @returns an elevation calculated\n   */\n  calc(e, r, n) {\n    return -1e4 + (e * 256 * 256 + r * 256 + n) * 0.1;\n  }\n}\nclass G extends M {\n  /**\n   * Constructor\n   * @param url URL for terrarium raster tilesets\n   * @param tileSize size of tile. 256 or 512\n   * @param tms whether it is Tile Map Service\n   * @param minzoom minzoom for terrain RGB raster tilesets. default is 5\n   * @param maxzoom maxzoom for terrain RGB raster tilesets. default is 15\n   */\n  constructor(e, r, n = 5, i = 15, o = !1) {\n    super(e, r, n, i, o);\n  }\n  /**\n   * Get an altitude calculated from terrain RGB information\n   * @param lnglat coordinates\n   * @param z zoom level\n   * @returns an altitude calculated from terrain RGB information\n   */\n  async getElevation(e, r) {\n    return await this.getValue(e, r);\n  }\n  /**\n   * Formula for calculating an elevation from RGB\n   * https://github.com/tilezen/joerd/blob/master/docs/formats.md#terrarium\n   * @param r red\n   * @param g green\n   * @param b blue\n   * @returns an elevation calculated\n   */\n  calc(e, r, n) {\n    const i = e * 256 + r + n / 256 - 32768;\n    return parseInt(i.toFixed(0));\n  }\n}\nexport {\n  k as TerrainRGB,\n  G as Terrarium\n};\n//# sourceMappingURL=terrain-rgb.es.js.map\n","import type { ElevationCacheConfig, TerrainSource } from '../interfaces';\nimport { TerrainRGB, Terrarium } from '@watergis/terrain-rgb';\nimport type { GeoJSONStoreFeatures } from 'terra-draw';\nimport { MemoryCache, type CacheInterface } from './memoryCache';\n\n/**\n * Convert coordinates to string key\n */\nconst coordinateToKey = (coordinates: number[], precision = 8): string => {\n\tconst [lng, lat] = coordinates;\n\tconst factor = Math.pow(10, precision);\n\tconst roundedLng = Math.round(lng * factor) / factor;\n\tconst roundedLat = Math.round(lat * factor) / factor;\n\treturn `${roundedLng},${roundedLat}`;\n};\n\n/**\n * Query elvation for point features from Raster DEM\n * @param points Point GeoJSON features\n * @returns points features after adding elevation property\n */\nexport const queryElevationFromRasterDEM = async (\n\tpoints: GeoJSONStoreFeatures[],\n\tterrainDource?: TerrainSource,\n\tcacheConfig?: ElevationCacheConfig,\n\tcacheInstance?: CacheInterface<number>\n) => {\n\tconst promises: Promise<GeoJSONStoreFeatures>[] = [];\n\n\t// Default values for cache configuration\n\tconst config: ElevationCacheConfig = {\n\t\tenabled: true,\n\t\tmaxSize: 1000,\n\t\tttl: 60 * 60 * 1000, // 1 hour\n\t\tprecision: 6,\n\t\t...cacheConfig\n\t};\n\n\t// Initialize cache instance\n\tlet cache: CacheInterface<number> | undefined;\n\tif (config.enabled) {\n\t\tcache = cacheInstance || new MemoryCache<number>(config.maxSize, config.ttl);\n\t}\n\n\tlet terrainInstance: TerrainRGB | Terrarium | undefined = undefined;\n\tlet maxzoom = 15;\n\tif (terrainDource) {\n\t\tconst url = terrainDource.url;\n\t\tconst encoding = terrainDource.encoding ?? 'mapbox';\n\t\tconst tileSize = terrainDource.tileSize ?? 512;\n\t\tconst minzoom = terrainDource.minzoom ?? 5;\n\t\tmaxzoom = terrainDource.maxzoom ?? 15;\n\t\tconst tms = terrainDource.tms ?? false;\n\t\tterrainInstance =\n\t\t\tencoding === 'mapbox'\n\t\t\t\t? new TerrainRGB(url, tileSize, minzoom, maxzoom, tms)\n\t\t\t\t: new Terrarium(url, tileSize, minzoom, maxzoom, tms);\n\t}\n\n\tfor (const point of points) {\n\t\tpromises.push(\n\t\t\tnew Promise((resolve: (feature: GeoJSONStoreFeatures) => void) => {\n\t\t\t\tif (point.geometry.type !== 'Point') resolve(point);\n\n\t\t\t\tconst coordinates = point.geometry.coordinates as number[];\n\t\t\t\tconst cacheKey = coordinateToKey(coordinates, config.precision);\n\t\t\t\tif (cache) {\n\t\t\t\t\tconst cachedElevation = cache.get(cacheKey);\n\t\t\t\t\tif (cachedElevation !== undefined) {\n\t\t\t\t\t\tif (!isNaN(cachedElevation)) {\n\t\t\t\t\t\t\tpoint.properties.elevation = cachedElevation;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(point);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (terrainInstance) {\n\t\t\t\t\tterrainInstance\n\t\t\t\t\t\t.getElevation(point.geometry.coordinates as number[], maxzoom)\n\t\t\t\t\t\t.then((elevation) => {\n\t\t\t\t\t\t\tif (elevation !== undefined && elevation !== null && typeof elevation === 'number') {\n\t\t\t\t\t\t\t\tif (cache) {\n\t\t\t\t\t\t\t\t\tcache.set(cacheKey, elevation);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tpoint.properties.elevation = elevation;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresolve(point);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\tif (cache && cache.has(cacheKey)) {\n\t\t\t\t\t\t\t\tcache.delete(cacheKey);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresolve(point);\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tresolve(point);\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\treturn await Promise.all(promises);\n};\n","import type { GeoJSONStoreFeatures } from 'terra-draw';\nimport type { Position } from 'geojson';\n\n/**\n * Round coordinates to given coordinate precision\n *\n * If you want to add geojson with excessive coordinate precision to TerraDraw by using addFeatures,\n * TerraDraw raise a validation error if you add GeoJSON with excessive precision.\n *\n * use this function to make sure geojson coordinates to meet terradraw setting before adding features.\n *\n * The below is a sample usage of the function\n *\n * ```js\n * const drawControl = new MaplibreTerraDrawControl({\n *   adapterOptions: {\n *     coordinatePrecision: 6\n *   }\n * })\n * map.addControl(drawControl)\n *\n * map.once('load', ()=>{\n *   const features = [] // add your geojson features here\n *   const draw = drawControl.getTerradrawInstance()\n *   draw.addFeatures(roundFeatureCoordinates(features), 6)\n * })\n * ```\n * @param features GeoJSON feature\n * @param decimalPlaces decimal places to 9 (default of terradraw)\n * @returns GeoJSON feature after rounding coordinates\n */\nexport const roundFeatureCoordinates = (\n\tfeatures: GeoJSONStoreFeatures[],\n\tdecimalPlaces: number = 9\n) => {\n\t// Helper function to round a single coordinate\n\tfunction roundCoord(coord: Position) {\n\t\treturn [Number(coord[0].toFixed(decimalPlaces)), Number(coord[1].toFixed(decimalPlaces))];\n\t}\n\n\t// Process coordinates based on geometry type\n\tfunction processGeometry(geometry: GeoJSONStoreFeatures['geometry']) {\n\t\tconst type = geometry.type as\n\t\t\t| 'Polygon'\n\t\t\t| 'LineString'\n\t\t\t| 'Point'\n\t\t\t| 'MultiPoint'\n\t\t\t| 'MultiLineString'\n\t\t\t| 'MultiPolygon';\n\t\tlet coordinates = geometry.coordinates as Position | Position[] | Position[][] | Position[][][];\n\n\t\tswitch (type) {\n\t\t\tcase 'Point':\n\t\t\t\tcoordinates = roundCoord(coordinates as [number, number]);\n\t\t\t\tbreak;\n\t\t\tcase 'LineString':\n\t\t\tcase 'MultiPoint':\n\t\t\t\tcoordinates = (coordinates as Position[]).map(roundCoord);\n\t\t\t\tbreak;\n\t\t\tcase 'Polygon':\n\t\t\tcase 'MultiLineString':\n\t\t\t\tcoordinates = (coordinates as Position[][]).map((ring: Position[]) => ring.map(roundCoord));\n\t\t\t\tbreak;\n\t\t\tcase 'MultiPolygon':\n\t\t\t\tcoordinates = (coordinates as unknown as Position[][][]).map((polygon: Position[][]) =>\n\t\t\t\t\tpolygon.map((ring: Position[]) => ring.map(roundCoord))\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn {\n\t\t\t...geometry,\n\t\t\tcoordinates: coordinates\n\t\t};\n\t}\n\n\t// Process each feature\n\treturn features.map((feature) => ({\n\t\t...feature,\n\t\tgeometry: processGeometry(feature.geometry) as GeoJSONStoreFeatures['geometry']\n\t}));\n};\n","import type { GeoJSONStoreFeatures } from 'terra-draw';\nimport type { costingModelType } from './valhallaRouting';\n\n/**\n * Contour type options\n */\nexport const contourTypeOptions = [\n\t{ value: 'time', label: 'Time' },\n\t{ value: 'distance', label: 'Distance' }\n] as const;\n\n/**\n * ContourType definition either time or distance\n */\nexport type ContourType = (typeof contourTypeOptions)[number]['value'];\n\n/**\n * Contour definition.\n * When it is passing to valhalla, both time and distance cannot be passed.\n * If time exists, valhalla compute time isochrone.\n * If distance exists, valhalla compute distance isochrone.\n * If both parameters are passed to API, it throws error.\n */\nexport interface Contour {\n\t/**\n\t * Time in minutes\n\t */\n\ttime?: number;\n\t/**\n\t * Distance in kilometers\n\t */\n\tdistance?: number;\n\t/**\n\t * HEX color with hash (#). However, hash needs to be eliminated when it is passed to valhalla API.\n\t */\n\tcolor: string;\n}\n\n/**\n * Valhalla Isochrone engine class\n */\nexport class ValhallaIsochrone {\n\tprivate url: string;\n\n\t/**\n\t * Constructor\n\t * @param url URL for terrain RGB raster tilesets\n\t */\n\tconstructor(url: string) {\n\t\tthis.url = url;\n\t}\n\n\t/**\n\t * Calculate isochrone by given parameters from Valhalla API\n\t * @param lon Longitude\n\t * @param lat Latitude\n\t * @param contourType the type of contour either time or distance\n\t * @param costingModel costing model either auto, bicycle or pedestrian\n\t * @param contours Optional. the list of contour. If skipped, default value is used.\n\t * @returns GeoJSON Feature Collection object\n\t */\n\tpublic async calcIsochrone(\n\t\tlon: number,\n\t\tlat: number,\n\t\tcontourType: ContourType,\n\t\tcostingModel: costingModelType,\n\t\tcontours: Contour[]\n\t) {\n\t\tconst contourList: Contour[] = JSON.parse(JSON.stringify(contours));\n\t\tcontourList.forEach((c) => {\n\t\t\tif (contourType === 'time') {\n\t\t\t\tdelete c.distance;\n\t\t\t} else {\n\t\t\t\tdelete c.time;\n\t\t\t}\n\t\t});\n\n\t\t// http://localhost:8002/isochrone?json={%22locations%22:[{%22lat%22:-1.946357,%22lon%22:30.059753}],%22costing%22:%22pedestrian%22,%22contours%22:[{%22time%22:15,%22color%22:%22ff0000%22},{%22time%22:30,%22color%22:%22ffff00%22},{%22time%22:60,%22color%22:%220000ff%22}]}\n\t\tconst jsonOption = {\n\t\t\tlocations: [{ lat, lon }],\n\t\t\tcosting: costingModel,\n\t\t\tcontours: contourList.map((c) => {\n\t\t\t\tc.color = c.color.replace('#', '');\n\t\t\t\treturn c;\n\t\t\t}),\n\t\t\tpolygons: true\n\t\t};\n\t\tconst url = `${this.url}/isochrone?json=${JSON.stringify(jsonOption)}`;\n\n\t\tconst res = await fetch(url);\n\t\tconst geojson = await res.json();\n\t\treturn geojson as { type: 'FeatureCollection'; features: GeoJSONStoreFeatures[] };\n\t}\n}\n","import { GeoJSONFeature, LngLat } from 'maplibre-gl';\n\n/**\n * ValhallaTripSummary interface for the summary of the trip.\n */\nexport interface ValhallaTripSummary {\n\thas_time_restrictions: boolean;\n\tmin_lat: number;\n\tmin_lon: number;\n\tmax_lat: number;\n\tmax_lon: number;\n\ttime: number;\n\tlength: number;\n\tcost: number;\n}\n\n/**\n * ValhallaRoutingLocation interface for the locations in the trip.\n */\nexport interface ValhallaRoutingLocation {\n\ttype: string;\n\tlat: number;\n\tlon: number;\n\tcity: string;\n\toriginal_index: number;\n}\n\n/**\n * ValhallaRoutingLeg interface for the legs of the trip.\n */\nexport interface ValhallaRoutingLeg {\n\tmaneuvers: {\n\t\ttype: number;\n\t\tinstruction: string;\n\t\tverbal_pre_transition_instruction: string;\n\t\tverbal_post_transition_instruction: string;\n\t\ttime: number;\n\t\tlength: number;\n\t\tcost: number;\n\t\tbegin_shape_index: number;\n\t\tend_shape_index: number;\n\t\trough: boolean;\n\t\ttravel_mode: string;\n\t\ttravel_type: string;\n\t}[];\n\tsummary: ValhallaTripSummary;\n\tshape: string;\n}\n\n/**\n * ValhallaTripResult interface for the response from Valhalla routing API.\n */\nexport interface ValhallaTripResult {\n\ttrip: {\n\t\tlocations: ValhallaRoutingLocation[];\n\t\tlegs: ValhallaRoutingLeg[];\n\t\tsummary: ValhallaTripSummary;\n\t\tstatus_message: string;\n\t\tstatus: number;\n\t\tunits: string;\n\t\tlanguage: string;\n\t};\n\tid: string;\n}\n\n/**\n * ValhallaError interface for error response from Valhalla API.\n */\nexport interface ValhallaError {\n\terror: string;\n\terror_code: number;\n\tstatus: string;\n\tstatus_code: number;\n}\n\n/**\n * Options of means of transport for Valhalla routing API.\n */\nexport const costingModelOptions = [\n\t{ value: 'pedestrian', label: 'Pedestrian' },\n\t{ value: 'bicycle', label: 'Bicycle' },\n\t{ value: 'auto', label: 'Car' }\n] as const;\n\n/**\n * costingModelType is the type for means of transport in Valhalla routing API.\n */\nexport type costingModelType = (typeof costingModelOptions)[number]['value'];\n\n/**\n * Options of distance unit for Valhalla routing API.\n */\nexport const routingDistanceUnitOptions = [\n\t{ value: 'kilometers', label: 'km' },\n\t{ value: 'miles', label: 'mile' }\n] as const;\n\n/**\n * routingDistanceUnitType is the type for distance unit in Valhalla routing API.\n */\nexport type routingDistanceUnitType = (typeof routingDistanceUnitOptions)[number]['value'];\n\n/**\n * Valhalla routing API class\n */\nexport class ValhallaRouting {\n\tprivate tripData: LngLat[] = [];\n\n\t/**\n\t * get the raw trip data from the valhalla routing API.\n\t * @returns tripData\n\t */\n\tpublic getTripData(): LngLat[] {\n\t\treturn this.tripData;\n\t}\n\n\t/**\n\t * Valhalla API URL\n\t */\n\tprivate url: string;\n\n\t/**\n\t * Trip summary from routing API.\n\t */\n\tprivate tripSummary: ValhallaTripSummary | undefined;\n\n\t/**\n\t * Get the trip summary from the routing API.\n\t * @returns tripSummary\n\t */\n\tpublic getTripSummary(): ValhallaTripSummary | undefined {\n\t\treturn this.tripSummary;\n\t}\n\n\t/**\n\t * Constructor\n\t * @param url URL for terrain RGB raster tilesets\n\t */\n\tconstructor(url: string) {\n\t\tthis.url = url;\n\t}\n\n\t/**\n\t * Clear the trip data and summary.\n\t */\n\tpublic clearFeatures() {\n\t\tthis.tripData = [];\n\t\tthis.tripSummary = undefined;\n\t}\n\n\t/**\n\t * Calculate the route using Valhalla routing API.\n\t * @param tripData array of LngLat coordinates for the trip\n\t * @param costingModel means of transport for Valhalla routing API.\n\t * @param distanceUnit distance unit for Valhalla routing API.\n\t * @returns returns a feature with LineString geometry and point features for the trip data\n\t * @throws Error if the trip data is invalid or if the Valhalla API returns\n\t */\n\tpublic async calcRoute(\n\t\ttripData: LngLat[],\n\t\tcostingModel: costingModelType,\n\t\tdistanceUnit: routingDistanceUnitType\n\t) {\n\t\tthis.tripData = tripData;\n\t\tif (!this.tripData || (this.tripData && this.tripData.length < 2)) {\n\t\t\tthis.tripSummary = undefined;\n\t\t\treturn;\n\t\t}\n\t\t// errorMessage = '';\n\t\tconst baseAPI = `${this.url}/route`;\n\t\tconst params = {\n\t\t\tlocations: this.tripData.map((pt) => {\n\t\t\t\treturn { lon: pt.lng, lat: pt.lat };\n\t\t\t}),\n\t\t\tcosting: costingModel,\n\t\t\tcosting_options: { auto: { country_crossing_penalty: 2000.0 } },\n\t\t\tunits: distanceUnit,\n\t\t\tid: 'my_work_route'\n\t\t};\n\t\tconst apiUrl = `${baseAPI}?json=${JSON.stringify(params)}`;\n\n\t\tconst res = await fetch(apiUrl);\n\t\tconst json: ValhallaTripResult | ValhallaError = await res.json();\n\t\tif ('error' in json) {\n\t\t\tthis.tripData.pop(); //remove the last coordinates which cause error\n\t\t\tthrow new Error(`${json.status} (${json.status_code}): ${json.error} (${json.error_code})`);\n\t\t}\n\t\tconst shapes = json.trip.legs.map((s) => this.decodeShape(s.shape));\n\t\tlet shape: number[][] = [];\n\t\tshapes.forEach((shp) => {\n\t\t\tshape = [...shape, ...shp];\n\t\t});\n\t\tthis.tripSummary = json.trip.summary;\n\t\tthis.tripSummary.length = Number(this.tripSummary.length.toFixed(2));\n\t\tthis.tripSummary.time = Number((this.tripSummary.time / 60).toFixed());\n\n\t\tconst combinedShape: number[][] = [];\n\t\tlet sumLength = 0;\n\t\tlet sumTime = 0;\n\t\tconst combinedManeuvers: ValhallaRoutingLeg['maneuvers'] = [];\n\n\t\tconst pointFeatures = this.geoPoint(this.tripData.map((pt) => [pt.lng, pt.lat]));\n\n\t\tjson.trip.legs.forEach((leg, index) => {\n\t\t\tconst shape = this.decodeShape(leg.shape);\n\t\t\tcombinedShape.push(...shape);\n\t\t\tsumLength += Number(leg.summary.length.toFixed(2));\n\t\t\tsumTime += Number((leg.summary.time / 60).toFixed());\n\t\t\tcombinedManeuvers.push(...leg.maneuvers);\n\n\t\t\tconst pointFeature = pointFeatures.features[index + 1];\n\t\t\tpointFeature.properties = {\n\t\t\t\t...pointFeature.properties,\n\t\t\t\tdistance: sumLength,\n\t\t\t\tdistance_unit: distanceUnit === 'kilometers' ? 'km' : 'mi',\n\t\t\t\ttime: sumTime,\n\t\t\t\tmaneuvers: leg.maneuvers\n\t\t\t};\n\t\t});\n\n\t\tconst transportLabel = costingModelOptions.find((opt) => opt.value === costingModel)\n\t\t\t?.label as string;\n\n\t\tconst feature = this.geoLineString(combinedShape, {\n\t\t\tcostingModel: transportLabel,\n\t\t\tdistance: sumLength,\n\t\t\tdistance_unit: distanceUnit === 'kilometers' ? 'km' : 'mi',\n\t\t\ttime: sumTime,\n\t\t\tmaneuvers: combinedManeuvers as unknown as string\n\t\t});\n\n\t\tconst firstFeature = pointFeatures.features[0];\n\t\tfirstFeature.properties = {\n\t\t\t...firstFeature.properties,\n\t\t\tcostingModel: transportLabel\n\t\t};\n\t\treturn { feature, pointFeatures };\n\t}\n\n\t/**\n\t * create a GeoJSON Feature with LineString geometry.\n\t * @param coordinates array of coordinates\n\t * @param props properties to set for the feature\n\t * @returns GeoJSON Feature with LineString geometry\n\t */\n\tprivate geoLineString(\n\t\tcoordinates: number[][] = [],\n\t\tprops: { [key: string]: string | number } = {}\n\t): GeoJSONFeature {\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\treturn {\n\t\t\ttype: 'Feature',\n\t\t\tproperties: props,\n\t\t\tgeometry: {\n\t\t\t\ttype: 'LineString',\n\t\t\t\tcoordinates\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Create a GeoJSON FeatureCollection with Point features.\n\t * @param coordinates array of coordinates\n\t * @returns GeoJSON FeatureCollection\n\t */\n\tprivate geoPoint(coordinates: number[][] = []) {\n\t\treturn {\n\t\t\ttype: 'FeatureCollection',\n\t\t\tfeatures: coordinates.map((c, i) => {\n\t\t\t\tlet text = (i + 1).toString();\n\t\t\t\tif (i === 0) {\n\t\t\t\t\ttext = 'Start';\n\t\t\t\t} else if (i === coordinates.length - 1) {\n\t\t\t\t\ttext = 'Goal';\n\t\t\t\t} else {\n\t\t\t\t\ttext = `No.${text}`;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'Feature',\n\t\t\t\t\tid: `node-${i}`,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tsequence: i,\n\t\t\t\t\t\ttext\n\t\t\t\t\t},\n\t\t\t\t\tgeometry: {\n\t\t\t\t\t\ttype: 'Point',\n\t\t\t\t\t\tcoordinates: c\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}) as unknown as GeoJSONFeature[]\n\t\t};\n\t}\n\n\t/**\n\t * decode a shape string from Valhalla routing API to convert it to an array of coordinates.\n\t * @param value encoded shape object from Valhalla routing API\n\t * @param precision coordinate precision, default is 6\n\t * @returns the list of coordinates as [lng, lat] pairs\n\t */\n\tprivate decodeShape(value: string, precision = 6) {\n\t\tlet index = 0,\n\t\t\tlat = 0,\n\t\t\tlng = 0,\n\t\t\t// eslint-disable-next-line prefer-const\n\t\t\tcoordinates: number[][] = [],\n\t\t\tshift = 0,\n\t\t\tresult = 0,\n\t\t\tbyte = null,\n\t\t\tlatitude_change,\n\t\t\tlongitude_change,\n\t\t\t// eslint-disable-next-line prefer-const\n\t\t\tfactor = Math.pow(10, precision || 6);\n\n\t\t// Coordinates have variable length when encoded, so just keep\n\t\t// track of whether we've hit the end of the string. In each\n\t\t// loop iteration, a single coordinate is decoded.\n\t\twhile (index < value.length) {\n\t\t\t// Reset shift, result, and byte\n\t\t\tbyte = null;\n\t\t\tshift = 0;\n\t\t\tresult = 0;\n\n\t\t\tdo {\n\t\t\t\tbyte = value.charCodeAt(index++) - 63;\n\t\t\t\tresult |= (byte & 0x1f) << shift;\n\t\t\t\tshift += 5;\n\t\t\t} while (byte >= 0x20);\n\n\t\t\tlatitude_change = result & 1 ? ~(result >> 1) : result >> 1;\n\n\t\t\tshift = result = 0;\n\n\t\t\tdo {\n\t\t\t\tbyte = value.charCodeAt(index++) - 63;\n\t\t\t\tresult |= (byte & 0x1f) << shift;\n\t\t\t\tshift += 5;\n\t\t\t} while (byte >= 0x20);\n\n\t\t\tlongitude_change = result & 1 ? ~(result >> 1) : result >> 1;\n\n\t\t\tlat += latitude_change;\n\t\t\tlng += longitude_change;\n\n\t\t\tcoordinates.push([lng / factor, lat / factor]);\n\t\t}\n\n\t\treturn coordinates;\n\t}\n}\n","import type {\n\tControlPosition,\n\tGeoJSONSource,\n\tGeoJSONSourceSpecification,\n\tIControl,\n\tMap,\n\tStyleSpecification\n} from 'maplibre-gl';\nimport { TerraDraw, TerraDrawExtend, TerraDrawRenderMode } from 'terra-draw';\nimport { TerraDrawMapLibreGLAdapter } from 'terra-draw-maplibre-gl-adapter';\nimport type {\n\tTerradrawControlOptions,\n\tEventType,\n\tTerradrawMode,\n\tTerradrawModeClass,\n\tEventArgs\n} from '../interfaces';\nimport { defaultControlOptions, getDefaultModeOptions } from '../constants';\nimport { capitalize, cleanMaplibreStyle, TERRADRAW_SOURCE_IDS } from '../helpers';\n\n/**\n * Maplibre GL Terra Draw Control\n */\nexport class MaplibreTerradrawControl implements IControl {\n\tprotected controlContainer?: HTMLElement;\n\tprotected map?: Map;\n\tprotected modeButtons: { [key: string]: HTMLButtonElement } = {};\n\tprotected _isExpanded = false;\n\tprotected _cssPrefix = '';\n\n\t/**\n\t * get the state of whether the control is expanded or collapsed\n\t */\n\tpublic get isExpanded(): boolean {\n\t\treturn this._isExpanded;\n\t}\n\n\t/**\n\t * CSS prefix for the control buttons.\n\t * Default is empty string\n\t */\n\tprotected get cssPrefix(): string {\n\t\treturn this._cssPrefix;\n\t}\n\n\t/**\n\t * set the state of the control either expanded or collapsed.\n\t * terradraw mode will be reset if the state is changed.\n\t * either `expanded` or `collapsed` event is dispatched when changed\n\t */\n\tpublic set isExpanded(value: boolean) {\n\t\tthis._isExpanded = value;\n\t\tconst controls = document.getElementsByClassName(\n\t\t\t`maplibregl-terradraw-${this.cssPrefix}add-control`\n\t\t);\n\t\tfor (let i = 0; i < controls.length; i++) {\n\t\t\tconst item = controls.item(i);\n\t\t\tif (!item) continue;\n\t\t\tif (this.isExpanded) {\n\t\t\t\titem.classList.remove('hidden');\n\t\t\t} else {\n\t\t\t\titem.classList.add('hidden');\n\t\t\t}\n\t\t}\n\t\tconst addButton = document.getElementsByClassName(\n\t\t\t`maplibregl-terradraw-${this.cssPrefix}render-button`\n\t\t);\n\t\tif (addButton && addButton.length > 0) {\n\t\t\tif (this.isExpanded) {\n\t\t\t\taddButton.item(0)?.classList.add('enabled');\n\t\t\t} else {\n\t\t\t\taddButton.item(0)?.classList.remove('enabled');\n\t\t\t\tthis.resetActiveMode();\n\t\t\t}\n\t\t}\n\t\tthis.toggleDeleteSelectionButton();\n\t\tthis.toggleButtonsWhenNoFeature();\n\t\tif (this.isExpanded) {\n\t\t\tthis.dispatchEvent('expanded');\n\t\t} else {\n\t\t\tthis.dispatchEvent('collapsed');\n\t\t}\n\t}\n\n\tprotected terradraw?: TerraDraw;\n\tprotected options: TerradrawControlOptions = defaultControlOptions;\n\tprotected events: {\n\t\t[key: string]: [(event: EventArgs) => void];\n\t} = {};\n\n\tprotected defaultMode = 'render';\n\n\t/**\n\t * Constructor\n\t * @param options Plugin control options\n\t */\n\tconstructor(options?: TerradrawControlOptions) {\n\t\tthis.modeButtons = {};\n\n\t\tif (options) {\n\t\t\tthis.options = Object.assign(this.options, options);\n\t\t}\n\t\tconst prefixId = this.options.adapterOptions?.prefixId ?? 'td';\n\t\tif (!this.options.adapterOptions) {\n\t\t\tthis.options.adapterOptions = {};\n\t\t}\n\t\tif (!this.options.adapterOptions?.prefixId) {\n\t\t\tthis.options.adapterOptions.prefixId = prefixId;\n\t\t}\n\t}\n\n\t/**\n\t * Get the default control position\n\t * @returns default control position. Default is 'top-right'\n\t */\n\tpublic getDefaultPosition(): ControlPosition {\n\t\tconst defaultPosition = 'top-right';\n\t\treturn defaultPosition;\n\t}\n\n\t/**\n\t * add the plugin control to maplibre\n\t * @param map Maplibre Map object\n\t * @returns HTML Element\n\t */\n\tpublic onAdd(map: Map): HTMLElement {\n\t\tif (this.options && this.options.modes && this.options.modes.length === 0) {\n\t\t\tthrow new Error('At least a mode must be enabled.');\n\t\t}\n\t\tthis.map = map;\n\n\t\tconst defaultOptions = getDefaultModeOptions();\n\t\tconst modes: TerradrawModeClass[] = [];\n\n\t\tthis.options?.modes?.forEach((m) => {\n\t\t\tif (this.options.modeOptions && this.options.modeOptions[m]) {\n\t\t\t\tconst newOption = this.options.modeOptions[m];\n\n\t\t\t\tif (m === 'select') {\n\t\t\t\t\t// overwrite other select mode settings if new option does not contain.\n\t\t\t\t\tconst defaultOption = defaultOptions[m];\n\t\t\t\t\tif (defaultOption) {\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tconst flags = defaultOption.flags;\n\t\t\t\t\t\tObject.keys(flags).forEach((key) => {\n\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tif (newOption.flags[key]) return;\n\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tnewOption.flags[key] = flags[key];\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmodes.push(newOption);\n\t\t\t} else if (defaultOptions[m]) {\n\t\t\t\tmodes.push(defaultOptions[m]);\n\t\t\t}\n\t\t});\n\n\t\t// sometimes, an error of 'Can not register unless mode is unregistered' is thrown by terradraw,\n\t\t// thus, force reset mode state as unregistered\n\t\tmodes.forEach((m) => {\n\t\t\tif (m.state !== 'unregistered') {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t// @ts-ignore\n\t\t\t\tm._state = 'unregistered';\n\t\t\t}\n\t\t});\n\n\t\t// if no render button is specified, it add hidden render mode\n\t\tif (!this.options?.modes?.includes('render')) {\n\t\t\tmodes.push(\n\t\t\t\tnew TerraDrawRenderMode({\n\t\t\t\t\tmodeName: 'default',\n\t\t\t\t\tstyles: {}\n\t\t\t\t})\n\t\t\t);\n\t\t\tthis.defaultMode = 'default';\n\t\t}\n\n\t\tthis.isExpanded = this.options.open === true;\n\n\t\tthis.terradraw = new TerraDraw({\n\t\t\tadapter: new TerraDrawMapLibreGLAdapter({ map, ...this.options.adapterOptions }),\n\t\t\tmodes: modes\n\t\t});\n\n\t\tif (this.map?.loaded()) {\n\t\t\tthis.terradraw.start();\n\t\t} else {\n\t\t\tthis.map?.once('load', () => {\n\t\t\t\tthis.terradraw?.start();\n\t\t\t});\n\t\t}\n\n\t\tthis.controlContainer = document.createElement('div');\n\t\tthis.controlContainer.classList.add(`maplibregl-ctrl`);\n\t\tthis.controlContainer.classList.add(`maplibregl-ctrl-group`);\n\n\t\tmodes.forEach((m: TerradrawModeClass) => {\n\t\t\tif (m.mode === 'default') return;\n\t\t\tthis.addTerradrawButton(m.mode as TerradrawMode);\n\t\t});\n\n\t\tObject.values(this.modeButtons).forEach((ele) => {\n\t\t\tthis.controlContainer?.appendChild(ele);\n\t\t});\n\n\t\tthis.terradraw?.on('change', this.toggleButtonsWhenNoFeature.bind(this));\n\t\tthis.toggleButtonsWhenNoFeature();\n\t\treturn this.controlContainer;\n\t}\n\n\t/**\n\t * Remove the plugin control from maplibre\n\t * @returns void\n\t */\n\tpublic onRemove(): void {\n\t\tif (!this.controlContainer || !this.controlContainer.parentNode || !this.map) {\n\t\t\treturn;\n\t\t}\n\t\tthis.deactivate();\n\t\tthis.modeButtons = {};\n\t\tthis.terradraw = undefined;\n\t\tthis.map = undefined;\n\t\tthis.controlContainer.parentNode.removeChild(this.controlContainer);\n\t}\n\n\t/**\n\t * Register an event for the plugin\n\t * @param event event type\n\t * @param callback\n\t */\n\tpublic on(event: EventType, callback: (event: EventArgs) => void) {\n\t\tif (!this.events[event]) {\n\t\t\tthis.events[event] = [callback];\n\t\t} else {\n\t\t\tthis.events[event].push(callback);\n\t\t}\n\t}\n\n\t/**\n\t * Unregister an event for the plugin\n\t * @param event event type\n\t * @param callback\n\t * @returns\n\t */\n\tpublic off(event: EventType, callback: (event: EventArgs) => void) {\n\t\tif (!this.events[event]) return;\n\t\tconst index = this.events[event].findIndex((c) => c === callback);\n\t\tif (index !== -1) {\n\t\t\tthis.events[event].splice(index, 1);\n\t\t}\n\t}\n\n\t/**\n\t * Dispatch an event. Pass the current snapshot of features and mode\n\t * @param event event type\n\t * @param args additional arguments\n\t */\n\tprotected dispatchEvent(event: EventType, args?: { [key: string]: unknown }) {\n\t\tif (this.events[event]) {\n\t\t\tthis.events[event].forEach((callback) => {\n\t\t\t\tconst snapshot = this.terradraw?.getSnapshot();\n\t\t\t\tconst currentFeature = snapshot?.filter((f) => f.properties.selected === true);\n\t\t\t\tcallback({\n\t\t\t\t\tfeature: currentFeature,\n\t\t\t\t\tmode: this.terradraw?.getMode() as TerradrawMode,\n\t\t\t\t\t...args\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Activate Terra Draw to start drawing\n\t */\n\tpublic activate() {\n\t\tif (!this.terradraw) return;\n\t\tif (!this.terradraw.enabled) {\n\t\t\tthis.terradraw.start();\n\t\t}\n\t}\n\n\t/**\n\t * Deactivate Terra Draw to stop drawing\n\t */\n\tpublic deactivate() {\n\t\tif (!this.terradraw) return;\n\t\tif (!this.terradraw.enabled) return;\n\t\tthis.resetActiveMode();\n\t\tthis.dispatchEvent('mode-changed');\n\t\tthis.terradraw.stop();\n\t}\n\n\t/**\n\t * Get the Terra Draw instance.\n\t * For the Terra Draw API, please refer to https://terradraw.io/#/api\n\t * @returns Terra Draw instance\n\t */\n\tpublic getTerraDrawInstance() {\n\t\treturn this.terradraw;\n\t}\n\n\t/**\n\t * Toggle editor control\n\t */\n\tprotected toggleEditor() {\n\t\tif (!this.terradraw) return;\n\t\tthis.isExpanded = !this.isExpanded;\n\t}\n\n\t/**\n\t * Reset active mode to back to render mode\n\t */\n\tpublic resetActiveMode() {\n\t\tif (!this.terradraw) return;\n\t\tif (!this.terradraw.enabled) {\n\t\t\tthis.terradraw.start();\n\t\t}\n\t\tconst controls = document.getElementsByClassName(\n\t\t\t`maplibregl-terradraw-${this.cssPrefix}add-control`\n\t\t);\n\t\tfor (let i = 0; i < controls.length; i++) {\n\t\t\tconst item = controls.item(i);\n\t\t\tif (!item) continue;\n\t\t\titem.classList.remove('active');\n\t\t}\n\t\tthis.terradraw?.setMode(this.defaultMode);\n\t}\n\n\t/**\n\t * Add Terra Draw drawing mode button\n\t * @param mode Terra Draw mode name\n\t */\n\tprotected addTerradrawButton(mode: TerradrawMode) {\n\t\tconst btn = document.createElement('button');\n\t\tbtn.type = 'button';\n\t\tthis.modeButtons[mode] = btn;\n\n\t\tif (mode === 'render') {\n\t\t\tbtn.classList.add(`maplibregl-terradraw-${this.cssPrefix}${mode}-button`);\n\n\t\t\tif (this.isExpanded) {\n\t\t\t\tbtn.classList.add('enabled');\n\t\t\t}\n\t\t\tbtn.type = 'button';\n\t\t\tbtn.title = capitalize('expand or collapse drawing tool');\n\t\t\tbtn.addEventListener('click', this.toggleEditor.bind(this));\n\t\t} else {\n\t\t\tbtn.classList.add(`maplibregl-terradraw-${this.cssPrefix}add-control`);\n\n\t\t\tif (!this.isExpanded) {\n\t\t\t\tbtn.classList.add('hidden');\n\t\t\t}\n\t\t\tbtn.title = capitalize(mode.replace(/-/g, ' '));\n\n\t\t\tif (mode === 'delete') {\n\t\t\t\tbtn.classList.add(`maplibregl-terradraw-${this.cssPrefix}${mode}-button`);\n\n\t\t\t\tbtn.addEventListener('click', () => {\n\t\t\t\t\tif (!this.terradraw) return;\n\t\t\t\t\tif (!this.terradraw.enabled) return;\n\n\t\t\t\t\tthis.terradraw.clear();\n\t\t\t\t\tthis.deactivate();\n\t\t\t\t\tthis.toggleDeleteSelectionButton();\n\t\t\t\t\tthis.toggleButtonsWhenNoFeature();\n\t\t\t\t\tthis.dispatchEvent('feature-deleted');\n\t\t\t\t});\n\t\t\t} else if (mode === 'delete-selection') {\n\t\t\t\tbtn.classList.add(`maplibregl-terradraw-${this.cssPrefix}${mode}-button`);\n\t\t\t\tbtn.classList.add(`hidden-delete-selection`);\n\t\t\t\tbtn.addEventListener('click', () => {\n\t\t\t\t\tif (!this.terradraw) return;\n\t\t\t\t\tif (!this.terradraw.enabled) return;\n\n\t\t\t\t\tconst snapshot = this.terradraw?.getSnapshot();\n\t\t\t\t\tconst selected = snapshot.filter((f) => f.properties.selected === true);\n\n\t\t\t\t\tif (selected.length > 0) {\n\t\t\t\t\t\t// if feature is selected, delete only selected feature\n\t\t\t\t\t\tconst ids = selected.map((f) => f.id) as TerraDrawExtend.FeatureId[];\n\n\t\t\t\t\t\tthis.terradraw.removeFeatures(ids);\n\t\t\t\t\t\tfor (const id of ids) {\n\t\t\t\t\t\t\tthis.terradraw.deselectFeature(id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.dispatchEvent('feature-deleted', { deletedIds: ids });\n\t\t\t\t\t}\n\t\t\t\t\tthis.toggleDeleteSelectionButton();\n\t\t\t\t\tthis.toggleButtonsWhenNoFeature();\n\t\t\t\t});\n\t\t\t} else if (mode === 'download') {\n\t\t\t\tbtn.classList.add(`maplibregl-terradraw-${this.cssPrefix}${mode}-button`);\n\t\t\t\tbtn.addEventListener('click', this.handleDownload.bind(this));\n\t\t\t} else {\n\t\t\t\tbtn.classList.add(`maplibregl-terradraw-${this.cssPrefix}add-${mode}-button`);\n\n\t\t\t\tbtn.addEventListener('click', () => {\n\t\t\t\t\tif (!this.terradraw) return;\n\n\t\t\t\t\tconst isActive = btn.classList.contains('active');\n\t\t\t\t\tthis.activate();\n\t\t\t\t\tthis.resetActiveMode();\n\n\t\t\t\t\tif (!isActive) {\n\t\t\t\t\t\tthis.terradraw.setMode(mode);\n\t\t\t\t\t\tbtn.classList.add('active');\n\t\t\t\t\t}\n\t\t\t\t\tthis.dispatchEvent('mode-changed');\n\t\t\t\t\tthis.toggleDeleteSelectionButton();\n\t\t\t\t\tthis.toggleButtonsWhenNoFeature();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * get GeoJSON features\n\t * @param onlySelected If true, returns only selected features. Default is false.\n\t * @returns FeatureCollection in GeoJSON format\n\t */\n\tpublic getFeatures(onlySelected = false) {\n\t\tif (!this.terradraw) return;\n\t\tconst snapshot = this.terradraw?.getSnapshot();\n\t\tconst features = snapshot.filter((f) => f.properties.mode !== 'select');\n\n\t\tconst fc = {\n\t\t\ttype: 'FeatureCollection',\n\t\t\tfeatures: features\n\t\t};\n\t\tif (onlySelected !== true) {\n\t\t\treturn fc;\n\t\t}\n\t\tfc.features = fc.features.filter((f) => f.properties.selected === true);\n\t\treturn fc;\n\t}\n\n\t/**\n\t * clean maplibre style to filter only for terradraw related layers or without them.\n\t * If options are not set, returns original style given to the function.\n\t *\n\t * This can be useful incase users only want to get terradraw related layers or without it.\n\t *\n\t * Usage:\n\t * `cleanStyle(map.getStyle, { excludeTerraDrawLayers: true})`\n\t * `cleanStyle(map.getStyle, { onlyTerraDrawLayers: true})`\n\t *\n\t * @param style maplibre style spec\n\t * @param options.excludeTerraDrawLayers return maplibre style without terradraw layers and sources\n\t * @param options.onlyTerraDrawLayers return maplibre style with only terradraw layers and sources\n\t * @returns\n\t */\n\tpublic cleanStyle(\n\t\tstyle: StyleSpecification,\n\t\toptions?: { excludeTerraDrawLayers?: boolean; onlyTerraDrawLayers?: boolean }\n\t) {\n\t\treturn cleanMaplibreStyle(\n\t\t\tstyle,\n\t\t\toptions,\n\t\t\tTERRADRAW_SOURCE_IDS,\n\t\t\tthis.options.adapterOptions?.prefixId\n\t\t);\n\t}\n\n\t/**\n\t * Download button click event handler\n\t */\n\tprotected handleDownload() {\n\t\tconst fc = this.getFeatures(false);\n\n\t\tconst dataStr = 'data:application/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(fc));\n\t\tconst download = document.createElement('a');\n\t\tdownload.setAttribute('href', dataStr);\n\t\tdownload.setAttribute('download', 'data.geojson');\n\t\tdocument.body.appendChild(download);\n\t\tdownload.click();\n\t\tdownload.remove();\n\t}\n\n\t/**\n\t * Toggle the state of buttons when there is no features\n\t */\n\tprotected toggleButtonsWhenNoFeature() {\n\t\tif (!this.controlContainer) return;\n\t\tconst fc = this.getFeatures(false);\n\t\tconst isActive = fc && fc.features.length > 0 ? true : false;\n\n\t\tconst targets = [\n\t\t\t`maplibregl-terradraw-${this.cssPrefix}add-select-button`,\n\t\t\t`maplibregl-terradraw-${this.cssPrefix}download-button`,\n\t\t\t`maplibregl-terradraw-${this.cssPrefix}delete-button`\n\t\t];\n\t\tfor (const className of targets) {\n\t\t\tconst btns = this.controlContainer.getElementsByClassName(className);\n\t\t\tfor (let i = 0; i < btns.length; i++) {\n\t\t\t\tconst btn = btns.item(i) as HTMLButtonElement;\n\t\t\t\tif (!btn) continue;\n\t\t\t\tbtn.disabled = !isActive;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Toggle the state of delete-select button\n\t */\n\tprotected toggleDeleteSelectionButton() {\n\t\tconst enabled = this.terradraw?.enabled || false;\n\t\tconst mode = this.terradraw?.getMode();\n\t\tconst fc = this.getFeatures(false);\n\t\tconst hasFeatures = fc && fc.features.length > 0;\n\t\tconst isActive = hasFeatures && enabled && mode === 'select';\n\t\tconst btns = document.getElementsByClassName(\n\t\t\t`maplibregl-terradraw-${this.cssPrefix}delete-selection-button`\n\t\t);\n\t\tfor (let i = 0; i < btns.length; i++) {\n\t\t\tconst btn = btns.item(i);\n\t\t\tif (!btn) continue;\n\t\t\tif (isActive) {\n\t\t\t\tbtn.classList.remove('hidden-delete-selection');\n\t\t\t} else {\n\t\t\t\tbtn.classList.add('hidden-delete-selection');\n\t\t\t}\n\t\t}\n\n\t\tif (!hasFeatures) {\n\t\t\tconst btns = document.getElementsByClassName(\n\t\t\t\t`maplibregl-terradraw-${this.cssPrefix}add-select-button`\n\t\t\t);\n\t\t\tfor (let i = 0; i < btns.length; i++) {\n\t\t\t\tconst btn = btns.item(i);\n\t\t\t\tif (!btn) continue;\n\t\t\t\tbtn.classList.remove('active');\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Clear GeoJSON feature related to extended control such as measure and valhalla by TerraDraw feature ID\n\t * @param sourceIds the array of source ID to delete\n\t * @param ids the array of feature ID. Optional, if undefined, delete all labels for source\n\t * @returns void\n\t */\n\tprotected clearExtendedFeatures(\n\t\tsourceIds: string[],\n\t\tids: TerraDrawExtend.FeatureId[] | undefined = undefined\n\t) {\n\t\tif (!this.map) return;\n\t\tfor (const sourceId of sourceIds) {\n\t\t\tconst geojsonSource: GeoJSONSourceSpecification = this.map.getStyle().sources[\n\t\t\t\tsourceId\n\t\t\t] as GeoJSONSourceSpecification;\n\t\t\tif (geojsonSource) {\n\t\t\t\t// delete old nodes\n\t\t\t\tif (\n\t\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t\t) {\n\t\t\t\t\t// if ids is undefined, delete all labels for the source\n\t\t\t\t\tif (ids === undefined) {\n\t\t\t\t\t\tgeojsonSource.data.features = [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Delete label features if originalId does not exist anymore.\n\t\t\t\t\t\tgeojsonSource.data.features = geojsonSource.data.features.filter((f) => {\n\t\t\t\t\t\t\tif (f.properties?.originalId) {\n\t\t\t\t\t\t\t\treturn !ids.includes(f.properties.originalId);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn !ids.includes(f.id as string);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// update GeoJSON source with new data\n\t\t\t\t\t(this.map.getSource(sourceId) as GeoJSONSource)?.setData(geojsonSource.data);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","// index.ts\nimport { point } from \"@turf/helpers\";\nimport { coordEach } from \"@turf/meta\";\nfunction centroid(geojson, options = {}) {\n  let xSum = 0;\n  let ySum = 0;\n  let len = 0;\n  coordEach(\n    geojson,\n    function(coord) {\n      xSum += coord[0];\n      ySum += coord[1];\n      len++;\n    },\n    true\n  );\n  return point([xSum / len, ySum / len], options.properties);\n}\nvar turf_centroid_default = centroid;\nexport {\n  centroid,\n  turf_centroid_default as default\n};\n//# sourceMappingURL=index.js.map","import {\n\tMap,\n\ttype CircleLayerSpecification,\n\ttype GeoJSONSource,\n\ttype GeoJSONSourceSpecification,\n\ttype StyleSpecification,\n\ttype SymbolLayerSpecification\n} from 'maplibre-gl';\nimport { MaplibreTerradrawControl } from './MaplibreTerradrawControl';\nimport { centroid } from '@turf/centroid';\nimport { defaultMeasureControlOptions } from '../constants';\nimport type {\n\tAreaUnit,\n\tDistanceUnit,\n\tforceAreaUnitType,\n\tforceDistanceUnitType,\n\tMeasureControlOptions,\n\tTerradrawMode\n} from '../interfaces';\nimport { type GeoJSONStoreFeatures, TerraDrawExtend } from 'terra-draw';\nimport {\n\tcalcArea,\n\tcalcDistance,\n\tcleanMaplibreStyle,\n\tdebounce,\n\tMemoryCache,\n\tqueryElevationByPoint,\n\tqueryElevationFromRasterDEM,\n\tTERRADRAW_SOURCE_IDS\n} from '../helpers';\n\n/**\n * Maplibre GL Terra Draw Measure Control\n */\nexport class MaplibreMeasureControl extends MaplibreTerradrawControl {\n\tprivate measureOptions: MeasureControlOptions;\n\tprivate elevationCache: MemoryCache<number> | undefined;\n\n\t/**\n\t * The unit of distance can be degrees, radians, miles, or kilometers (default 'kilometers')\n\t * The measuring result will be recalculated once new value is set\n\t */\n\tget distanceUnit() {\n\t\treturn this.measureOptions.distanceUnit ?? 'kilometers';\n\t}\n\tset distanceUnit(value: DistanceUnit) {\n\t\tconst isSame = this.measureOptions.distanceUnit === value;\n\t\tthis.measureOptions.distanceUnit = value;\n\t\tif (!isSame) this.recalc();\n\t}\n\n\t/**\n\t * The precision of distance value. It will be set different value when distance unit is changed. Using setter to override the value if you want.\n\t */\n\tget distancePrecision() {\n\t\tlet defaultPrecision = 2;\n\t\tif (this.measureOptions.distanceUnit === 'degrees') {\n\t\t\tdefaultPrecision = 6;\n\t\t}\n\t\treturn this.measureOptions.distancePrecision ?? defaultPrecision;\n\t}\n\tset distancePrecision(value: number) {\n\t\tconst isSame = this.measureOptions.distancePrecision === value;\n\t\tthis.measureOptions.distancePrecision = value;\n\t\tif (!isSame) this.recalc();\n\t}\n\n\t/**\n\t * Default is `auto`. If `auto` is set, the unit is converted automatically based on the value.\n\t * If a specific unit is specified (e.g., 'km', 'm', 'cm', 'mi', 'ft', 'in'), the value is always returned in that unit.\n\t * This property is only effective when `distanceUnit` is set to 'kilometers' or 'miles'.\n\t * If `distanceUnit` is set to other values (e.g., 'degrees', 'radians'), it will be ignored, and `auto` will be applied.\n\t * If you need to force other unit type, please use DistanceUnit property.\n\t */\n\tget forceDistanceUnit() {\n\t\treturn this.measureOptions.forceDistanceUnit ?? 'auto';\n\t}\n\tset forceDistanceUnit(value: forceDistanceUnitType) {\n\t\tconst isSame = this.measureOptions.forceDistanceUnit === value;\n\t\tthis.measureOptions.forceDistanceUnit = value;\n\t\tif (!isSame) this.recalc();\n\t}\n\n\t/**\n\t * The unit of area can be metric (m, ha, km) or imperial (yd, acre, mi). Default is metric.\n\t * The measuring result will be recalculated once new value is set\n\t */\n\tget areaUnit() {\n\t\treturn this.measureOptions.areaUnit ?? 'metric';\n\t}\n\tset areaUnit(value: AreaUnit) {\n\t\tconst isSame = this.measureOptions.areaUnit === value;\n\t\tthis.measureOptions.areaUnit = value;\n\t\tif (!isSame) this.recalc();\n\t}\n\n\t/**\n\t * The precision of area value. Using setter to override the value if you want.\n\t */\n\tget areaPrecision() {\n\t\treturn this.measureOptions.areaPrecision ?? 2;\n\t}\n\tset areaPrecision(value: number) {\n\t\tconst isSame = this.measureOptions.areaPrecision === value;\n\t\tthis.measureOptions.areaPrecision = value;\n\t\tif (!isSame) this.recalc();\n\t}\n\n\t/**\n\t * Default is `auto`. If `auto` is set, unit is converted depending on the value and selection of area unit. If a specific unit is specified, it returns the value always the same. If a selected unit is not the same type of unit either metric of imperial, it will be ignored, and `auto` will be applied.\n\t */\n\tget forceAreaUnit() {\n\t\treturn this.measureOptions.forceAreaUnit ?? 'auto';\n\t}\n\tset forceAreaUnit(value: forceAreaUnitType) {\n\t\tconst isSame = this.measureOptions.forceAreaUnit === value;\n\t\tthis.measureOptions.forceAreaUnit = value;\n\t\tif (!isSame) this.recalc();\n\t}\n\n\t/**\n\t * The flag of whether computing elevation. Default is false.\n\t * Using setter to override the value if you want.\n\t */\n\tget computeElevation() {\n\t\treturn this.measureOptions.computeElevation ?? false;\n\t}\n\tset computeElevation(value: boolean) {\n\t\tconst isSame = this.measureOptions.computeElevation === value;\n\t\tthis.measureOptions.computeElevation = value;\n\t\tif (!isSame) this.recalc();\n\t}\n\n\t/**\n\t * Get/Set font glyph for measure control layers\n\t *\n\t * As default, this maesure control uses maplibre's default font glyphs(`Open Sans Regular,Arial Unicode MS Regular`) described at https://maplibre.org/maplibre-style-spec/layers/#text-font\n\t *\n\t * If you are using your own maplibre style or different map privider, you probably need to set the font glyphs to match your maplibre style.\n\t *\n\t * Font glyph availability depends on what types of glyphs are supported by your maplibre style (e.g., Carto, Openmap tiles, Protomap, Maptiler, etc.)\n\t * Please make sure the font glyphs are available in your maplibre style.\n\t *\n\t * Usage:\n\t *\n\t * ```js\n\t * const drawControl = new MaplibreMeasureControl()\n\t * drawControl.fontGlyphs = ['Open Sans Italic']\n\t * map.addControl(drawControl)\n\t * ```\n\t */\n\tget fontGlyphs() {\n\t\tconst layers = [\n\t\t\tthis.measureOptions.pointLayerLabelSpec,\n\t\t\tthis.measureOptions.lineLayerLabelSpec,\n\t\t\tthis.measureOptions.polygonLayerSpec\n\t\t];\n\t\tconst firstLayer = layers[0];\n\t\treturn (firstLayer &&\n\t\t\tfirstLayer.layout &&\n\t\t\tfirstLayer.layout['text-font']) as unknown as string[];\n\t}\n\n\tset fontGlyphs(fontNames: string[]) {\n\t\tconst layers = [\n\t\t\tthis.measureOptions.pointLayerLabelSpec,\n\t\t\tthis.measureOptions.lineLayerLabelSpec,\n\t\t\tthis.measureOptions.polygonLayerSpec\n\t\t];\n\t\tfor (const layer of layers) {\n\t\t\tif (layer && layer.layout) {\n\t\t\t\tlayer.layout['text-font'] = fontNames;\n\t\t\t}\n\t\t\t// layer exists in maplibre, update glyphs as well\n\t\t\tif (this.map && layer && this.map.getLayer(layer.id)) {\n\t\t\t\tthis.map.setLayoutProperty(layer.id, 'text-font', fontNames);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Constructor\n\t * @param options Plugin control options\n\t */\n\tconstructor(options?: MeasureControlOptions) {\n\t\tlet measureOptions: MeasureControlOptions = {\n\t\t\t...JSON.parse(JSON.stringify(defaultMeasureControlOptions)),\n\t\t\tmodeOptions: { ...defaultMeasureControlOptions.modeOptions }\n\t\t};\n\n\t\tif (options) {\n\t\t\tmeasureOptions = Object.assign(measureOptions, options);\n\t\t}\n\n\t\t// replace {prefix} with prefixId for sources and layers\n\t\tconst prefixId = measureOptions.adapterOptions?.prefixId ?? 'td-measure';\n\t\tif (measureOptions.adapterOptions && !measureOptions.adapterOptions?.prefixId) {\n\t\t\tmeasureOptions.adapterOptions.prefixId = prefixId;\n\t\t}\n\n\t\t(measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).id =\n\t\t\tmeasureOptions.pointLayerLabelSpec?.id.replace('{prefix}', prefixId) as string;\n\t\t(measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).source =\n\t\t\tmeasureOptions.pointLayerLabelSpec?.source.replace('{prefix}', prefixId) as string;\n\n\t\t(measureOptions.routingLineLayerNodeSpec as CircleLayerSpecification).id =\n\t\t\tmeasureOptions.routingLineLayerNodeSpec?.id.replace('{prefix}', prefixId) as string;\n\t\t(measureOptions.routingLineLayerNodeSpec as CircleLayerSpecification).source =\n\t\t\tmeasureOptions.routingLineLayerNodeSpec?.source.replace('{prefix}', prefixId) as string;\n\n\t\t(measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).id =\n\t\t\tmeasureOptions.lineLayerLabelSpec?.id.replace('{prefix}', prefixId) as string;\n\t\t(measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).source =\n\t\t\tmeasureOptions.lineLayerLabelSpec?.source.replace('{prefix}', prefixId) as string;\n\n\t\t(measureOptions.polygonLayerSpec as SymbolLayerSpecification).id =\n\t\t\tmeasureOptions.polygonLayerSpec?.id.replace('{prefix}', prefixId) as string;\n\t\t(measureOptions.polygonLayerSpec as SymbolLayerSpecification).source =\n\t\t\tmeasureOptions.polygonLayerSpec?.source.replace('{prefix}', prefixId) as string;\n\n\t\tsuper({\n\t\t\tmodes: measureOptions.modes,\n\t\t\topen: measureOptions.open,\n\t\t\tmodeOptions: measureOptions.modeOptions,\n\t\t\tadapterOptions: measureOptions.adapterOptions\n\t\t});\n\t\tthis._cssPrefix = 'measure-';\n\t\tthis.measureOptions = measureOptions;\n\t\tif (\n\t\t\tthis.measureOptions.elevationCacheConfig &&\n\t\t\tthis.measureOptions.elevationCacheConfig?.enabled\n\t\t) {\n\t\t\tthis.elevationCache = new MemoryCache<number>(\n\t\t\t\tthis.measureOptions.elevationCacheConfig.maxSize,\n\t\t\t\tthis.measureOptions.elevationCacheConfig.ttl\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * add the plugin control to maplibre\n\t * @param map Maplibre Map object\n\t * @returns HTML Element\n\t */\n\tpublic onAdd(map: Map): HTMLElement {\n\t\tthis.controlContainer = super.onAdd(map);\n\t\treturn this.controlContainer;\n\t}\n\n\t/**\n\t * Remove the plugin control from maplibre\n\t * @returns void\n\t */\n\tpublic onRemove(): void {\n\t\tthis.unregisterMesureControl();\n\t\tsuper.onRemove();\n\t}\n\n\t/**\n\t * Activate Terra Draw to start drawing\n\t */\n\tpublic activate() {\n\t\tsuper.activate();\n\t\tthis.registerMesureControl();\n\t}\n\n\t/**\n\t * Recalculate area and distance in TerraDraw snapshot\n\t *\n\t * if you use `addFeatures` to restore GeoJSON features to TerraDraw, this recalc method needs to be called to re-measure again.\n\t *\n\t * For example, the below code is an example usage.\n\t * ```\n\t * drawInstance?.addFeatures(initData);\n\t * map?.once('idle', ()=>{\n\t *   drawControl.recalc()\n\t * })\n\t * ```\n\t */\n\tpublic recalc() {\n\t\tconst drawInstance = this.getTerraDrawInstance();\n\t\tif (drawInstance) {\n\t\t\tthis.registerMesureControl();\n\n\t\t\tconst snapshot = drawInstance.getSnapshot();\n\t\t\tfor (const feature of snapshot) {\n\t\t\t\tconst id: string = feature.id as string;\n\t\t\t\tconst geometryType = feature.geometry.type;\n\t\t\t\tconst mode = feature.properties.mode as TerradrawMode;\n\t\t\t\tif (['linestring', 'freehand-linestring'].includes(mode) && geometryType === 'LineString') {\n\t\t\t\t\tthis.measureLine(id);\n\t\t\t\t\tthis.computeElevationByLineFeatureID(id);\n\t\t\t\t} else if (mode === 'point' && geometryType === 'Point') {\n\t\t\t\t\tthis.measurePoint(id);\n\t\t\t\t\tthis.computeElevationByPointFeatureID(id);\n\t\t\t\t} else if (\n\t\t\t\t\t!['point', 'linestring', 'freehand-linestring', 'select', 'render'].includes(mode) &&\n\t\t\t\t\tgeometryType === 'Polygon'\n\t\t\t\t) {\n\t\t\t\t\tthis.measurePolygon(id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * clean maplibre style to filter only for terradraw related layers or without them.\n\t * If options are not set, returns original style given to the function.\n\t *\n\t * This can be useful incase users only want to get terradraw related layers or without it.\n\t *\n\t * Usage:\n\t * `cleanStyle(map.getStyle, { excludeTerraDrawLayers: true})`\n\t * `cleanStyle(map.getStyle, { onlyTerraDrawLayers: true})`\n\t *\n\t * @param style maplibre style spec\n\t * @param options.excludeTerraDrawLayers return maplibre style without terradraw layers and sources\n\t * @param options.onlyTerraDrawLayers return maplibre style with only terradraw layers and sources\n\t * @returns\n\t */\n\tpublic cleanStyle(\n\t\tstyle: StyleSpecification,\n\t\toptions?: { excludeTerraDrawLayers?: boolean; onlyTerraDrawLayers?: boolean }\n\t) {\n\t\tconst sourceIds = TERRADRAW_SOURCE_IDS;\n\n\t\tconst polygonSource = this.measureOptions.polygonLayerSpec?.source;\n\t\tif (polygonSource) sourceIds.push(polygonSource);\n\n\t\tconst lineSource = this.measureOptions.lineLayerLabelSpec?.source;\n\t\tif (lineSource) sourceIds.push(lineSource);\n\n\t\tconst pointSource = this.measureOptions.pointLayerLabelSpec?.source;\n\t\tif (pointSource) sourceIds.push(pointSource);\n\n\t\treturn cleanMaplibreStyle(\n\t\t\tstyle,\n\t\t\toptions,\n\t\t\tsourceIds,\n\t\t\tthis.measureOptions.adapterOptions?.prefixId\n\t\t);\n\t}\n\n\t/**\n\t * Register  measure control related maplibre sources and layers\n\t */\n\tprivate registerMesureControl() {\n\t\tif (!this.map) return;\n\n\t\tconst lineModes = this.options.modes?.filter((m) =>\n\t\t\t['linestring', 'freehand-linestring'].includes(m)\n\t\t);\n\t\tconst pointMode = this.options.modes?.find((m) => m === 'point');\n\n\t\tif (pointMode) {\n\t\t\t// add GeoJSON source for distance label\n\t\t\tif (\n\t\t\t\t!this.map.getSource(\n\t\t\t\t\t(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).source\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tthis.map.addSource(\n\t\t\t\t\t(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).source,\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'geojson',\n\t\t\t\t\t\tdata: { type: 'FeatureCollection', features: [] }\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// add GeoJSON layer for distance label node appearance\n\t\t\tif (\n\t\t\t\t!this.map.getLayer((this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).id)\n\t\t\t) {\n\t\t\t\tthis.map.addLayer(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification);\n\t\t\t}\n\t\t}\n\n\t\tif (lineModes && lineModes.length > 0) {\n\t\t\t// add GeoJSON source for distance label\n\t\t\tif (\n\t\t\t\t!this.map.getSource(\n\t\t\t\t\t(this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).source\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tthis.map.addSource(\n\t\t\t\t\t(this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).source,\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'geojson',\n\t\t\t\t\t\tdata: { type: 'FeatureCollection', features: [] }\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// add GeoJSON layer for distance label node appearance\n\t\t\tif (\n\t\t\t\t!this.map.getLayer(\n\t\t\t\t\t(this.measureOptions.routingLineLayerNodeSpec as CircleLayerSpecification).id\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tthis.map.addLayer(this.measureOptions.routingLineLayerNodeSpec as CircleLayerSpecification);\n\t\t\t}\n\n\t\t\t// add GeoJSON layer for distance label appearance\n\t\t\tif (\n\t\t\t\t!this.map.getLayer((this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).id)\n\t\t\t) {\n\t\t\t\tthis.map.addLayer(this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification);\n\t\t\t}\n\t\t}\n\n\t\tconst polygonModes = this.options.modes?.filter((m) =>\n\t\t\t[\n\t\t\t\t'polygon',\n\t\t\t\t'rectangle',\n\t\t\t\t'angled-rectangle',\n\t\t\t\t'circle',\n\t\t\t\t'sector',\n\t\t\t\t'sensor',\n\t\t\t\t'freehand'\n\t\t\t].includes(m)\n\t\t);\n\t\tif (polygonModes && polygonModes.length > 0) {\n\t\t\t// add GeoJSON source for distance label\n\t\t\tif (\n\t\t\t\t!this.map.getSource(\n\t\t\t\t\t(this.measureOptions.polygonLayerSpec as SymbolLayerSpecification).source\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tthis.map.addSource(\n\t\t\t\t\t(this.measureOptions.polygonLayerSpec as SymbolLayerSpecification).source,\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'geojson',\n\t\t\t\t\t\tdata: { type: 'FeatureCollection', features: [] }\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} // add GeoJSON layer for polygon area label appearance\n\t\t\tif (\n\t\t\t\t!this.map.getLayer((this.measureOptions.polygonLayerSpec as SymbolLayerSpecification).id)\n\t\t\t) {\n\t\t\t\tthis.map.addLayer(this.measureOptions.polygonLayerSpec as SymbolLayerSpecification);\n\t\t\t}\n\t\t}\n\n\t\tif ((lineModes && lineModes.length > 0) || (polygonModes && polygonModes.length > 0)) {\n\t\t\tconst drawInstance = this.getTerraDrawInstance();\n\t\t\tif (drawInstance) {\n\t\t\t\t// subscribe change event of TerraDraw to calc distance\n\t\t\t\tdrawInstance.on('change', this.handleTerradrawFeatureChanged.bind(this));\n\t\t\t\tdrawInstance.on('finish', this.handleTerradrawFeatureReady.bind(this));\n\t\t\t\tdrawInstance.on('deselect', this.handleTerradrawDeselect.bind(this));\n\n\t\t\t\t// subscribe feature-deleted event for the plugin control\n\t\t\t\tthis.on('feature-deleted', this.onFeatureDeleted.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Handle deselect event of terradraw\n\t */\n\tprivate handleTerradrawDeselect = () => {\n\t\tif (!this.map) return;\n\t\tif (this.computeElevation === true && this.measureOptions.terrainSource !== undefined) {\n\t\t\tconst drawInstance = this.getTerraDrawInstance();\n\t\t\tif (!drawInstance) return;\n\t\t\tconst snapshot = drawInstance.getSnapshot();\n\t\t\tconst lineFeatures = snapshot.filter(\n\t\t\t\t(f) =>\n\t\t\t\t\tf.properties.mode &&\n\t\t\t\t\t['linestring', 'freehand-linestring'].includes(f.properties.mode as string) &&\n\t\t\t\t\tf.geometry.type === 'LineString'\n\t\t\t);\n\t\t\tif (lineFeatures.length > 0) {\n\t\t\t\tfor (const f of lineFeatures) {\n\t\t\t\t\tthis.computeElevationByLineFeatureID(f.id as string);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst pointFeatures = snapshot.filter(\n\t\t\t\t(f) => f.properties.mode === 'point' && f.geometry.type === 'Point'\n\t\t\t);\n\t\t\tif (pointFeatures.length > 0) {\n\t\t\t\tfor (const f of pointFeatures) {\n\t\t\t\t\tthis.computeElevationByPointFeatureID(f.id as string);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Handle finish event of terradraw. It will be called after finishing adding a feature\n\t * @param id Feature ID\n\t */\n\tprivate handleTerradrawFeatureReady = debounce((id: TerraDrawExtend.FeatureId) => {\n\t\tif (!this.map) return;\n\t\tthis.computeElevationByLineFeatureID(id);\n\t\tthis.computeElevationByPointFeatureID(id);\n\t}, 300);\n\n\t/**\n\t * Handle change event of TerraDraw\n\t * @param ids Feature IDs\n\t */\n\tprivate handleTerradrawFeatureChanged(ids: TerraDrawExtend.FeatureId[], type: string) {\n\t\tif (!this.map) return;\n\t\t// skip if type is styling. Do continue if type is create, update or delete.\n\t\tif (type === 'styling') return;\n\n\t\tconst sources = [\n\t\t\tthis.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification,\n\t\t\tthis.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification,\n\t\t\tthis.measureOptions.routingLineLayerNodeSpec as CircleLayerSpecification,\n\t\t\tthis.measureOptions.polygonLayerSpec as SymbolLayerSpecification\n\t\t];\n\t\tconst sourceIds = sources.map((src) => src.source);\n\n\t\tif (type === 'delete') {\n\t\t\tthis.clearExtendedFeatures(sourceIds, ids);\n\t\t\treturn;\n\t\t}\n\n\t\t// type is create or update\n\n\t\tconst drawInstance = this.getTerraDrawInstance();\n\t\tif (!drawInstance) return;\n\t\tconst snapshot = drawInstance.getSnapshot();\n\t\tfor (const id of ids) {\n\t\t\tconst feature = snapshot.find((f) => f.id === id);\n\t\t\tif (feature) {\n\t\t\t\tconst geometryType = feature.geometry.type;\n\t\t\t\tconst mode = feature.properties.mode as TerradrawMode;\n\t\t\t\tif (['linestring', 'freehand-linestring'].includes(mode) && geometryType === 'LineString') {\n\t\t\t\t\tthis.measureLine(id);\n\t\t\t\t} else if (mode === 'point' && geometryType === 'Point') {\n\t\t\t\t\tthis.measurePoint(id);\n\t\t\t\t} else if (\n\t\t\t\t\t!['point', 'linestring', 'freehand-linestring', 'select', 'render'].includes(mode) &&\n\t\t\t\t\tgeometryType === 'Polygon'\n\t\t\t\t) {\n\t\t\t\t\tthis.measurePolygon(id);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// if editing ID does not exist, delete all related features from measure layers\n\t\t\t\tthis.clearExtendedFeatures(sourceIds, [id]);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Unregister measure control related maplibre sources and layers\n\t */\n\tprivate unregisterMesureControl() {\n\t\tthis.off('feature-deleted', this.onFeatureDeleted.bind(this));\n\t\tif (!this.map) return;\n\t\tif (\n\t\t\tthis.map.getLayer((this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).id)\n\t\t) {\n\t\t\tthis.map.removeLayer(\n\t\t\t\t(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).id\n\t\t\t);\n\t\t}\n\t\tif (\n\t\t\tthis.map.getLayer((this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).id)\n\t\t) {\n\t\t\tthis.map.removeLayer((this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).id);\n\t\t}\n\t\tif (\n\t\t\tthis.map.getLayer(\n\t\t\t\t(this.measureOptions.routingLineLayerNodeSpec as CircleLayerSpecification).id\n\t\t\t)\n\t\t) {\n\t\t\tthis.map.removeLayer(\n\t\t\t\t(this.measureOptions.routingLineLayerNodeSpec as CircleLayerSpecification).id\n\t\t\t);\n\t\t}\n\t\tif (this.map.getLayer((this.measureOptions.polygonLayerSpec as SymbolLayerSpecification).id)) {\n\t\t\tthis.map.removeLayer((this.measureOptions.polygonLayerSpec as SymbolLayerSpecification).id);\n\t\t}\n\t\tif (\n\t\t\tthis.map.getSource(\n\t\t\t\t(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).source\n\t\t\t)\n\t\t) {\n\t\t\tthis.map.removeSource(\n\t\t\t\t(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).source\n\t\t\t);\n\t\t}\n\t\tif (\n\t\t\tthis.map.getSource(\n\t\t\t\t(this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).source\n\t\t\t)\n\t\t) {\n\t\t\tthis.map.removeSource(\n\t\t\t\t(this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).source\n\t\t\t);\n\t\t}\n\t\tif (\n\t\t\tthis.map.getSource((this.measureOptions.polygonLayerSpec as SymbolLayerSpecification).source)\n\t\t) {\n\t\t\tthis.map.removeSource(\n\t\t\t\t(this.measureOptions.polygonLayerSpec as SymbolLayerSpecification).source\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Replace GeoJSON source with updated features for a given source ID\n\t * @param updatedFeatures Updated GeoJSON features\n\t * @param sourceId Source ID to update\n\t * @param type either 'linestring' or 'point'\n\t */\n\tprivate replaceGeoJSONSource(\n\t\tupdatedFeatures: GeoJSONStoreFeatures[],\n\t\tsourceId: string,\n\t\ttype: 'linestring' | 'point'\n\t) {\n\t\tif (!this.map) return;\n\t\tconst newGeoJsonSource: GeoJSONSourceSpecification = this.map.getStyle().sources[\n\t\t\tsourceId\n\t\t] as GeoJSONSourceSpecification;\n\t\tif (newGeoJsonSource) {\n\t\t\tif (\n\t\t\t\ttypeof newGeoJsonSource.data !== 'string' &&\n\t\t\t\tnewGeoJsonSource.data.type === 'FeatureCollection'\n\t\t\t) {\n\t\t\t\t// check if feature id still exist in terradraw\n\t\t\t\t// in some conditions, features might already be deleted from terradraw\n\t\t\t\tconst updatedExistingFeatures: GeoJSONStoreFeatures[] = [];\n\t\t\t\tfor (const f of updatedFeatures) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.terradraw?.getSnapshotFeature(f.id as TerraDrawExtend.FeatureId) ||\n\t\t\t\t\t\tthis.terradraw?.getSnapshotFeature(f.properties.originalId as TerraDrawExtend.FeatureId)\n\t\t\t\t\t) {\n\t\t\t\t\t\tupdatedExistingFeatures.push(f);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst ids = updatedExistingFeatures.map((f) => f.id);\n\t\t\t\tif (\n\t\t\t\t\ttypeof newGeoJsonSource.data !== 'string' &&\n\t\t\t\t\tnewGeoJsonSource.data.type === 'FeatureCollection'\n\t\t\t\t) {\n\t\t\t\t\tif (type === 'linestring') {\n\t\t\t\t\t\tnewGeoJsonSource.data.features = [\n\t\t\t\t\t\t\t...(newGeoJsonSource.data.features = newGeoJsonSource.data.features.filter(\n\t\t\t\t\t\t\t\t(f) => !(ids.includes(f.properties?.originalId) && f.geometry.type === 'Point')\n\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\t...updatedExistingFeatures\n\t\t\t\t\t\t];\n\t\t\t\t\t} else if (type === 'point') {\n\t\t\t\t\t\tnewGeoJsonSource.data.features = [\n\t\t\t\t\t\t\t...(newGeoJsonSource.data.features = newGeoJsonSource.data.features.filter(\n\t\t\t\t\t\t\t\t(f) => !(ids.includes(f.id) && f.geometry.type === 'Point')\n\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\t...updatedExistingFeatures\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\n\t\t\t\t\t// delete duplicate points\n\t\t\t\t\tconst featureMap: { [key: TerraDrawExtend.FeatureId]: GeoJSONStoreFeatures } = {};\n\t\t\t\t\tnewGeoJsonSource.data.features.forEach((feature) => {\n\t\t\t\t\t\tconst id = feature.id as TerraDrawExtend.FeatureId;\n\n\t\t\t\t\t\tif (!featureMap[id]) {\n\t\t\t\t\t\t\tfeatureMap[id] = feature as GeoJSONStoreFeatures;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst existingFeature = featureMap[id];\n\t\t\t\t\t\t\tif (!existingFeature.properties.elevation && feature.properties?.elevation) {\n\t\t\t\t\t\t\t\tfeatureMap[id] = feature as GeoJSONStoreFeatures;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tnewGeoJsonSource.data.features = Array.from(Object.values(featureMap));\n\n\t\t\t\t\t// update features\n\t\t\t\t\t(this.map.getSource(sourceId) as GeoJSONSource)?.setData(newGeoJsonSource.data);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Compute elevation by a LineString feature ID\n\t * @param id FeatureID\n\t */\n\tprivate computeElevationByLineFeatureID = async (id: TerraDrawExtend.FeatureId) => {\n\t\tif (!this.map) return;\n\t\tif (this.computeElevation === true) {\n\t\t\tconst geojsonSource: GeoJSONSourceSpecification = this.map.getStyle().sources[\n\t\t\t\t(this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).source\n\t\t\t] as GeoJSONSourceSpecification;\n\t\t\tif (geojsonSource) {\n\t\t\t\tif (\n\t\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t\t) {\n\t\t\t\t\tconst points: GeoJSONStoreFeatures[] = geojsonSource.data.features.filter(\n\t\t\t\t\t\t(f) => f.properties?.originalId === id && f.geometry.type === 'Point'\n\t\t\t\t\t) as unknown as GeoJSONStoreFeatures[];\n\t\t\t\t\tif (points && points.length > 0) {\n\t\t\t\t\t\tconst updatedFeatures = await queryElevationFromRasterDEM(\n\t\t\t\t\t\t\tpoints as GeoJSONStoreFeatures[],\n\t\t\t\t\t\t\tthis.measureOptions.terrainSource,\n\t\t\t\t\t\t\tthis.measureOptions.elevationCacheConfig,\n\t\t\t\t\t\t\tthis.elevationCache\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tthis.replaceGeoJSONSource(\n\t\t\t\t\t\t\tupdatedFeatures,\n\t\t\t\t\t\t\t(this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).source,\n\t\t\t\t\t\t\t'linestring'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Compute elevation by a Point feature ID\n\t * @param id FeatureID\n\t */\n\tprivate computeElevationByPointFeatureID = async (id: TerraDrawExtend.FeatureId) => {\n\t\tif (!this.map) return;\n\t\tif (this.computeElevation === true) {\n\t\t\tconst geojsonSource: GeoJSONSourceSpecification = this.map.getStyle().sources[\n\t\t\t\t(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).source\n\t\t\t] as GeoJSONSourceSpecification;\n\t\t\tif (geojsonSource) {\n\t\t\t\tif (\n\t\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t\t) {\n\t\t\t\t\tconst points: GeoJSONStoreFeatures[] = geojsonSource.data.features.filter(\n\t\t\t\t\t\t(f) => f.id === id && f.geometry.type === 'Point' && f.properties?.mode === 'point'\n\t\t\t\t\t) as unknown as GeoJSONStoreFeatures[];\n\t\t\t\t\tif (points && points.length > 0) {\n\t\t\t\t\t\tconst updatedFeatures = await queryElevationFromRasterDEM(\n\t\t\t\t\t\t\tpoints as GeoJSONStoreFeatures[],\n\t\t\t\t\t\t\tthis.measureOptions.terrainSource,\n\t\t\t\t\t\t\tthis.measureOptions.elevationCacheConfig,\n\t\t\t\t\t\t\tthis.elevationCache\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.replaceGeoJSONSource(\n\t\t\t\t\t\t\tupdatedFeatures,\n\t\t\t\t\t\t\t(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).source,\n\t\t\t\t\t\t\t'point'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * measure polygon area for given feature ID\n\t * @param id terradraw feature id\n\t */\n\tprivate measurePolygon(id: TerraDrawExtend.FeatureId) {\n\t\tif (!this.map) return;\n\t\tconst drawInstance = this.getTerraDrawInstance();\n\t\tif (!drawInstance) return;\n\n\t\tconst snapshot = drawInstance.getSnapshot();\n\t\tlet feature = snapshot?.find((f) => f.id === id && f.geometry.type === 'Polygon');\n\t\tif (feature) {\n\t\t\tconst geojsonSource: GeoJSONSourceSpecification = this.map.getStyle().sources[\n\t\t\t\t(this.measureOptions.polygonLayerSpec as SymbolLayerSpecification).source\n\t\t\t] as GeoJSONSourceSpecification;\n\t\t\tif (geojsonSource) {\n\t\t\t\t// delete old nodes\n\t\t\t\tif (\n\t\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t\t) {\n\t\t\t\t\tgeojsonSource.data.features = geojsonSource.data.features.filter(\n\t\t\t\t\t\t(f) => f.properties?.originalId !== id\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst point = JSON.parse(JSON.stringify(feature));\n\t\t\t\tpoint.id = point.id + '-area-label';\n\t\t\t\tpoint.geometry = centroid(feature.geometry).geometry;\n\t\t\t\tpoint.properties.originalId = feature.id;\n\n\t\t\t\tfeature = calcArea(feature, this.areaUnit, this.areaPrecision, this.forceAreaUnit);\n\t\t\t\tpoint.properties.area = feature.properties.area;\n\t\t\t\tpoint.properties.unit = feature.properties.unit;\n\n\t\t\t\tif (\n\t\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t\t) {\n\t\t\t\t\tgeojsonSource.data.features.push(point);\n\t\t\t\t}\n\t\t\t\t// update GeoJSON source with new data\n\t\t\t\t(\n\t\t\t\t\tthis.map.getSource(\n\t\t\t\t\t\t(this.measureOptions.polygonLayerSpec as SymbolLayerSpecification).source\n\t\t\t\t\t) as GeoJSONSource\n\t\t\t\t)?.setData(geojsonSource.data);\n\n\t\t\t\tthis.map.moveLayer((this.measureOptions.polygonLayerSpec as SymbolLayerSpecification).id);\n\n\t\t\t\tif (\n\t\t\t\t\tthis.map.getLayer((this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).id)\n\t\t\t\t) {\n\t\t\t\t\tthis.map.moveLayer(\n\t\t\t\t\t\t(this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).id\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tthis.map.getLayer(\n\t\t\t\t\t\t(this.measureOptions.routingLineLayerNodeSpec as CircleLayerSpecification).id\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tthis.map.moveLayer(\n\t\t\t\t\t\t(this.measureOptions.routingLineLayerNodeSpec as CircleLayerSpecification).id\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tthis.map.getLayer(\n\t\t\t\t\t\t(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).id\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tthis.map.moveLayer(\n\t\t\t\t\t\t(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).id\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * measure line distance for given feature ID\n\t * @param id terradraw feature id\n\t */\n\tprivate measureLine(id: TerraDrawExtend.FeatureId) {\n\t\tif (!this.map) return;\n\t\tconst drawInstance = this.getTerraDrawInstance();\n\t\tif (!drawInstance) return;\n\n\t\tconst snapshot = drawInstance.getSnapshot();\n\t\tlet feature = snapshot?.find((f) => f.id === id && f.geometry.type === 'LineString');\n\t\tif (feature) {\n\t\t\tconst geojsonSource: GeoJSONSourceSpecification = this.map.getStyle().sources[\n\t\t\t\t(this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).source\n\t\t\t] as GeoJSONSourceSpecification;\n\t\t\tif (geojsonSource) {\n\t\t\t\t// delete old nodes\n\t\t\t\tif (\n\t\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t\t) {\n\t\t\t\t\tgeojsonSource.data.features = geojsonSource.data.features.filter(\n\t\t\t\t\t\t(f) => f.properties?.originalId !== id\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tfeature = calcDistance(\n\t\t\t\t\tfeature,\n\t\t\t\t\tthis.distanceUnit,\n\t\t\t\t\tthis.distancePrecision,\n\t\t\t\t\tthis.forceDistanceUnit,\n\t\t\t\t\tthis.map,\n\t\t\t\t\tthis.computeElevation,\n\t\t\t\t\tthis.measureOptions.terrainSource\n\t\t\t\t);\n\t\t\t\tconst segments = feature.properties.segments as unknown as GeoJSONStoreFeatures[];\n\t\t\t\tfor (let i = 0; i < segments.length; i++) {\n\t\t\t\t\tconst segment = segments[i];\n\t\t\t\t\tconst coordinates: number[][] = segment.geometry.coordinates as number[][];\n\t\t\t\t\tconst start = coordinates[0];\n\t\t\t\t\tconst end = coordinates[1];\n\n\t\t\t\t\t// node\n\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\tconst startNode = JSON.parse(JSON.stringify(segment));\n\t\t\t\t\t\tstartNode.id = `${segment.id}-node-${i}`;\n\t\t\t\t\t\tstartNode.geometry = {\n\t\t\t\t\t\t\ttype: 'Point',\n\t\t\t\t\t\t\tcoordinates: start\n\t\t\t\t\t\t};\n\t\t\t\t\t\tstartNode.properties.distance = 0;\n\t\t\t\t\t\tstartNode.properties.total = 0;\n\n\t\t\t\t\t\tif (segment.properties.elevation_start) {\n\t\t\t\t\t\t\tstartNode.properties.elevation = segment.properties.elevation_start;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tgeojsonSource.data.features.push(startNode);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tconst endNode = JSON.parse(JSON.stringify(segment));\n\t\t\t\t\tendNode.id = `${segment.id}-node-${i + 1}`;\n\t\t\t\t\tendNode.geometry = {\n\t\t\t\t\t\ttype: 'Point',\n\t\t\t\t\t\tcoordinates: end\n\t\t\t\t\t};\n\n\t\t\t\t\tif (segment.properties.elevation_end) {\n\t\t\t\t\t\tendNode.properties.elevation = segment.properties.elevation_end;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t\t\t) {\n\t\t\t\t\t\tgeojsonSource.data.features.push(endNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// update GeoJSON source with new data\n\t\t\t\t(\n\t\t\t\t\tthis.map.getSource(\n\t\t\t\t\t\t(this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).source\n\t\t\t\t\t) as GeoJSONSource\n\t\t\t\t)?.setData(geojsonSource.data);\n\n\t\t\t\tif (\n\t\t\t\t\tthis.map.getLayer((this.measureOptions.polygonLayerSpec as SymbolLayerSpecification).id)\n\t\t\t\t) {\n\t\t\t\t\tthis.map.moveLayer((this.measureOptions.polygonLayerSpec as SymbolLayerSpecification).id);\n\t\t\t\t}\n\n\t\t\t\tthis.map.moveLayer((this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).id);\n\t\t\t\tthis.map.moveLayer(\n\t\t\t\t\t(this.measureOptions.routingLineLayerNodeSpec as CircleLayerSpecification).id\n\t\t\t\t);\n\n\t\t\t\tif (\n\t\t\t\t\tthis.map.getLayer(\n\t\t\t\t\t\t(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).id\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tthis.map.moveLayer(\n\t\t\t\t\t\t(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).id\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * measure point elevation for given feature ID\n\t * @param id terradraw feature id\n\t */\n\tprivate measurePoint(id: TerraDrawExtend.FeatureId) {\n\t\tif (!this.map) return;\n\t\tconst drawInstance = this.getTerraDrawInstance();\n\t\tif (!drawInstance) return;\n\n\t\tconst snapshot = drawInstance.getSnapshot();\n\t\tlet feature = snapshot?.find((f) => f.id === id && f.geometry.type === 'Point');\n\t\tif (feature) {\n\t\t\tconst geojsonSource: GeoJSONSourceSpecification = this.map.getStyle().sources[\n\t\t\t\t(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).source\n\t\t\t] as GeoJSONSourceSpecification;\n\t\t\tif (geojsonSource) {\n\t\t\t\t// delete old nodes\n\t\t\t\tif (\n\t\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t\t) {\n\t\t\t\t\tgeojsonSource.data.features = geojsonSource.data.features.filter((f) => f.id !== id);\n\t\t\t\t}\n\n\t\t\t\tfeature = queryElevationByPoint(\n\t\t\t\t\tfeature,\n\t\t\t\t\tthis.map,\n\t\t\t\t\tthis.computeElevation,\n\t\t\t\t\tthis.measureOptions.terrainSource\n\t\t\t\t);\n\n\t\t\t\t// add elevation label feature if computeElevation is only enabled.\n\t\t\t\tif (this.computeElevation === true) {\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t\t\t) {\n\t\t\t\t\t\tgeojsonSource.data.features.push(feature);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// update GeoJSON source with new data\n\t\t\t\t(\n\t\t\t\t\tthis.map.getSource(\n\t\t\t\t\t\t(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).source\n\t\t\t\t\t) as GeoJSONSource\n\t\t\t\t)?.setData(geojsonSource.data);\n\n\t\t\t\tif (\n\t\t\t\t\tthis.map.getLayer((this.measureOptions.polygonLayerSpec as SymbolLayerSpecification).id)\n\t\t\t\t) {\n\t\t\t\t\tthis.map.moveLayer((this.measureOptions.polygonLayerSpec as SymbolLayerSpecification).id);\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tthis.map.getLayer((this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).id)\n\t\t\t\t) {\n\t\t\t\t\tthis.map.moveLayer(\n\t\t\t\t\t\t(this.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification).id\n\t\t\t\t\t);\n\t\t\t\t\tthis.map.moveLayer(\n\t\t\t\t\t\t(this.measureOptions.routingLineLayerNodeSpec as CircleLayerSpecification).id\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.map.moveLayer(\n\t\t\t\t\t(this.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification).id\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Event definition when feature is deleted by terradraw\n\t */\n\tprivate onFeatureDeleted(args: unknown) {\n\t\tif (!this.map) return;\n\t\tconst drawInstance = this.getTerraDrawInstance();\n\t\tif (drawInstance) {\n\t\t\tlet deletedIds: string[] = [];\n\t\t\tif (typeof args === 'object' && args !== null && 'deletedIds' in args) {\n\t\t\t\tdeletedIds = (args as { deletedIds: string[] }).deletedIds;\n\t\t\t}\n\n\t\t\tconst sources = [\n\t\t\t\tthis.measureOptions.pointLayerLabelSpec as SymbolLayerSpecification,\n\t\t\t\tthis.measureOptions.lineLayerLabelSpec as SymbolLayerSpecification,\n\t\t\t\tthis.measureOptions.routingLineLayerNodeSpec as CircleLayerSpecification,\n\t\t\t\tthis.measureOptions.polygonLayerSpec as SymbolLayerSpecification\n\t\t\t];\n\t\t\tconst sourceIds = sources.map((src) => src.source);\n\t\t\tif (deletedIds && deletedIds.length > 0) {\n\t\t\t\t// delete only features by IDs\n\t\t\t\tthis.clearExtendedFeatures(sourceIds, deletedIds);\n\t\t\t} else {\n\t\t\t\t// delete all features\n\t\t\t\tthis.clearExtendedFeatures(sourceIds, undefined);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * get GeoJSON features\n\t * @param onlySelected If true, returns only selected features. Default is false.\n\t * @returns FeatureCollection in GeoJSON format\n\t */\n\tpublic getFeatures(onlySelected = false) {\n\t\tconst fc = super.getFeatures(onlySelected);\n\t\tif (!fc) return fc;\n\t\tif (!this.terradraw) return fc;\n\n\t\tfor (let i = 0; i < fc.features.length; i++) {\n\t\t\tconst feature = fc.features[i];\n\t\t\tif (!this.map) continue;\n\t\t\tif (!this.map.loaded()) continue;\n\t\t\tconst geomType = feature.geometry.type;\n\t\t\tif (geomType === 'LineString') {\n\t\t\t\tfc.features[i] = calcDistance(\n\t\t\t\t\tfeature,\n\t\t\t\t\tthis.distanceUnit,\n\t\t\t\t\tthis.distancePrecision,\n\t\t\t\t\tthis.forceDistanceUnit,\n\t\t\t\t\tthis.map,\n\t\t\t\t\tthis.computeElevation,\n\t\t\t\t\tthis.measureOptions.terrainSource\n\t\t\t\t);\n\t\t\t} else if (geomType === 'Polygon') {\n\t\t\t\tfc.features[i] = calcArea(feature, this.areaUnit, this.areaPrecision, this.forceAreaUnit);\n\t\t\t} else if (geomType === 'Point') {\n\t\t\t\tfc.features[i] = queryElevationByPoint(\n\t\t\t\t\tfeature,\n\t\t\t\t\tthis.map,\n\t\t\t\t\tthis.computeElevation,\n\t\t\t\t\tthis.measureOptions.terrainSource\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn fc;\n\t}\n}\n","import { MaplibreTerradrawControl } from './MaplibreTerradrawControl';\nimport { defaultValhallaControlOptions } from '../constants';\nimport type {\n\tTerradrawMode,\n\tTerradrawValhallaMode,\n\tValhallaControlOptions,\n\tValhallaOptions\n} from '../interfaces';\nimport {\n\tGeoJSONSource,\n\tLngLat,\n\ttype CircleLayerSpecification,\n\ttype FillLayerSpecification,\n\ttype GeoJSONSourceSpecification,\n\ttype LineLayerSpecification,\n\ttype Map,\n\ttype StyleSpecification,\n\ttype SymbolLayerSpecification\n} from 'maplibre-gl';\nimport type { GeoJSONStoreFeatures, GeoJSONStoreGeometries, TerraDrawExtend } from 'terra-draw';\nimport {\n\tdebounce,\n\tModalDialog,\n\troutingDistanceUnitOptions,\n\ttype routingDistanceUnitType,\n\tcostingModelOptions,\n\tValhallaRouting,\n\ttype costingModelType,\n\tTERRADRAW_SOURCE_IDS,\n\tcleanMaplibreStyle,\n\tValhallaIsochrone,\n\ttype Contour,\n\ttype ContourType,\n\tcontourTypeOptions\n} from '../helpers';\n\n/**\n * Maplibre GL Terra Draw Measure Control\n */\nexport class MaplibreValhallaControl extends MaplibreTerradrawControl {\n\tprivate controlOptions: ValhallaControlOptions;\n\tprivate valhallaOptions: ValhallaOptions;\n\tprivate _modalDialog: ModalDialog | undefined;\n\n\t/**\n\t * Get the URL of Valhalla API\n\t */\n\tget valhallaUrl() {\n\t\treturn this.valhallaOptions.url as string;\n\t}\n\t/**\n\t * Set the URL of Valhalla API\n\t * @param value URL of Valhalla API\n\t */\n\tset valhallaUrl(value: string) {\n\t\tthis.valhallaOptions.url = value;\n\t}\n\n\t/**\n\t * Get the means of transport for Valhalla routing api\n\t * @returns costingModelType\n\t * @example 'pedestrian', 'bicycle', 'auto'\n\t */\n\tget routingCostingModel() {\n\t\treturn this.valhallaOptions.routingOptions?.costingModel as costingModelType;\n\t}\n\t/**\n\t * Set the means of transport for Valhalla routing api\n\t * @param value costingModelType\n\t * @example 'pedestrian', 'bicycle', 'auto'\n\t */\n\tset routingCostingModel(value: costingModelType) {\n\t\tif (!this.valhallaOptions.routingOptions) {\n\t\t\tthis.valhallaOptions.routingOptions = {};\n\t\t}\n\t\tthis.valhallaOptions.routingOptions.costingModel = value;\n\t\tthis.createSettingsDialog();\n\t}\n\n\t/**\n\t * Get the distance unit for Valhalla routing api\n\t * @returns routingDistanceUnitType\n\t * @example 'kilometers', 'miles'\n\t */\n\tget routingDistanceUnit() {\n\t\treturn this.valhallaOptions.routingOptions?.distanceUnit as routingDistanceUnitType;\n\t}\n\n\t/**\n\t * Set the distance unit for Valhalla routing api\n\t * @param value routingDistanceUnitType\n\t * @example 'kilometers', 'miles'\n\t */\n\tset routingDistanceUnit(value: routingDistanceUnitType) {\n\t\tif (!this.valhallaOptions.routingOptions) {\n\t\t\tthis.valhallaOptions.routingOptions = {};\n\t\t}\n\t\tthis.valhallaOptions.routingOptions.distanceUnit = value;\n\t\tthis.createSettingsDialog();\n\t}\n\n\t/**\n\t * Get the contour type for Valhalla isochrone api\n\t * @returns ContourType\n\t * @example 'time', 'distance'\n\t */\n\tget isochroneContourType() {\n\t\treturn this.valhallaOptions.isochroneOptions?.contourType as ContourType;\n\t}\n\t/**\n\t * Set the contour type for Valhalla isochrone api\n\t * @param value ContourType\n\t * @example 'time', 'distance'\n\t */\n\tset isochroneContourType(value: ContourType) {\n\t\tif (!this.valhallaOptions.isochroneOptions) {\n\t\t\tthis.valhallaOptions.isochroneOptions = {};\n\t\t}\n\t\tthis.valhallaOptions.isochroneOptions.contourType = value;\n\t\tthis.createSettingsDialog();\n\t}\n\n\t/**\n\t * Get the means of transport for Valhalla isochrone api\n\t * @returns isochroneCostingModelType\n\t * @example 'pedestrian', 'bicycle', 'auto'\n\t */\n\tget isochroneCostingModel() {\n\t\treturn this.valhallaOptions.isochroneOptions?.costingModel as costingModelType;\n\t}\n\t/**\n\t * Set the means of transport for Valhalla isochrone api\n\t * @param value isochroneCostingModelType\n\t * @example 'pedestrian', 'bicycle', 'auto'\n\t */\n\tset isochroneCostingModel(value: costingModelType) {\n\t\tif (!this.valhallaOptions.isochroneOptions) {\n\t\t\tthis.valhallaOptions.isochroneOptions = {};\n\t\t}\n\t\tthis.valhallaOptions.isochroneOptions.costingModel = value;\n\t\tthis.createSettingsDialog();\n\t}\n\n\t/**\n\t * Get the list of contours for Valhalla isochrone api\n\t * @returns Contour[]\n\t */\n\tget isochroneContours() {\n\t\treturn this.valhallaOptions.isochroneOptions?.contours as Contour[];\n\t}\n\n\t/**\n\t * Set the list of contours for Valhalla isochrone api\n\t * @param value Contour[]\n\t */\n\tset isochroneContours(value: Contour[]) {\n\t\tif (!this.valhallaOptions.isochroneOptions) {\n\t\t\tthis.valhallaOptions.isochroneOptions = {};\n\t\t}\n\t\tthis.valhallaOptions.isochroneOptions.contours = value;\n\t\tthis.createSettingsDialog();\n\t}\n\n\t/**\n\t * Get/Set font glyph for valhalla control layers\n\t *\n\t * As default, this maesure control uses maplibre's default font glyphs(`Open Sans Regular,Arial Unicode MS Regular`) described at https://maplibre.org/maplibre-style-spec/layers/#text-font\n\t *\n\t * If you are using your own maplibre style or different map privider, you probably need to set the font glyphs to match your maplibre style.\n\t *\n\t * Font glyph availability depends on what types of glyphs are supported by your maplibre style (e.g., Carto, Openmap tiles, Protomap, Maptiler, etc.)\n\t * Please make sure the font glyphs are available in your maplibre style.\n\t *\n\t * Usage:\n\t *\n\t * ```js\n\t * const drawControl = new MaplibreValhallaControl()\n\t * drawControl.fontGlyphs = ['Open Sans Italic']\n\t * map.addControl(drawControl)\n\t * ```\n\t */\n\tget fontGlyphs() {\n\t\tconst layers = [this.controlOptions.routingLineLayerNodeLabelSpec];\n\t\tconst firstLayer = layers[0];\n\t\treturn (firstLayer &&\n\t\t\tfirstLayer.layout &&\n\t\t\tfirstLayer.layout['text-font']) as unknown as string[];\n\t}\n\n\tset fontGlyphs(fontNames: string[]) {\n\t\tconst layers = [this.controlOptions.routingLineLayerNodeLabelSpec];\n\t\tfor (const layer of layers) {\n\t\t\tif (layer && layer.layout) {\n\t\t\t\tlayer.layout['text-font'] = fontNames;\n\t\t\t}\n\t\t\t// layer exists in maplibre, update glyphs as well\n\t\t\tif (this.map && layer && this.map.getLayer(layer.id)) {\n\t\t\t\tthis.map.setLayoutProperty(layer.id, 'text-font', fontNames);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get the dialog instance for settings\n\t */\n\tget settingDialog(): ModalDialog {\n\t\treturn this._modalDialog as ModalDialog;\n\t}\n\t/**\n\t * Set the dialog instance for settings\n\t */\n\tset settingDialog(value: ModalDialog) {\n\t\tthis._modalDialog = value;\n\t}\n\n\t/**\n\t * Constructor\n\t * @param options Plugin control options\n\t */\n\tconstructor(options?: ValhallaControlOptions) {\n\t\tlet _options: ValhallaControlOptions = {\n\t\t\t...JSON.parse(JSON.stringify(defaultValhallaControlOptions)),\n\t\t\tmodeOptions: { ...defaultValhallaControlOptions.modeOptions }\n\t\t};\n\t\tif (options) {\n\t\t\t_options = Object.assign(_options, options);\n\t\t\t_options.valhallaOptions = Object.assign(\n\t\t\t\tJSON.parse(JSON.stringify(defaultValhallaControlOptions.valhallaOptions)),\n\t\t\t\t_options.valhallaOptions as ValhallaOptions\n\t\t\t);\n\t\t}\n\n\t\t// replace {prefix} with prefixId for sources and layers\n\t\tif (!_options.adapterOptions) {\n\t\t\t_options.adapterOptions = {};\n\t\t}\n\t\t_options.adapterOptions.prefixId = _options.adapterOptions?.prefixId ?? 'td-valhalla';\n\n\t\tconst prefixId = _options.adapterOptions?.prefixId ?? 'td-valhalla';\n\n\t\t(_options.routingLineLayerNodeLabelSpec as SymbolLayerSpecification).id =\n\t\t\t_options.routingLineLayerNodeLabelSpec?.id.replace('{prefix}', prefixId) as string;\n\t\t(_options.routingLineLayerNodeLabelSpec as SymbolLayerSpecification).source =\n\t\t\t_options.routingLineLayerNodeLabelSpec?.source.replace('{prefix}', prefixId) as string;\n\n\t\t(_options.routingLineLayerNodeSpec as CircleLayerSpecification).id =\n\t\t\t_options.routingLineLayerNodeSpec?.id.replace('{prefix}', prefixId) as string;\n\t\t(_options.routingLineLayerNodeSpec as CircleLayerSpecification).source =\n\t\t\t_options.routingLineLayerNodeSpec?.source.replace('{prefix}', prefixId) as string;\n\n\t\t(_options.isochronePolygonLayerSpec as FillLayerSpecification).id =\n\t\t\t_options.isochronePolygonLayerSpec?.id.replace('{prefix}', prefixId) as string;\n\t\t(_options.isochronePolygonLayerSpec as FillLayerSpecification).source =\n\t\t\t_options.isochronePolygonLayerSpec?.source.replace('{prefix}', prefixId) as string;\n\n\t\t(_options.isochroneLineLayerSpec as LineLayerSpecification).id =\n\t\t\t_options.isochroneLineLayerSpec?.id.replace('{prefix}', prefixId) as string;\n\t\t(_options.isochroneLineLayerSpec as LineLayerSpecification).source =\n\t\t\t_options.isochroneLineLayerSpec?.source.replace('{prefix}', prefixId) as string;\n\n\t\t(_options.isochroneLabelLayerSpec as SymbolLayerSpecification).id =\n\t\t\t_options.isochroneLabelLayerSpec?.id.replace('{prefix}', prefixId) as string;\n\t\t(_options.isochroneLabelLayerSpec as SymbolLayerSpecification).source =\n\t\t\t_options.isochroneLabelLayerSpec?.source.replace('{prefix}', prefixId) as string;\n\n\t\tsuper({\n\t\t\tmodes: _options.modes as unknown as TerradrawMode[],\n\t\t\topen: _options.open,\n\t\t\tmodeOptions: _options.modeOptions,\n\t\t\tadapterOptions: _options.adapterOptions\n\t\t});\n\t\tthis.valhallaOptions = _options.valhallaOptions as ValhallaOptions;\n\n\t\tif (!this.valhallaOptions.url) {\n\t\t\tthrow new Error(\n\t\t\t\t'Valhalla URL is required for this control. Please set valhallaOptions.url in options.'\n\t\t\t);\n\t\t}\n\t\tthis._cssPrefix = 'valhalla-';\n\t\tthis.controlOptions = _options;\n\t}\n\n\t/**\n\t * add the plugin control to maplibre\n\t * @param map Maplibre Map object\n\t * @returns HTML Element\n\t */\n\tpublic onAdd(map: Map): HTMLElement {\n\t\tthis.controlContainer = super.onAdd(map);\n\t\tthis.createSettingsDialog();\n\t\treturn this.controlContainer;\n\t}\n\n\t/**\n\t * Remove the plugin control from maplibre\n\t * @returns void\n\t */\n\tpublic onRemove(): void {\n\t\tthis.unregisterValhallaControl();\n\t\tsuper.onRemove();\n\t}\n\n\t/**\n\t * Activate Terra Draw to start drawing\n\t */\n\tpublic activate() {\n\t\tsuper.activate();\n\t\tthis.registerValhallaControl();\n\t}\n\n\t/**\n\t * clean maplibre style to filter only for terradraw related layers or without them.\n\t * If options are not set, returns original style given to the function.\n\t *\n\t * This can be useful incase users only want to get terradraw related layers or without it.\n\t *\n\t * Usage:\n\t * `cleanStyle(map.getStyle, { excludeTerraDrawLayers: true})`\n\t * `cleanStyle(map.getStyle, { onlyTerraDrawLayers: true})`\n\t *\n\t * @param style maplibre style spec\n\t * @param options.excludeTerraDrawLayers return maplibre style without terradraw layers and sources\n\t * @param options.onlyTerraDrawLayers return maplibre style with only terradraw layers and sources\n\t * @returns\n\t */\n\tpublic cleanStyle(\n\t\tstyle: StyleSpecification,\n\t\toptions?: { excludeTerraDrawLayers?: boolean; onlyTerraDrawLayers?: boolean }\n\t) {\n\t\tconst sourceIds = TERRADRAW_SOURCE_IDS;\n\n\t\tconst pointSource = this.controlOptions.routingLineLayerNodeSpec?.source;\n\t\tif (pointSource) sourceIds.push(pointSource);\n\n\t\tconst polygonSource = this.controlOptions.isochronePolygonLayerSpec?.source;\n\t\tif (polygonSource) sourceIds.push(polygonSource);\n\n\t\treturn cleanMaplibreStyle(style, options, sourceIds, this.options.adapterOptions?.prefixId);\n\t}\n\n\t/**\n\t * Create the settings dialog for Valhalla control\n\t */\n\tprivate createSettingsDialog() {\n\t\tthis.settingDialog = new ModalDialog(\n\t\t\t`maplibregl-terradraw-${this.cssPrefix}settings-dialog`,\n\t\t\t'Settings'\n\t\t);\n\t\tthis.settingDialog.create(\n\t\t\tthis.map?.getContainer().parentElement as HTMLElement,\n\t\t\t(content: HTMLDivElement) => {\n\t\t\t\t// Tab container\n\t\t\t\tconst tabContainer = document.createElement('div');\n\t\t\t\ttabContainer.classList.add('tab-container');\n\n\t\t\t\t// Tab buttons\n\t\t\t\tconst tabButtons = document.createElement('div');\n\t\t\t\ttabButtons.classList.add('tab-buttons');\n\n\t\t\t\tconst routingTab = document.createElement('button');\n\t\t\t\troutingTab.type = 'button';\n\t\t\t\troutingTab.classList.add('tab-button', 'active');\n\t\t\t\troutingTab.textContent = 'Routing';\n\t\t\t\troutingTab.addEventListener('click', (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.switchTab('routing', tabButtons, tabContents);\n\t\t\t\t});\n\t\t\t\ttabButtons.appendChild(routingTab);\n\n\t\t\t\tconst isochroneTab = document.createElement('button');\n\t\t\t\tisochroneTab.type = 'button';\n\t\t\t\tisochroneTab.classList.add('tab-button');\n\t\t\t\tisochroneTab.textContent = 'Isochrone';\n\t\t\t\tisochroneTab.addEventListener('click', (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.switchTab('isochrone', tabButtons, tabContents);\n\t\t\t\t});\n\t\t\t\ttabButtons.appendChild(isochroneTab);\n\n\t\t\t\ttabContainer.appendChild(tabButtons);\n\n\t\t\t\t// Tab contents container\n\t\t\t\tconst tabContents = document.createElement('div');\n\t\t\t\ttabContents.classList.add('tab-contents');\n\n\t\t\t\t// Routing content\n\t\t\t\tconst routingContent = this.createRoutingContent();\n\t\t\t\troutingContent.classList.add('tab-content', 'active');\n\t\t\t\troutingContent.setAttribute('data-tab', 'routing');\n\t\t\t\ttabContents.appendChild(routingContent);\n\n\t\t\t\t// Isochrone content\n\t\t\t\tconst isochroneContent = this.createIsochroneContent();\n\t\t\t\tisochroneContent.classList.add('tab-content');\n\t\t\t\tisochroneContent.setAttribute('data-tab', 'isochrone');\n\t\t\t\ttabContents.appendChild(isochroneContent);\n\n\t\t\t\ttabContainer.appendChild(tabContents);\n\t\t\t\tcontent.appendChild(tabContainer);\n\n\t\t\t\treturn content;\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * Switch between tabs\n\t */\n\tprivate switchTab(tabName: string, tabButtons: HTMLElement, tabContents: HTMLElement) {\n\t\t// Update tab buttons\n\t\ttabButtons.querySelectorAll('.tab-button').forEach((btn) => btn.classList.remove('active'));\n\t\ttabButtons\n\t\t\t.querySelector(`[data-tab=\"${tabName}\"], :nth-child(${tabName === 'routing' ? '1' : '2'})`)\n\t\t\t?.classList.add('active');\n\n\t\t// Update tab contents\n\t\ttabContents\n\t\t\t.querySelectorAll('.tab-content')\n\t\t\t.forEach((content) => content.classList.remove('active'));\n\t\ttabContents.querySelector(`[data-tab=\"${tabName}\"]`)?.classList.add('active');\n\t}\n\n\t/**\n\t * Create routing tab content\n\t */\n\tprivate createRoutingContent(): HTMLDivElement {\n\t\tconst container = document.createElement('div');\n\n\t\t// Means of Transport section\n\t\tconst transportSection = document.createElement('div');\n\t\ttransportSection.classList.add('setting-section');\n\n\t\tconst transportLabel = document.createElement('label');\n\t\ttransportLabel.textContent = 'Means of Transport';\n\t\ttransportLabel.classList.add('setting-label');\n\t\ttransportSection.appendChild(transportLabel);\n\n\t\ttransportSection.appendChild(\n\t\t\tthis.settingDialog.createSegmentButtons(\n\t\t\t\tcostingModelOptions as unknown as { value: string; label: string }[],\n\t\t\t\tthis.routingCostingModel,\n\t\t\t\t(value: string) => {\n\t\t\t\t\tif (!this.valhallaOptions.routingOptions) {\n\t\t\t\t\t\tthis.valhallaOptions.routingOptions = {};\n\t\t\t\t\t}\n\t\t\t\t\tthis.valhallaOptions.routingOptions.costingModel = value as costingModelType;\n\t\t\t\t\tthis.dispatchEvent('setting-changed');\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tcontainer.appendChild(transportSection);\n\n\t\t// Distance Unit section\n\t\tconst unitSection = document.createElement('div');\n\t\tunitSection.classList.add('setting-section');\n\n\t\tconst unitLabel = document.createElement('label');\n\t\tunitLabel.textContent = 'Distance Unit';\n\t\tunitLabel.classList.add('setting-label');\n\t\tunitSection.appendChild(unitLabel);\n\n\t\tunitSection.appendChild(\n\t\t\tthis.settingDialog.createSegmentButtons(\n\t\t\t\troutingDistanceUnitOptions as unknown as { value: string; label: string }[],\n\t\t\t\tthis.routingDistanceUnit,\n\t\t\t\t(value: string) => {\n\t\t\t\t\tif (!this.valhallaOptions.routingOptions) {\n\t\t\t\t\t\tthis.valhallaOptions.routingOptions = {};\n\t\t\t\t\t}\n\t\t\t\t\tthis.valhallaOptions.routingOptions.distanceUnit = value as routingDistanceUnitType;\n\t\t\t\t\tthis.dispatchEvent('setting-changed');\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tcontainer.appendChild(unitSection);\n\n\t\treturn container;\n\t}\n\n\t/**\n\t * Create isochrone tab content\n\t */\n\tprivate createIsochroneContent(): HTMLDivElement {\n\t\tconst container = document.createElement('div');\n\n\t\t// Contour Type section\n\t\tconst contourTypeSection = document.createElement('div');\n\t\tcontourTypeSection.classList.add('setting-section');\n\n\t\tconst contourTypeLabel = document.createElement('label');\n\t\tcontourTypeLabel.textContent = 'Contour Type';\n\t\tcontourTypeLabel.classList.add('setting-label');\n\t\tcontourTypeSection.appendChild(contourTypeLabel);\n\n\t\tcontourTypeSection.appendChild(\n\t\t\tthis.settingDialog.createSegmentButtons(\n\t\t\t\tcontourTypeOptions as unknown as { value: string; label: string }[],\n\t\t\t\tthis.controlOptions.valhallaOptions?.isochroneOptions?.contourType || 'time',\n\t\t\t\t(value: string) => {\n\t\t\t\t\tif (!this.valhallaOptions.isochroneOptions) {\n\t\t\t\t\t\tthis.valhallaOptions.isochroneOptions = {};\n\t\t\t\t\t}\n\t\t\t\t\tthis.valhallaOptions.isochroneOptions.contourType = value as ContourType;\n\t\t\t\t\tthis.dispatchEvent('setting-changed');\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tcontainer.appendChild(contourTypeSection);\n\n\t\t// Means of Transport section\n\t\tconst transportSection = document.createElement('div');\n\t\ttransportSection.classList.add('setting-section');\n\n\t\tconst transportLabel = document.createElement('label');\n\t\ttransportLabel.textContent = 'Means of Transport';\n\t\ttransportLabel.classList.add('setting-label');\n\t\ttransportSection.appendChild(transportLabel);\n\n\t\ttransportSection.appendChild(\n\t\t\tthis.settingDialog.createSegmentButtons(\n\t\t\t\tcostingModelOptions as unknown as { value: string; label: string }[],\n\t\t\t\tthis.controlOptions.valhallaOptions?.isochroneOptions?.costingModel || 'auto',\n\t\t\t\t(value: string) => {\n\t\t\t\t\tif (!this.valhallaOptions.isochroneOptions) {\n\t\t\t\t\t\tthis.valhallaOptions.isochroneOptions = {};\n\t\t\t\t\t}\n\t\t\t\t\tthis.valhallaOptions.isochroneOptions.costingModel = value as costingModelType;\n\t\t\t\t\tthis.dispatchEvent('setting-changed');\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tcontainer.appendChild(transportSection);\n\n\t\t// Contours section\n\t\tconst contoursSection = document.createElement('div');\n\t\tcontoursSection.classList.add('setting-section');\n\n\t\tconst contoursLabel = document.createElement('label');\n\t\tcontoursLabel.textContent = 'Contours';\n\t\tcontoursLabel.classList.add('setting-label');\n\t\tcontoursSection.appendChild(contoursLabel);\n\n\t\tconst contoursTable = this.createContoursTable();\n\t\tcontoursSection.appendChild(contoursTable);\n\n\t\tcontainer.appendChild(contoursSection);\n\n\t\treturn container;\n\t}\n\n\t/**\n\t * Create contours table\n\t */\n\tprivate createContoursTable(): HTMLDivElement {\n\t\tconst tableContainer = document.createElement('div');\n\t\ttableContainer.classList.add('contours-table');\n\n\t\tconst table = document.createElement('table');\n\t\ttable.classList.add('contours-table-element');\n\n\t\t// Header\n\t\tconst thead = document.createElement('thead');\n\t\tconst headerRow = document.createElement('tr');\n\n\t\tconst colorHeader = document.createElement('th');\n\t\tcolorHeader.textContent = 'Color';\n\t\theaderRow.appendChild(colorHeader);\n\n\t\tconst timeHeader = document.createElement('th');\n\t\ttimeHeader.textContent = 'Time (min)';\n\t\theaderRow.appendChild(timeHeader);\n\n\t\tconst distanceHeader = document.createElement('th');\n\t\tdistanceHeader.textContent = 'Distance (km)';\n\t\theaderRow.appendChild(distanceHeader);\n\n\t\tconst actionHeader = document.createElement('th');\n\t\theaderRow.appendChild(actionHeader);\n\n\t\tthead.appendChild(headerRow);\n\t\ttable.appendChild(thead);\n\n\t\t// Body\n\t\tconst tbody = document.createElement('tbody');\n\n\t\tconst currentContours = this.controlOptions.valhallaOptions?.isochroneOptions\n\t\t\t?.contours as Contour[];\n\n\t\tcurrentContours.forEach((contour, index) => {\n\t\t\tconst row = this.createContourRow(contour, index);\n\t\t\ttbody.appendChild(row);\n\t\t});\n\n\t\ttable.appendChild(tbody);\n\t\ttableContainer.appendChild(table);\n\n\t\t// Add contour button\n\t\tconst addButton = document.createElement('button');\n\t\taddButton.type = 'button';\n\t\taddButton.classList.add('add-row-button');\n\t\taddButton.textContent = 'Add Contour';\n\t\taddButton.hidden = currentContours.length >= 4;\n\t\taddButton.addEventListener('click', (e) => {\n\t\t\te.stopPropagation();\n\n\t\t\tconst latestContours = this.valhallaOptions.isochroneOptions?.contours as Contour[];\n\n\t\t\tconst newContour = JSON.parse(JSON.stringify(latestContours[latestContours.length - 1]));\n\t\t\tconst index = tbody.children.length;\n\t\t\tconst row = this.createContourRow(newContour, index);\n\t\t\ttbody.appendChild(row);\n\t\t\tlatestContours.push(newContour);\n\t\t\tthis.updateAddRowButtonState();\n\t\t\tthis.dispatchEvent('setting-changed');\n\t\t});\n\t\ttableContainer.appendChild(addButton);\n\n\t\treturn tableContainer;\n\t}\n\n\t/**\n\t * Create a single contour row\n\t */\n\tprivate createContourRow(contour: Contour, index: number): HTMLTableRowElement {\n\t\tconst row = document.createElement('tr');\n\t\trow.setAttribute('data-index', index.toString());\n\n\t\t// Color cell\n\t\tconst colorCell = document.createElement('td');\n\t\tconst colorInput = document.createElement('input');\n\t\tcolorInput.type = 'color';\n\t\tcolorInput.value = contour.color;\n\t\tcolorInput.classList.add('color-picker');\n\t\tcolorInput.addEventListener('change', (e) => {\n\t\t\te.stopPropagation();\n\t\t\tif (!this.valhallaOptions.isochroneOptions?.contours) return;\n\t\t\tthis.valhallaOptions.isochroneOptions.contours[index].color = (\n\t\t\t\te.target as HTMLInputElement\n\t\t\t).value;\n\t\t\tthis.dispatchEvent('setting-changed');\n\t\t});\n\t\tcolorCell.appendChild(colorInput);\n\t\trow.appendChild(colorCell);\n\n\t\t// Time cell\n\t\tconst timeCell = document.createElement('td');\n\t\tconst timeInput = document.createElement('input');\n\t\ttimeInput.type = 'number';\n\t\ttimeInput.value = (contour.time as number).toString();\n\t\ttimeInput.min = '1';\n\t\ttimeInput.classList.add('number-input');\n\t\ttimeInput.addEventListener('change', (e) => {\n\t\t\te.stopPropagation();\n\t\t\tif (!this.valhallaOptions.isochroneOptions?.contours) return;\n\t\t\tthis.valhallaOptions.isochroneOptions.contours[index].time = parseFloat(\n\t\t\t\t(e.target as HTMLInputElement).value\n\t\t\t);\n\t\t\tthis.dispatchEvent('setting-changed');\n\t\t});\n\t\ttimeCell.appendChild(timeInput);\n\t\trow.appendChild(timeCell);\n\n\t\t// Distance cell\n\t\tconst distanceCell = document.createElement('td');\n\t\tconst distanceInput = document.createElement('input');\n\t\tdistanceInput.type = 'number';\n\t\tdistanceInput.value = (contour.distance as number).toString();\n\t\tdistanceInput.min = '0.1';\n\t\tdistanceInput.step = '0.1';\n\t\tdistanceInput.classList.add('number-input');\n\t\tdistanceInput.addEventListener('change', (e) => {\n\t\t\te.stopPropagation();\n\t\t\tif (!this.valhallaOptions.isochroneOptions?.contours) return;\n\t\t\tthis.valhallaOptions.isochroneOptions.contours[index].distance = parseFloat(\n\t\t\t\t(e.target as HTMLInputElement).value\n\t\t\t);\n\t\t\tthis.dispatchEvent('setting-changed');\n\t\t});\n\t\tdistanceCell.appendChild(distanceInput);\n\t\trow.appendChild(distanceCell);\n\n\t\t// Action cell\n\t\tconst actionCell = document.createElement('td');\n\t\tif (index > 0) {\n\t\t\tconst deleteButton = document.createElement('button');\n\t\t\tdeleteButton.type = 'button';\n\t\t\tdeleteButton.textContent = '';\n\t\t\tdeleteButton.classList.add('delete-button');\n\t\t\tdeleteButton.addEventListener('click', (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tconst index = parseInt(row.getAttribute('data-index') || '0');\n\t\t\t\trow.remove();\n\n\t\t\t\t// Remove from options\n\t\t\t\tif (this.valhallaOptions.isochroneOptions?.contours) {\n\t\t\t\t\tthis.valhallaOptions.isochroneOptions.contours.splice(index, 1);\n\t\t\t\t}\n\n\t\t\t\t// Update indices\n\t\t\t\tconst tbody = row.parentElement as HTMLTableSectionElement;\n\t\t\t\tif (tbody) {\n\t\t\t\t\tArray.from(tbody.children).forEach((row, newIndex) => {\n\t\t\t\t\t\t(row as HTMLElement).setAttribute('data-index', newIndex.toString());\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.updateAddRowButtonState();\n\t\t\t\tthis.dispatchEvent('setting-changed');\n\t\t\t});\n\t\t\tactionCell.appendChild(deleteButton);\n\t\t}\n\n\t\trow.appendChild(actionCell);\n\n\t\treturn row;\n\t}\n\n\tprivate updateAddRowButtonState = () => {\n\t\tconst addButtons = document.getElementsByClassName('add-row-button');\n\t\tif (addButtons && addButtons.length > 0) {\n\t\t\tconst addButton = addButtons.item(0) as HTMLButtonElement;\n\t\t\tif (addButton) {\n\t\t\t\tconst currentContours = this.controlOptions.valhallaOptions?.isochroneOptions\n\t\t\t\t\t?.contours as Contour[];\n\t\t\t\taddButton.hidden = currentContours.length >= 4;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Add Terra Draw drawing mode button\n\t * @param mode Terra Draw mode name\n\t */\n\tprotected addTerradrawButton(mode: TerradrawMode) {\n\t\tconst btn = document.createElement('button');\n\t\tbtn.type = 'button';\n\t\tthis.modeButtons[mode] = btn;\n\n\t\tif ((mode as TerradrawValhallaMode) === 'settings') {\n\t\t\tbtn.classList.add(`maplibregl-terradraw-${this.cssPrefix}add-control`);\n\t\t\tbtn.classList.add(`maplibregl-terradraw-${this.cssPrefix}${mode}-button`);\n\t\t\tbtn.addEventListener('click', this.handleSettingDialog.bind(this));\n\t\t} else {\n\t\t\tsuper.addTerradrawButton(mode);\n\t\t}\n\t}\n\n\t/**\n\t * Handle the click event of the settings button\n\t */\n\tprivate handleSettingDialog() {\n\t\tthis.settingDialog?.open();\n\t}\n\n\t/**\n\t * Register  measure control related maplibre sources and layers\n\t */\n\tprivate registerValhallaControl() {\n\t\tif (!this.map) return;\n\n\t\tconst lineModes = this.options.modes?.filter((m) => ['linestring'].includes(m));\n\n\t\tif (lineModes && lineModes.length > 0) {\n\t\t\t// add GeoJSON source for line node\n\t\t\tif (\n\t\t\t\t!this.map.getSource(\n\t\t\t\t\t(this.controlOptions.routingLineLayerNodeSpec as CircleLayerSpecification).source\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tthis.map.addSource(\n\t\t\t\t\t(this.controlOptions.routingLineLayerNodeSpec as CircleLayerSpecification).source,\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'geojson',\n\t\t\t\t\t\tdata: { type: 'FeatureCollection', features: [] }\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// add GeoJSON layer for distance label node appearance\n\t\t\tif (\n\t\t\t\t!this.map.getLayer(\n\t\t\t\t\t(this.controlOptions.routingLineLayerNodeSpec as CircleLayerSpecification).id\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tthis.map.addLayer(this.controlOptions.routingLineLayerNodeSpec as CircleLayerSpecification);\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!this.map.getLayer(\n\t\t\t\t\t(this.controlOptions.routingLineLayerNodeLabelSpec as SymbolLayerSpecification).id\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tthis.map.addLayer(\n\t\t\t\t\tthis.controlOptions.routingLineLayerNodeLabelSpec as SymbolLayerSpecification\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst pointModes = this.options.modes?.filter((m) => ['point'].includes(m));\n\n\t\tif (pointModes && pointModes.length > 0) {\n\t\t\t// add GeoJSON source for polygon features\n\t\t\tif (\n\t\t\t\t!this.map.getSource(\n\t\t\t\t\t(this.controlOptions.isochronePolygonLayerSpec as FillLayerSpecification).source\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tthis.map.addSource(\n\t\t\t\t\t(this.controlOptions.isochronePolygonLayerSpec as FillLayerSpecification).source,\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'geojson',\n\t\t\t\t\t\tdata: { type: 'FeatureCollection', features: [] }\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// add GeoJSON layer for isochrone appearance\n\t\t\tif (\n\t\t\t\t!this.map.getLayer(\n\t\t\t\t\t(this.controlOptions.isochronePolygonLayerSpec as FillLayerSpecification).id\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tthis.map.addLayer(this.controlOptions.isochronePolygonLayerSpec as FillLayerSpecification);\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!this.map.getLayer(\n\t\t\t\t\t(this.controlOptions.isochroneLineLayerSpec as LineLayerSpecification).id\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tthis.map.addLayer(this.controlOptions.isochroneLineLayerSpec as LineLayerSpecification);\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!this.map.getLayer(\n\t\t\t\t\t(this.controlOptions.isochroneLabelLayerSpec as SymbolLayerSpecification).id\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tthis.map.addLayer(this.controlOptions.isochroneLabelLayerSpec as SymbolLayerSpecification);\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\t((lineModes && lineModes.length > 0) || (pointModes && pointModes.length > 0)) &&\n\t\t\tthis.map\n\t\t) {\n\t\t\tconst drawInstance = this.getTerraDrawInstance();\n\t\t\tif (drawInstance) {\n\t\t\t\t// subscribe change event of TerraDraw to calc distance\n\t\t\t\tdrawInstance.on('finish', this.handleTerradrawFeatureReady.bind(this));\n\t\t\t\t// subscribe feature-deleted event for the plugin control\n\t\t\t\tthis.on('feature-deleted', this.onFeatureDeleted.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Register  measure control related maplibre sources and layers\n\t */\n\tprivate unregisterValhallaControl() {\n\t\tthis.off('feature-deleted', this.onFeatureDeleted.bind(this));\n\t\tif (!this.map) return;\n\n\t\tif (\n\t\t\tthis.map.getLayer(\n\t\t\t\t(this.controlOptions.routingLineLayerNodeSpec as CircleLayerSpecification).id\n\t\t\t)\n\t\t) {\n\t\t\tthis.map.removeLayer(\n\t\t\t\t(this.controlOptions.routingLineLayerNodeSpec as CircleLayerSpecification).id\n\t\t\t);\n\t\t}\n\t\tif (\n\t\t\tthis.map.getLayer(\n\t\t\t\t(this.controlOptions.routingLineLayerNodeLabelSpec as SymbolLayerSpecification).id\n\t\t\t)\n\t\t) {\n\t\t\tthis.map.removeLayer(\n\t\t\t\t(this.controlOptions.routingLineLayerNodeLabelSpec as SymbolLayerSpecification).id\n\t\t\t);\n\t\t}\n\t\tif (\n\t\t\tthis.map.getSource(\n\t\t\t\t(this.controlOptions.routingLineLayerNodeSpec as CircleLayerSpecification).source\n\t\t\t)\n\t\t) {\n\t\t\tthis.map.removeSource(\n\t\t\t\t(this.controlOptions.routingLineLayerNodeSpec as CircleLayerSpecification).source\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\tthis.map.getLayer(\n\t\t\t\t(this.controlOptions.isochronePolygonLayerSpec as FillLayerSpecification).id\n\t\t\t)\n\t\t) {\n\t\t\tthis.map.removeLayer(\n\t\t\t\t(this.controlOptions.isochronePolygonLayerSpec as FillLayerSpecification).id\n\t\t\t);\n\t\t}\n\t\tif (\n\t\t\tthis.map.getLayer((this.controlOptions.isochroneLineLayerSpec as LineLayerSpecification).id)\n\t\t) {\n\t\t\tthis.map.removeLayer(\n\t\t\t\t(this.controlOptions.isochroneLineLayerSpec as LineLayerSpecification).id\n\t\t\t);\n\t\t}\n\t\tif (\n\t\t\tthis.map.getLayer(\n\t\t\t\t(this.controlOptions.isochroneLabelLayerSpec as SymbolLayerSpecification).id\n\t\t\t)\n\t\t) {\n\t\t\tthis.map.removeLayer(\n\t\t\t\t(this.controlOptions.isochroneLabelLayerSpec as SymbolLayerSpecification).id\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\tthis.map.getSource(\n\t\t\t\t(this.controlOptions.isochronePolygonLayerSpec as FillLayerSpecification).source\n\t\t\t)\n\t\t) {\n\t\t\tthis.map.removeSource(\n\t\t\t\t(this.controlOptions.isochronePolygonLayerSpec as FillLayerSpecification).source\n\t\t\t);\n\t\t}\n\n\t\tconst drawInstance = this.getTerraDrawInstance();\n\t\tif (drawInstance) {\n\t\t\t// subscribe change event of TerraDraw to calc distance\n\t\t\tdrawInstance.off('finish', this.handleTerradrawFeatureReady.bind(this));\n\t\t}\n\t}\n\n\t/**\n\t * Handle finish event of terradraw. It will be called after finishing adding a feature\n\t * @param id Feature ID\n\t */\n\tprivate handleTerradrawFeatureReady = debounce((id: TerraDrawExtend.FeatureId) => {\n\t\tif (!this.map) return;\n\t\tthis.computeRouteByLineFeatureID(id);\n\t\tthis.computeIsochroneByPointFeatureID(id);\n\t}, 300);\n\n\tprivate computeIsochroneByPointFeatureID = async (id: TerraDrawExtend.FeatureId) => {\n\t\tif (!this.map) return;\n\t\tif (!this.valhallaOptions.url) return;\n\n\t\tconst feature = this.terradraw?.getSnapshotFeature(id);\n\t\tif (!feature || (feature && feature.geometry.type !== 'Point')) return;\n\n\t\tconst coord = feature.geometry.coordinates as [number, number];\n\n\t\tconst valhallaIsochrone = new ValhallaIsochrone(this.valhallaUrl);\n\t\tconst fc = await valhallaIsochrone.calcIsochrone(\n\t\t\tcoord[0],\n\t\t\tcoord[1],\n\t\t\tthis.isochroneContourType,\n\t\t\tthis.isochroneCostingModel,\n\t\t\tthis.isochroneContours\n\t\t);\n\t\tconst updatedFeatures = fc.features.map((f) => {\n\t\t\tf.id = `${id}-${f.properties.contour}`;\n\t\t\tf.properties.originalId = id;\n\t\t\treturn f;\n\t\t}) as unknown as GeoJSONStoreFeatures[];\n\n\t\tconst updateProperties = {\n\t\t\tcontourType: this.isochroneContourType,\n\t\t\tcostingModel: this.isochroneCostingModel,\n\t\t\tresult: updatedFeatures as unknown as string\n\t\t};\n\n\t\tfeature.properties = {\n\t\t\t...feature.properties,\n\t\t\t...updateProperties\n\t\t};\n\n\t\tthis.terradraw?.updateFeatureProperties(id, updateProperties);\n\n\t\tconst geojsonSource: GeoJSONSourceSpecification = this.map.getStyle().sources[\n\t\t\t(this.controlOptions.isochronePolygonLayerSpec as FillLayerSpecification).source\n\t\t] as GeoJSONSourceSpecification;\n\t\tif (geojsonSource) {\n\t\t\tif (\n\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t) {\n\t\t\t\tgeojsonSource.data.features = geojsonSource.data.features.filter(\n\t\t\t\t\t(f) => f.properties?.originalId !== id\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (\n\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t) {\n\t\t\t\tgeojsonSource.data.features.push(...updatedFeatures);\n\t\t\t}\n\n\t\t\t(\n\t\t\t\tthis.map.getSource(\n\t\t\t\t\t(this.controlOptions.isochronePolygonLayerSpec as FillLayerSpecification).source\n\t\t\t\t) as GeoJSONSource\n\t\t\t)?.setData(geojsonSource.data);\n\t\t\tthis.map.moveLayer(\n\t\t\t\t(this.controlOptions.isochronePolygonLayerSpec as FillLayerSpecification).id\n\t\t\t);\n\t\t\tthis.map.moveLayer((this.controlOptions.isochroneLineLayerSpec as LineLayerSpecification).id);\n\t\t\tthis.map.moveLayer(\n\t\t\t\t(this.controlOptions.isochroneLabelLayerSpec as SymbolLayerSpecification).id\n\t\t\t);\n\t\t}\n\t};\n\n\t/**\n\t * Compute elevation by a LineString feature ID\n\t * @param id FeatureID\n\t */\n\tprivate computeRouteByLineFeatureID = async (id: TerraDrawExtend.FeatureId) => {\n\t\tif (!this.map) return;\n\n\t\tif (!this.valhallaOptions.url) return;\n\n\t\tconst feature = this.terradraw?.getSnapshotFeature(id);\n\t\tif (!feature || (feature && feature.geometry.type !== 'LineString')) return;\n\n\t\tconst routingEngine = new ValhallaRouting(this.valhallaUrl);\n\t\tconst tripData: LngLat[] = feature.geometry.coordinates.map((c) => {\n\t\t\tconst coord = c as [number, number];\n\t\t\treturn new LngLat(coord[0], coord[1]);\n\t\t});\n\t\tif (!tripData || (tripData && tripData.length < 2)) return;\n\n\t\tconst result = await routingEngine.calcRoute(\n\t\t\ttripData,\n\t\t\tthis.routingCostingModel,\n\t\t\tthis.routingDistanceUnit\n\t\t);\n\t\tif (!result || !result.feature) return;\n\t\tconst newGeometry = result?.feature.geometry as GeoJSONStoreGeometries;\n\t\tthis.terradraw?.updateFeatureGeometry(id, newGeometry);\n\n\t\tfeature.geometry = newGeometry;\n\t\tfeature.properties = {\n\t\t\t...feature.properties,\n\t\t\t...result?.feature.properties\n\t\t};\n\t\tthis.terradraw?.updateFeatureProperties(id, result?.feature.properties);\n\n\t\t// add line node features to the map for label\n\t\tconst pointFeactureCollection = result?.pointFeatures;\n\t\tconst updatedFeatures = pointFeactureCollection.features.map((f) => {\n\t\t\tf.id = `${id}-${f.id}`;\n\t\t\tf.properties.originalId = id;\n\t\t\treturn f;\n\t\t}) as unknown as GeoJSONStoreFeatures[];\n\n\t\tconst geojsonSource: GeoJSONSourceSpecification = this.map.getStyle().sources[\n\t\t\t(this.controlOptions.routingLineLayerNodeSpec as CircleLayerSpecification).source\n\t\t] as GeoJSONSourceSpecification;\n\t\tif (geojsonSource) {\n\t\t\tif (\n\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t) {\n\t\t\t\tgeojsonSource.data.features = geojsonSource.data.features.filter(\n\t\t\t\t\t(f) => f.properties?.originalId !== id\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (\n\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t) {\n\t\t\t\tgeojsonSource.data.features.push(...updatedFeatures);\n\t\t\t}\n\n\t\t\t(\n\t\t\t\tthis.map.getSource(\n\t\t\t\t\t(this.controlOptions.routingLineLayerNodeSpec as CircleLayerSpecification).source\n\t\t\t\t) as GeoJSONSource\n\t\t\t)?.setData(geojsonSource.data);\n\t\t\tthis.map.moveLayer(\n\t\t\t\t(this.controlOptions.routingLineLayerNodeSpec as CircleLayerSpecification).id\n\t\t\t);\n\t\t\tthis.map.moveLayer(\n\t\t\t\t(this.controlOptions.routingLineLayerNodeLabelSpec as SymbolLayerSpecification).id\n\t\t\t);\n\t\t}\n\t};\n\n\t/**\n\t * Event definition when feature is deleted by terradraw\n\t */\n\tprivate onFeatureDeleted(args: unknown) {\n\t\tif (!this.map) return;\n\t\tconst drawInstance = this.getTerraDrawInstance();\n\t\tif (drawInstance) {\n\t\t\tlet deletedIds: string[] = [];\n\t\t\tif (typeof args === 'object' && args !== null && 'deletedIds' in args) {\n\t\t\t\tdeletedIds = (args as { deletedIds: string[] }).deletedIds;\n\t\t\t}\n\n\t\t\tconst sources = [\n\t\t\t\tthis.controlOptions.routingLineLayerNodeSpec as CircleLayerSpecification,\n\t\t\t\tthis.controlOptions.isochronePolygonLayerSpec as FillLayerSpecification\n\t\t\t];\n\t\t\tconst sourceIds = sources.map((src) => src.source);\n\t\t\tif (deletedIds && deletedIds.length > 0) {\n\t\t\t\t// delete only features by IDs\n\t\t\t\tthis.clearExtendedFeatures(sourceIds, deletedIds);\n\t\t\t} else {\n\t\t\t\t// delete all features\n\t\t\t\tthis.clearExtendedFeatures(sourceIds, undefined);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * get GeoJSON features\n\t * @param onlySelected If true, returns only selected features. Default is false.\n\t * @returns FeatureCollection in GeoJSON format\n\t */\n\tpublic getFeatures(onlySelected = false) {\n\t\tconst fc = super.getFeatures(onlySelected);\n\t\tif (!fc) return fc;\n\t\tif (!this.terradraw) return fc;\n\t\tif (!this.map) return fc;\n\n\t\tconst geojsonSource: GeoJSONSourceSpecification = this.map.getStyle().sources[\n\t\t\t(this.controlOptions.isochronePolygonLayerSpec as FillLayerSpecification).source\n\t\t] as GeoJSONSourceSpecification;\n\n\t\tconst features: GeoJSONStoreFeatures[] = [];\n\n\t\tfor (let i = 0; i < fc.features.length; i++) {\n\t\t\tconst feature = fc.features[i];\n\t\t\tconst geomType = feature.geometry.type;\n\t\t\tif (geomType === 'Point') {\n\t\t\t\tconst fid = feature.id;\n\n\t\t\t\tif (geojsonSource) {\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof geojsonSource.data !== 'string' &&\n\t\t\t\t\t\tgeojsonSource.data.type === 'FeatureCollection'\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst filtered = geojsonSource.data.features.filter(\n\t\t\t\t\t\t\t(f) => f.properties?.originalId === fid\n\t\t\t\t\t\t) as unknown as GeoJSONStoreFeatures[];\n\t\t\t\t\t\tfeatures.push(feature);\n\t\t\t\t\t\tif (filtered.length > 0) {\n\t\t\t\t\t\t\tfeatures.push(...filtered);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfeatures.push(feature);\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\ttype: 'FeatureCollection',\n\t\t\tfeatures: features\n\t\t};\n\t}\n}\n"],"names":["t","e","i","o","s","n","r","a","h","l","c","u","p$1","g","d","y","f","m","v","C","P","I","x","E","S","M","F","D","w","p","O","b","_","k","N","T","j","W","B","G","R","U","A","V","Y","K","z$1","X","H","z","$","q$1","Z","J","Q","tt","et","it","ot","st","nt","rt","at","dt","ht","lt","ct","ut","pt","gt","yt","ft","mt","q","vt","Ct","Pt","It","xt","Et","St","Mt","Ft","Dt","wt","Ot","_t","bt","kt","Nt","Tt","jt","Wt","Bt","Gt","Rt","Lt","Ut","At","Vt","Yt","Kt","zt","Xt","Ht","$t","qt","Zt","Jt","Qt","te","ee","ie","oe","se","ne","ge","re","ae","de","he","le","ce","ue","pe","ye","fe","me","ve","Ce","De","we","Oe","_e","be","ke","Ne","Te","je","We","Be","Ge","Re","Le","Ue","Ae","Ye","Ke","ze","Xe","He","AvailableModes","AvailableValhallaModes","defaultControlOptions","defaultMeasureControlOptions","TerraDrawPointMode","TerraDrawLineStringMode","TerraDrawPolygonMode","TerraDrawRectangleMode","TerraDrawAngledRectangleMode","TerraDrawCircleMode","TerraDrawFreehandMode","TerraDrawFreehandLineStringMode","TerraDrawSensorMode","TerraDrawSectorMode","TerraDrawSelectMode","defaultValhallaControlOptions","TerraDrawRenderMode","getDefaultModeOptions","feature","updateType","ValidateNotSelfIntersecting","earthRadius","factors","geom","properties","options","feat","point","coordinates","isNumber","radiansToLength","radians","units","factor","degreesToRadians","degrees","num","coordEach","geojson","callback","excludeWrapCoord","geometry","stopG","coords","geometryMaybeCollection","wrapShrink","coordIndex","isGeometryCollection","type","isFeatureCollection","isFeature","stop","featureIndex","geomIndex","multiFeatureIndex","geometryIndex","geomType","geomEach","featureProperties","featureBBox","featureId","geomReduce","initialValue","previousValue","currentGeometry","area","value","calculateArea","total","polygonArea","ringArea","FACTOR","PI_OVER_180","coordsLength","lower","middle","upper","lowerX","middleY","upperX","turf_area_default","convertAreaUnit","unit","forceUnit","metricUnits","imperialUnits","effectiveForceUnit","isMetricForceUnit","isImperialForceUnit","convertMetricUnit","convertImperialUnit","outputArea","outputUnit","calcArea","areaUnit","areaPrecision","result","converted","getCoord","coord","distance","from","to","coordinates1","coordinates2","dLat","dLon","lat1","lat2","turf_distance_default","convertDistance","calcDistance","distanceUnit","distancePrecision","map","computeElevation","terrainSource","totalDistance","segments","start","end","segment","elevation_start","elevation_end","convertedDistance","segmentDistance","segmentTotalDistance","capitalize","TERRADRAW_SOURCE_IDS","TERRADRAW_MEASURE_SOURCE_IDS","TERRADRAW_VALHALLA_SOURCE_IDS","cleanMaplibreStyle","style","sourceIds","prefixId","id","cloned","key","debounce","delay","timeoutId","args","MemoryCache","maxSize","ttl","item","firstKey","expiry","now","ModalDialog","className","title","parentElement","addConttent","existingDialog","dialog","header","btnClose","content","event","target","rect","defaultValue","onClick","segmentButtons","option","button","btn","queryElevationByPoint","elevation","L","coordinateToKey","precision","lng","lat","roundedLng","roundedLat","queryElevationFromRasterDEM","points","terrainDource","cacheConfig","cacheInstance","promises","config","cache","terrainInstance","maxzoom","url","encoding","tileSize","minzoom","tms","TerrainRGB","Terrarium","resolve","cacheKey","cachedElevation","roundFeatureCoordinates","features","decimalPlaces","roundCoord","processGeometry","ring","polygon","contourTypeOptions","ValhallaIsochrone","lon","contourType","costingModel","contours","contourList","jsonOption","costingModelOptions","routingDistanceUnitOptions","ValhallaRouting","tripData","baseAPI","params","apiUrl","json","shapes","shape","shp","combinedShape","sumLength","sumTime","combinedManeuvers","pointFeatures","leg","index","pointFeature","transportLabel","opt","firstFeature","props","text","shift","byte","latitude_change","longitude_change","MaplibreTerradrawControl","controls","addButton","defaultOptions","modes","newOption","defaultOption","flags","TerraDraw","TerraDrawMapLibreGLAdapter","ele","currentFeature","mode","selected","ids","isActive","onlySelected","fc","dataStr","download","targets","btns","enabled","hasFeatures","sourceId","geojsonSource","centroid","xSum","ySum","len","MaplibreMeasureControl","isSame","defaultPrecision","firstLayer","fontNames","layers","layer","measureOptions","drawInstance","snapshot","geometryType","polygonSource","lineSource","pointSource","lineModes","polygonModes","lineFeatures","src","updatedFeatures","newGeoJsonSource","updatedExistingFeatures","featureMap","startNode","endNode","deletedIds","MaplibreValhallaControl","_options","tabContainer","tabButtons","routingTab","tabContents","isochroneTab","routingContent","isochroneContent","tabName","container","transportSection","unitSection","unitLabel","contourTypeSection","contourTypeLabel","contoursSection","contoursLabel","contoursTable","tableContainer","table","thead","headerRow","colorHeader","timeHeader","distanceHeader","actionHeader","tbody","currentContours","contour","row","latestContours","newContour","colorCell","colorInput","timeCell","timeInput","distanceCell","distanceInput","actionCell","deleteButton","newIndex","addButtons","pointModes","updateProperties","routingEngine","LngLat","newGeometry","fid","filtered"],"mappings":"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","x_google_ignoreList":[0,1,7,8,9,12,13,22,28]}